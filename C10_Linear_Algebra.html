

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10. &#32447;&#24615;&#20195;&#25968; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="11. &#25299;&#25169;&#23398;" href="C11_Topology.html" />
    <link rel="prev" title="9. &#32676;&#19982;&#29615;" href="C09_Groups_and_Rings.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. &#21021;&#31561;&#25968;&#35770;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Discrete_Mathematics.html">6. &#31163;&#25955;&#25968;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Structures.html">7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Hierarchies.html">8. &#23618;&#27425;&#32467;&#26500;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Groups_and_Rings.html">9. &#32676;&#19982;&#29615;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">10. &#32447;&#24615;&#20195;&#25968;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">10.1. &#21521;&#37327;&#31354;&#38388;&#19982;&#32447;&#24615;&#26144;&#23556;</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">10.1.1. &#21521;&#37327;&#31354;&#38388;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">10.1.2. &#32447;&#24615;&#26144;&#23556;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">10.1.3. &#21521;&#37327;&#31354;&#38388;&#30340;&#30452;&#21644;&#19982;&#30452;&#31215;</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#index-2">10.2. &#23376;&#31354;&#38388;&#21644;&#21830;&#31354;&#38388;</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">10.2.1. &#23376;&#31354;&#38388;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">10.2.2. &#23436;&#20840;&#26684;&#32467;&#26500;&#21644;&#20869;&#30452;&#21644;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">10.2.3. &#30001;&#38598;&#21512;&#29983;&#25104;&#30340;&#23376;&#31354;&#38388;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">10.2.4. &#25289;&#22238;&#21644;&#25512;&#20986;&#23376;&#31354;&#38388;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">10.2.5. &#21830;&#31354;&#38388;</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">10.3. &#33258;&#21516;&#24577;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#matrices-bases-dimension">10.4. &#30697;&#38453;&#12289;&#22522;&#21644;&#32500;&#24230;</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#matrices">10.4.1. &#30697;&#38453;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">10.4.2. &#22522;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">10.4.3. &#32500;&#24230;</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C11_Topology.html">11. &#25299;&#25169;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Differential_Calculus.html">12. &#24494;&#20998;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C13_Integration_and_Measure_Theory.html">13. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">10. </span>&#32447;&#24615;&#20195;&#25968;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C10_Linear_Algebra.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="linear-algebra">
<span id="id1"></span><h1><span class="section-number">10. </span>&#32447;&#24615;&#20195;&#25968;<a class="headerlink" href="#linear-algebra" title="Link to this heading">&#61633;</a></h1>
<section id="id2">
<h2><span class="section-number">10.1. </span>&#21521;&#37327;&#31354;&#38388;&#19982;&#32447;&#24615;&#26144;&#23556;<a class="headerlink" href="#id2" title="Link to this heading">&#61633;</a></h2>
<section id="id3">
<h3><span class="section-number">10.1.1. </span>&#21521;&#37327;&#31354;&#38388;<a class="headerlink" href="#id3" title="Link to this heading">&#61633;</a></h3>
<p id="index-0">&#25105;&#20204;&#23558;&#30452;&#25509;&#20174;&#25277;&#35937;&#32447;&#24615;&#20195;&#25968;&#24320;&#22987;&#65292;&#35752;&#35770;&#23450;&#20041;&#22312;&#20219;&#24847;&#22495;&#19978;&#30340;&#21521;&#37327;&#31354;&#38388;&#12290; &#19981;&#36807;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312; <a class="reference internal" href="#matrices"><span class="std std-numref">Section 10.4.1</span></a> &#20013;&#25214;&#21040;&#20851;&#20110;&#30697;&#38453;&#30340;&#20449;&#24687;&#65292;&#35813;&#37096;&#20998;&#22312;&#36923;&#36753;&#19978;&#24182;&#19981;&#20381;&#36182;&#20110;&#26412;&#25277;&#35937;&#29702;&#35770;&#12290;Mathlib &#23454;&#38469;&#19978;&#22788;&#29702;&#30340;&#26159;&#26356;&#24191;&#20041;&#30340;&#32447;&#24615;&#20195;&#25968;&#65292;&#20351;&#29992;&#27169;&#65288;module&#65289;&#19968;&#35789;&#65292;&#20294;&#29616;&#22312;&#25105;&#20204;&#26242;&#26102;&#24403;&#20316;&#36825;&#21482;&#26159;&#19968;&#20010;&#21476;&#24618;&#30340;&#25340;&#20889;&#20064;&#24815;&#12290;</p>
<p>&#8220;&#35774; <span class="math notranslate nohighlight">\(K\)</span> &#26159;&#19968;&#20010;&#22495;&#65292;&#19988; <span class="math notranslate nohighlight">\(V\)</span> &#26159;&#23450;&#20041;&#22312; <span class="math notranslate nohighlight">\(K\)</span> &#19978;&#30340;&#21521;&#37327;&#31354;&#38388;&#8221;&#65288;&#24182;&#23558;&#20854;&#20316;&#20026;&#21518;&#32493;&#32467;&#35770;&#30340;&#38544;&#24335;&#21442;&#25968;&#65289;&#30340;&#34920;&#36798;&#26041;&#24335;&#26159;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">K</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Field</span><span class="w"> </span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#22312; <a class="reference internal" href="C08_Hierarchies.html#hierarchies"><span class="std std-numref">Chapter 8</span></a> &#20013;&#35299;&#37322;&#20102;&#20026;&#20160;&#20040;&#38656;&#35201;&#20004;&#20010;&#29420;&#31435;&#30340;&#31867;&#22411;&#31867; <cite>[AddCommGroup V]</cite> &#21644; <cite>[Module K V]</cite>&#12290;</p>
<p>&#31616;&#32780;&#35328;&#20043;&#65292;&#25968;&#23398;&#19978;&#25105;&#20204;&#24819;&#34920;&#36798;&#30340;&#26159;&#65306;&#25317;&#26377;&#19968;&#20010;&#22495; <span class="math notranslate nohighlight">\(K\)</span> &#19978;&#30340;&#21521;&#37327;&#31354;&#38388;&#32467;&#26500;&#24847;&#21619;&#30528;&#25317;&#26377;&#19968;&#20010;&#21152;&#27861;&#20132;&#25442;&#32676;&#32467;&#26500;&#12290;&#34429;&#28982;&#21487;&#20197;&#21578;&#35785; Lean &#36825;&#19968;&#28857;&#65292;&#20294;&#22914;&#26524;&#36825;&#26679;&#20570;&#65292;&#27599;&#24403; Lean &#38656;&#35201;&#22312;&#31867;&#22411; <span class="math notranslate nohighlight">\(V\)</span> &#19978;&#23547;&#25214;&#35813;&#32676;&#32467;&#26500;&#26102;&#65292;&#23427;&#23601;&#20250;&#23581;&#35797;&#21435;&#23547;&#25214;&#24102;&#26377;&#23436;&#20840;&#26410;&#25351;&#23450;&#22495; <span class="math notranslate nohighlight">\(K\)</span> &#30340;&#21521;&#37327;&#31354;&#38388;&#32467;&#26500;&#65292;&#32780;&#36825;&#20010; <span class="math notranslate nohighlight">\(K\)</span> &#26080;&#27861;&#20174; <span class="math notranslate nohighlight">\(V\)</span> &#20013;&#25512;&#26029;&#20986;&#26469;&#12290;
&#36825;&#20250;&#20005;&#37325;&#24433;&#21709;&#31867;&#22411;&#31867;&#21512;&#25104;&#31995;&#32479;&#30340;&#25928;&#29575;&#21644;&#31283;&#23450;&#24615;&#12290;</p>
<p>&#21521;&#37327; <cite>v</cite> &#19982;&#26631;&#37327; <cite>a</cite> &#30340;&#20056;&#27861;&#35760;&#20316; <cite>a &#8226; v</cite>&#12290;&#19979;&#38754;&#31034;&#20363;&#21015;&#20030;&#20102;&#35813;&#25805;&#20316;&#19982;&#21152;&#27861;&#20043;&#38388;&#30340;&#33509;&#24178;&#20195;&#25968;&#35268;&#21017;&#12290;&#24403;&#28982;&#65292;<cite>simp</cite> &#25110; <cite>apply?</cite> &#31574;&#30053;&#21487;&#20197;&#33258;&#21160;&#25214;&#21040;&#36825;&#20123;&#35777;&#26126;&#12290;&#36824;&#26377;&#19968;&#20010; <cite>module</cite> &#31574;&#30053;&#65292;&#31867;&#20284;&#20110;&#22312;&#20132;&#25442;&#29615;&#20013;&#20351;&#29992; <cite>ring</cite> &#31574;&#30053;&#12289;&#22312;&#32676;&#20013;&#20351;&#29992; <cite>group</cite> &#31574;&#30053;&#65292;&#21487;&#20197;&#26681;&#25454;&#21521;&#37327;&#31354;&#38388;&#21644;&#22495;&#30340;&#20844;&#29702;&#33258;&#21160;&#35299;&#20915;&#30456;&#20851;&#30446;&#26631;&#12290;&#20294;&#38656;&#35201;&#35760;&#20303;&#30340;&#26159;&#65292;&#22312;&#24341;&#29702;&#21517;&#31216;&#20013;&#65292;&#26631;&#37327;&#20056;&#27861;&#36890;&#24120;&#32553;&#20889;&#20026; <cite>smul</cite>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">smul_add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">v</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">add_smul</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">u</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">smul_comm</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">u</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#23545;&#26356;&#39640;&#32423;&#35835;&#32773;&#30340;&#31616;&#35201;&#25552;&#31034;&#65292;&#27491;&#22914;&#26415;&#35821;&#25152;&#26263;&#31034;&#30340;&#37027;&#26679;&#65292;Mathlib &#30340;&#32447;&#24615;&#20195;&#25968;&#19981;&#20165;&#28085;&#30422;&#20102;&#23450;&#20041;&#22312;&#65288;&#19981;&#19968;&#23450;&#26159;&#20132;&#25442;&#65289;&#29615;&#19978;&#30340;&#27169;&#65288;modules&#65289;&#12290;&#20107;&#23454;&#19978;&#65292;&#23427;&#29978;&#33267;&#28085;&#30422;&#20102;&#21322;&#29615;&#19978;&#30340;&#21322;&#27169;&#65288;semi-modules&#65289;&#12290;&#22914;&#26524;&#20320;&#35748;&#20026;&#19981;&#38656;&#35201;&#22914;&#27492;&#24191;&#27867;&#30340;&#27867;&#21270;&#65292;&#21487;&#20197;&#24605;&#32771;&#19979;&#38754;&#36825;&#20010;&#20363;&#23376;&#65292;&#23427;&#24456;&#22909;&#22320;&#20307;&#29616;&#20102;&#29702;&#24819;&#23545;&#23376;&#27169;&#20316;&#29992;&#30340;&#35768;&#22810;&#20195;&#25968;&#35268;&#21017;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">R</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">CommSemiring</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommMonoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Module</span><span class="w"> </span><span class="o">(</span><span class="n">Ideal</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">Submodule</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">inferInstance</span>
</pre></div>
</div>
</section>
<section id="id4">
<h3><span class="section-number">10.1.2. </span>&#32447;&#24615;&#26144;&#23556;<a class="headerlink" href="#id4" title="Link to this heading">&#61633;</a></h3>
<p id="index-1">&#25509;&#19979;&#26469;&#25105;&#20204;&#38656;&#35201;&#24341;&#20837;&#32447;&#24615;&#26144;&#23556;&#12290;&#31867;&#20284;&#20110;&#32676;&#21516;&#24577;&#65292;Mathlib &#20013;&#30340;&#32447;&#24615;&#26144;&#23556;&#26159;&#8220;&#25171;&#21253;&#8221;&#30340;&#26144;&#23556;&#65292;&#21363;&#30001;&#19968;&#20010;&#26144;&#23556;&#21644;&#20854;&#32447;&#24615;&#24615;&#36136;&#35777;&#26126;&#32452;&#25104;&#30340;&#25972;&#20307;&#12290;&#36825;&#20123;&#25171;&#21253;&#26144;&#23556;&#22312;&#24212;&#29992;&#26102;&#20250;&#33258;&#21160;&#36716;&#25442;&#20026;&#26222;&#36890;&#20989;&#25968;&#12290;&#20851;&#20110;&#36825;&#19968;&#35774;&#35745;&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265; <a class="reference internal" href="C08_Hierarchies.html#hierarchies"><span class="std std-numref">Chapter 8</span></a>&#12290;</p>
<p>&#20004;&#20010;&#22495; <code class="docutils literal notranslate"><span class="pre">K</span></code> &#19978;&#30340;&#21521;&#37327;&#31354;&#38388; <code class="docutils literal notranslate"><span class="pre">V</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">W</span></code> &#20043;&#38388;&#30340;&#32447;&#24615;&#26144;&#23556;&#31867;&#22411;&#35760;&#20316; <code class="docutils literal notranslate"><span class="pre">V</span> <span class="pre">&#8594;&#8343;[K]</span> <span class="pre">W</span></code> &#65292;&#20854;&#20013;&#19979;&#26631;&#30340; <cite>l</cite> &#34920;&#31034;&#8220;linear&#8221;&#65288;&#32447;&#24615;&#65289;&#12290;&#19968;&#24320;&#22987;&#22312;&#31526;&#21495;&#20013;&#26174;&#24335;&#25351;&#23450; <code class="docutils literal notranslate"><span class="pre">K</span></code> &#21487;&#33021;&#24863;&#35273;&#26377;&#20123;&#22855;&#24618;&#65292;&#20294;&#24403;&#28041;&#21450;&#22810;&#20010;&#22495;&#26102;&#65292;&#36825;&#19968;&#28857;&#23588;&#20026;&#37325;&#35201;&#12290;&#20363;&#22914;&#65292;&#20174;&#22797;&#25968;&#22495; <span class="math notranslate nohighlight">\(&#8450;\)</span> &#21040; <span class="math notranslate nohighlight">\(&#8450;\)</span> &#30340;&#23454;&#32447;&#24615;&#26144;&#23556;&#24418;&#24335;&#20026; <span class="math notranslate nohighlight">\(z &#8614; az + b\bar{z}\)</span> &#65292;&#32780;&#22797;&#32447;&#24615;&#26144;&#23556;&#21017;&#20165;&#38480;&#20110;&#24418;&#24335;&#20026; <span class="math notranslate nohighlight">\(z &#8614; az\)</span> &#30340;&#26144;&#23556;&#65292;&#36825;&#19968;&#21306;&#21035;&#22312;&#22797;&#20998;&#26512;&#20013;&#26497;&#20026;&#20851;&#38190;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">W</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">]</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">map_smul</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">v</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">w</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">map_add</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">w</span>
</pre></div>
</div>
<p>&#27880;&#24847;&#65292;<cite>V &#8594;&#8343;[K] W</cite> &#26412;&#36523;&#20063;&#25658;&#24102;&#20102;&#20016;&#23500;&#30340;&#20195;&#25968;&#32467;&#26500;&#65288;&#36825;&#20063;&#26159;&#23558;&#36825;&#20123;&#26144;&#23556;&#25171;&#21253;&#30340;&#21160;&#26426;&#20043;&#19968;&#65289;&#12290;
&#23427;&#26159;&#19968;&#20010; <cite>K</cite>-&#21521;&#37327;&#31354;&#38388;&#65292;&#22240;&#27492;&#25105;&#20204;&#21487;&#20197;&#23545;&#32447;&#24615;&#26144;&#23556;&#36827;&#34892;&#21152;&#27861;&#36816;&#31639;&#65292;&#20063;&#21487;&#20197;&#23545;&#23427;&#20204;&#36827;&#34892;&#26631;&#37327;&#20056;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>
</pre></div>
</div>
<p>&#20351;&#29992;&#25171;&#21253;&#26144;&#23556;&#30340;&#19968;&#20010;&#32570;&#28857;&#26159;&#65292;&#26080;&#27861;&#30452;&#25509;&#20351;&#29992;&#26222;&#36890;&#20989;&#25968;&#30340;&#32452;&#21512;&#36816;&#31639;&#12290;
&#25105;&#20204;&#38656;&#35201;&#20351;&#29992;&#19987;&#38376;&#30340;&#32452;&#21512;&#20989;&#25968; <cite>LinearMap.comp</cite>&#65292;&#25110;&#32773;&#20351;&#29992;&#19987;&#29992;&#31526;&#21495; <cite>&#8728;&#8343;</cite> &#26469;&#34920;&#31034;&#32447;&#24615;&#26144;&#23556;&#30340;&#32452;&#21512;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">&#952;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;.comp</span><span class="w"> </span><span class="n">&#952;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="n">&#952;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>
</pre></div>
</div>
<p>&#26500;&#36896;&#32447;&#24615;&#26144;&#23556;&#20027;&#35201;&#26377;&#20004;&#31181;&#26041;&#24335;&#12290;&#31532;&#19968;&#31181;&#26159;&#36890;&#36807;&#25552;&#20379;&#20989;&#25968;&#26412;&#20307;&#21644;&#32447;&#24615;&#24615;&#36136;&#30340;&#35777;&#26126;&#26469;&#26500;&#24314;&#35813;&#32467;&#26500;&#12290;
&#36890;&#24120;&#65292;&#21487;&#20197;&#20511;&#21161;&#20195;&#30721;&#25805;&#20316;&#24555;&#36895;&#23436;&#25104;&#65306;&#20320;&#21482;&#38656;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">example</span> <span class="pre">:</span> <span class="pre">V</span> <span class="pre">&#8594;&#8343;[K]</span> <span class="pre">V</span> <span class="pre">:=</span> <span class="pre">_</span></code> &#28982;&#21518;&#23545;&#19979;&#21010;&#32447;&#20351;&#29992;&#8220;&#29983;&#25104;&#39592;&#26550;&#8221;&#65288;Generate a skeleton&#65289;&#20195;&#30721;&#25805;&#20316;&#65292;&#21363;&#21487;&#33258;&#21160;&#29983;&#25104;&#25152;&#38656;&#30340;&#32467;&#26500;&#26694;&#26550;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">v</span>
<span class="w">  </span><span class="n">map_add&#39;</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">smul_add</span><span class="w"> </span><span class="bp">..</span>
<span class="w">  </span><span class="n">map_smul&#39;</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">smul_comm</span><span class="w"> </span><span class="bp">..</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#33021;&#20250;&#22909;&#22855;&#20026;&#20160;&#20040; <cite>LinearMap</cite> &#32467;&#26500;&#20013;&#29992;&#20110;&#35777;&#26126;&#30340;&#23383;&#27573;&#21517;&#31216;&#37117;&#24102;&#26377;&#25735;&#21495;&#12290;&#36825;&#26159;&#22240;&#20026;&#36825;&#20123;&#35777;&#26126;&#26159;&#22312;&#20989;&#25968;&#24378;&#21046;&#36716;&#25442;&#65288;coercion&#65289;&#20043;&#21069;&#23450;&#20041;&#30340;&#65292;&#22240;&#27492;&#23427;&#20204;&#26159;&#22522;&#20110; <cite>LinearMap.toFun</cite> &#34920;&#36798;&#30340;&#12290;&#38543;&#21518;&#65292;&#23427;&#20204;&#21448;&#34987;&#37325;&#26032;&#34920;&#36798;&#20026;&#22522;&#20110;&#20989;&#25968;&#24378;&#21046;&#36716;&#25442;&#30340; <cite>LinearMap.map_add</cite> &#21644; <cite>LinearMap.map_smul</cite>&#12290;&#20107;&#24773;&#36824;&#27809;&#32467;&#26463;&#12290;&#25105;&#20204;&#36824;&#38656;&#35201;&#19968;&#20010;&#36866;&#29992;&#20110;&#20219;&#24847;&#20445;&#25345;&#21152;&#27861;&#30340;&#65288;&#25171;&#21253;&#65289;&#26144;&#23556;&#30340; <cite>map_add</cite> &#29256;&#26412;&#65292;&#27604;&#22914;&#21152;&#27861;&#32676;&#21516;&#24577;&#12289;&#32447;&#24615;&#26144;&#23556;&#12289;&#36830;&#32493;&#32447;&#24615;&#26144;&#23556;&#12289;<cite>K</cite>-&#20195;&#25968;&#26144;&#23556;&#31561;&#12290;&#36825;&#20010;&#29256;&#26412;&#26159;&#23450;&#20041;&#22312;&#26681;&#21629;&#21517;&#31354;&#38388;&#30340; <cite>map_add</cite>&#12290;&#32780;&#20013;&#38388;&#29256;&#26412; <cite>LinearMap.map_add</cite> &#34429;&#26377;&#20123;&#20887;&#20313;&#65292;&#20294;&#25903;&#25345;&#28857;&#35760;&#27861;&#65288;dot notation&#65289;&#65292;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#20351;&#29992;&#36215;&#26469;&#26356;&#26041;&#20415;&#12290;<cite>map_smul</cite> &#20063;&#26377;&#31867;&#20284;&#24773;&#20917;&#12290;&#25972;&#20307;&#26694;&#26550;&#35831;&#21442;&#35265; <a class="reference internal" href="C08_Hierarchies.html#hierarchies"><span class="std std-numref">Chapter 8</span></a> &#30340;&#35814;&#32454;&#35299;&#37322;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;.map_add&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">,</span><span class="w"> </span><span class="n">&#966;.toFun</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;.toFun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">&#966;.toFun</span><span class="w"> </span><span class="n">y</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;.map_add</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">,</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">y</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">map_add</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">,</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">y</span><span class="o">)</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20063;&#21487;&#20197;&#21033;&#29992; Mathlib &#20013;&#24050;&#26377;&#30340;&#32447;&#24615;&#26144;&#23556;&#65292;&#36890;&#36807;&#21508;&#31181;&#32452;&#21512;&#23376;&#65288;combinators&#65289;&#26469;&#26500;&#36896;&#26032;&#30340;&#32447;&#24615;&#26144;&#23556;&#12290;
&#20363;&#22914;&#65292;&#19978;&#36848;&#20363;&#23376;&#24050;&#32463;&#22312; Mathlib &#20013;&#20197; <cite>LinearMap.lsmul K V 3</cite> &#30340;&#24418;&#24335;&#23384;&#22312;&#12290;&#36825;&#37324; <cite>K</cite> &#21644; <cite>V</cite> &#26159;&#26174;&#24335;&#21442;&#25968;&#65292;&#21407;&#22240;&#26377;&#20960;&#20010;&#65306;&#26368;&#20027;&#35201;&#30340;&#26159;&#65292;&#22914;&#26524;&#21482;&#20889; <cite>LinearMap.lsmul 3</cite>&#65292;Lean &#26080;&#27861;&#25512;&#26029;&#20986; <cite>V</cite>&#65292;&#29978;&#33267;&#26080;&#27861;&#25512;&#26029;&#20986; <cite>K</cite>&#12290;&#27492;&#22806;&#65292;<cite>LinearMap.lsmul K V</cite> &#26412;&#36523;&#20063;&#26159;&#19968;&#20010;&#26377;&#36259;&#30340;&#23545;&#35937;&#65306;&#23427;&#30340;&#31867;&#22411;&#26159; <code class="docutils literal notranslate"><span class="pre">K</span> <span class="pre">&#8594;&#8343;[K]</span> <span class="pre">V</span> <span class="pre">&#8594;&#8343;[K]</span> <span class="pre">V</span></code> &#65292;&#24847;&#21619;&#30528;&#23427;&#26159;&#19968;&#20010;&#20174;&#22495; <cite>K`&#65288;&#35270;&#20026;&#20854;&#33258;&#36523;&#19978;&#30340;&#21521;&#37327;&#31354;&#38388;&#65289;&#21040;&#20174; `V</cite> &#21040; <cite>V</cite> &#30340; <cite>K</cite>-&#32447;&#24615;&#26144;&#23556;&#31354;&#38388;&#30340;&#32447;&#24615;&#26144;&#23556;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">LinearMap.lsmul</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">LinearMap.lsmul</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>
</pre></div>
</div>
<p>&#36824;&#26377;&#19968;&#20010;&#32447;&#24615;&#21516;&#26500;&#31867;&#22411; <cite>LinearEquiv</cite>&#65292;&#29992;&#31526;&#21495;&#34920;&#31034;&#20026; <code class="docutils literal notranslate"><span class="pre">V</span> <span class="pre">&#8771;&#8343;[K]</span> <span class="pre">W</span></code> &#65292;&#23545;&#20110; <cite>f : V &#8771;&#8343;[K] W</cite>&#65292;&#23427;&#30340;&#36870;&#26144;&#23556;&#26159; <code class="docutils literal notranslate"><span class="pre">f.symm</span> <span class="pre">:</span> <span class="pre">W</span> <span class="pre">&#8771;&#8343;[K]</span> <span class="pre">V</span></code> &#12290;&#20004;&#20010;&#32447;&#24615;&#21516;&#26500; <cite>f</cite> &#21644; <cite>g</cite> &#30340;&#22797;&#21512;&#26159; <code class="docutils literal notranslate"><span class="pre">f.trans</span> <span class="pre">g</span></code> &#65292;&#20063;&#21487;&#29992;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">&#8810;&#8811;&#8343;</span> <span class="pre">g</span></code> &#34920;&#31034;&#12290;<cite>V</cite> &#30340;&#24658;&#31561;&#21516;&#26500;&#26159; <code class="docutils literal notranslate"><span class="pre">LinearEquiv.refl</span> <span class="pre">K</span> <span class="pre">V</span></code> &#65292;&#35813;&#31867;&#22411;&#30340;&#20803;&#32032;&#22312;&#38656;&#35201;&#26102;&#20250;&#33258;&#21160;&#24378;&#21046;&#36716;&#25442;&#20026;&#23545;&#24212;&#30340;&#21516;&#24577;&#26144;&#23556;&#25110;&#20989;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8810;&#8811;&#8343;</span><span class="w"> </span><span class="n">f.symm</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">LinearEquiv.refl</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">f.self_trans_symm</span>
</pre></div>
</div>
<p>&#21487;&#20197;&#20351;&#29992; <cite>LinearEquiv.ofBijective</cite> &#20174;&#19968;&#20010;&#21452;&#23556;&#30340;&#21516;&#24577;&#26500;&#36896;&#32447;&#24615;&#21516;&#26500;&#12290;&#36825;&#26679;&#26500;&#36896;&#30340;&#36870;&#26144;&#23556;&#20989;&#25968;&#26159;&#19981;&#21487;&#35745;&#31639;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Function.Bijective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="bp">.</span><span class="n">ofBijective</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#22312;&#19978;&#36848;&#20363;&#23376;&#20013;&#65292;Lean &#21033;&#29992;&#22768;&#26126;&#30340;&#31867;&#22411;&#33258;&#21160;&#35782;&#21035; <cite>.ofBijective</cite> &#26159;&#25351; <cite>LinearEquiv.ofBijective</cite>&#65292;&#26080;&#38656;&#26174;&#24335;&#25171;&#24320;&#21629;&#21517;&#31354;&#38388;&#12290;</p>
</section>
<section id="id5">
<h3><span class="section-number">10.1.3. </span>&#21521;&#37327;&#31354;&#38388;&#30340;&#30452;&#21644;&#19982;&#30452;&#31215;<a class="headerlink" href="#id5" title="Link to this heading">&#61633;</a></h3>
<p>&#25105;&#20204;&#21487;&#20197;&#21033;&#29992;&#24050;&#26377;&#30340;&#21521;&#37327;&#31354;&#38388;&#65292;&#36890;&#36807;&#30452;&#21644;&#21644;&#30452;&#31215;&#26500;&#36896;&#26032;&#30340;&#21521;&#37327;&#31354;&#38388;&#12290;&#20174;&#20004;&#20010;&#21521;&#37327;&#31354;&#38388;&#24320;&#22987;&#65292;&#22312;&#35813;&#24773;&#24418;&#19979;&#30452;&#21644;&#19982;&#30452;&#31215;&#26080;&#21306;&#21035;&#65292;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#31215;&#31867;&#22411;&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#29255;&#27573;&#23637;&#31034;&#20102;&#22914;&#20309;&#23558;&#25152;&#26377;&#32467;&#26500;&#26144;&#23556;&#65288;&#21547;&#20837;&#65288;inclusion&#65289;&#26144;&#23556;&#21644;&#25237;&#24433;&#26144;&#23556;&#65289;&#26500;&#36896;&#20026;&#32447;&#24615;&#26144;&#23556;&#65292;&#20197;&#21450;&#26500;&#36896;&#26144;&#23556;&#21040;&#31215;&#31354;&#38388;&#21644;&#20174;&#21644;&#31354;&#38388;&#20986;&#30340;&#19975;&#26377;&#24615;&#36136;&#65288;universal properties&#65289;&#12290;&#22914;&#26524;&#20320;&#23545;&#33539;&#30068;&#35770;&#20013;&#21644;&#19982;&#31215;&#30340;&#21306;&#21035;&#19981;&#29087;&#24713;&#65292;&#21487;&#20197;&#24573;&#30053;&#8220;&#19975;&#26377;&#24615;&#36136;&#8221;&#30456;&#20851;&#26415;&#35821;&#65292;&#19987;&#27880;&#20110;&#31034;&#20363;&#20013;&#30340;&#31867;&#22411;&#21363;&#21487;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span><span class="w"> </span><span class="n">binary_product</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">W</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">]</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">U</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">U</span><span class="o">]</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">T</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">T</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">T</span><span class="o">]</span>

<span class="c1">-- &#31532;&#19968;&#25237;&#24433;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.fst</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span>

<span class="c1">-- &#31532;&#20108;&#25237;&#24433;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.snd</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span>

<span class="c1">-- &#30452;&#31215;&#30340;&#19975;&#26377;&#24615;&#36136;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w">  </span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.prod</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span>

<span class="c1">-- &#30452;&#31215;&#26144;&#23556;&#28385;&#36275;&#39044;&#26399;&#34892;&#20026;&#65292;&#31532;&#19968;&#20998;&#37327;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LinearMap.fst</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="n">LinearMap.prod</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="c1">-- &#30452;&#31215;&#26144;&#23556;&#28385;&#36275;&#39044;&#26399;&#34892;&#20026;&#65292;&#31532;&#20108;&#20998;&#37327;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LinearMap.snd</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="n">LinearMap.prod</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="c1">-- &#25105;&#20204;&#20063;&#21487;&#20197;&#24182;&#34892;&#32452;&#21512;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">T</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">T</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">&#966;.prodMap</span><span class="w"> </span><span class="n">&#968;</span>

<span class="c1">-- &#36825;&#21482;&#26159;&#36890;&#36807;&#23558;&#25237;&#24433;&#19982;&#19975;&#26377;&#24615;&#36136;&#32467;&#21512;&#23454;&#29616;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">T</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">&#966;.prodMap</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="bp">.</span><span class="n">fst</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="bp">.</span><span class="n">snd</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="c1">-- &#31532;&#19968;&#21253;&#21547;&#65288;inclusion&#65289;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.inl</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span>

<span class="c1">-- &#31532;&#20108;&#21547;&#20837;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.inr</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span>

<span class="c1">-- &#30452;&#21644;&#65288;&#21448;&#31216;&#20313;&#31215;&#65289;&#30340;&#19975;&#26377;&#24615;&#36136;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">&#966;.coprod</span><span class="w"> </span><span class="n">&#968;</span>

<span class="c1">-- &#20313;&#31215;&#26144;&#23556;&#28385;&#36275;&#39044;&#26399;&#34892;&#20026;&#65292;&#31532;&#19968;&#20998;&#37327;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.coprod</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="n">LinearMap.inl</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">LinearMap.coprod_inl</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span>

<span class="c1">-- &#20313;&#31215;&#26144;&#23556;&#28385;&#36275;&#39044;&#26399;&#34892;&#20026;&#65292;&#31532;&#20108;&#20998;&#37327;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.coprod</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="n">LinearMap.inr</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">LinearMap.coprod_inr</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span>

<span class="c1">-- &#20313;&#31215;&#26144;&#23556;&#30340;&#23450;&#20041;&#31526;&#21512;&#39044;&#26399;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">w</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">&#966;.coprod</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">end</span><span class="w"> </span><span class="n">binary_product</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#25105;&#20204;&#36716;&#21521;&#20219;&#24847;&#26063;&#21521;&#37327;&#31354;&#38388;&#30340;&#30452;&#21644;&#19982;&#30452;&#31215;&#12290;&#36825;&#37324;&#25105;&#20204;&#23558;&#23637;&#31034;&#22914;&#20309;&#23450;&#20041;&#19968;&#20010;&#21521;&#37327;&#31354;&#38388;&#26063;&#65292;&#24182;&#35775;&#38382;&#30452;&#21644;&#19982;&#30452;&#31215;&#30340;&#19975;&#26377;&#24615;&#36136;&#12290;&#35831;&#27880;&#24847;&#65292;&#30452;&#21644;&#31526;&#21495;&#38480;&#23450;&#22312; <cite>DirectSum</cite> &#21629;&#21517;&#31354;&#38388;&#20013;&#65292;&#19988;&#30452;&#21644;&#30340;&#19975;&#26377;&#24615;&#36136;&#35201;&#27714;&#32034;&#24341;&#31867;&#22411;&#20855;&#22791;&#21487;&#21028;&#23450;&#31561;&#20215;&#24615;&#65288;&#36825;&#22312;&#26576;&#31181;&#31243;&#24230;&#19978;&#26159;&#23454;&#29616;&#19978;&#30340;&#20598;&#28982;&#24773;&#20917;&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span><span class="w"> </span><span class="n">families</span>
<span class="kn">open</span><span class="w"> </span><span class="n">DirectSum</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span>
<span class="w">         </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">AddCommGroup</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)]</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)]</span>

<span class="c1">-- &#30452;&#21644;&#30340;&#19975;&#26377;&#24615;&#36136;&#23558;&#20174;&#21508;&#20010;&#30452;&#21644;&#22240;&#23376;&#26144;&#23556;&#20986;&#30340;&#26144;&#23556;&#32452;&#35013;&#25104;&#20174;&#30452;&#21644;&#26144;&#23556;&#20986;&#30340;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#10753;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">DirectSum.toModule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="n">&#966;</span>

<span class="c1">-- &#30452;&#31215;&#30340;&#19975;&#26377;&#24615;&#36136;&#23558;&#26144;&#23556;&#21040;&#21508;&#20010;&#22240;&#23376;&#30340;&#26144;&#23556;&#32452;&#35013;&#25104;&#26144;&#23556;&#21040;&#30452;&#31215;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="bp">&#928;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">LinearMap.pi</span><span class="w"> </span><span class="n">&#966;</span>

<span class="c1">--&#8239;&#26469;&#33258;&#30452;&#31215;&#30340;&#25237;&#24433;&#26144;&#23556;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#928;</span><span class="w"> </span><span class="n">j</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">j</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.proj</span><span class="w"> </span><span class="n">i</span>

<span class="c1">-- &#21547;&#20837;&#26144;&#23556;&#21040;&#30452;&#21644;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="bp">&#10753;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">DirectSum.lof</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span>

<span class="c1">-- &#21547;&#20837;&#26144;&#23556;&#21040;&#30452;&#31215;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="bp">&#928;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.single</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span>

<span class="c1">-- &#33509; `&#953;` &#26159;&#26377;&#38480;&#31867;&#22411;&#65292;&#30452;&#21644;&#19982;&#30452;&#31215;&#20043;&#38388;&#23384;&#22312;&#32447;&#24615;&#21516;&#26500;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#10753;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="bp">&#928;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">linearEquivFunOnFintype</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">V</span>

<span class="kd">end</span><span class="w"> </span><span class="n">families</span>
</pre></div>
</div>
</section>
</section>
<section id="index-2">
<span id="id6"></span><h2><span class="section-number">10.2. </span>&#23376;&#31354;&#38388;&#21644;&#21830;&#31354;&#38388;<a class="headerlink" href="#index-2" title="Link to this heading">&#61633;</a></h2>
<section id="id7">
<h3><span class="section-number">10.2.1. </span>&#23376;&#31354;&#38388;<a class="headerlink" href="#id7" title="Link to this heading">&#61633;</a></h3>
<p>&#27491;&#22914;&#32447;&#24615;&#26144;&#23556;&#26159;&#25171;&#21253;&#32467;&#26500;&#65292;&#21521;&#37327;&#31354;&#38388; <cite>V</cite> &#30340;&#32447;&#24615;&#23376;&#31354;&#38388;&#21516;&#26679;&#26159;&#19968;&#20010;&#25171;&#21253;&#32467;&#26500;&#65292;&#21253;&#21547; <cite>V</cite> &#20013;&#30340;&#19968;&#20010;&#23376;&#38598;&#65292;&#31216;&#20026;&#23376;&#31354;&#38388;&#30340;&#36733;&#20307;&#65288;carrier&#65289;&#65292;&#24182;&#20855;&#22791;&#30456;&#20851;&#30340;&#38381;&#21512;&#24615;&#36136;&#12290;&#36825;&#37324;&#20381;&#28982;&#20351;&#29992;&#8220;&#27169;&#65288;module&#65289;&#8221;&#19968;&#35789;&#65292;&#32780;&#38750;&#21521;&#37327;&#31354;&#38388;&#65292;&#26159;&#22240;&#20026; Mathlib &#22312;&#32447;&#24615;&#20195;&#25968;&#20013;&#37319;&#29992;&#20102;&#26356;&#24191;&#27867;&#30340;&#29702;&#35770;&#26694;&#26550;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">K</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Field</span><span class="w"> </span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hx</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hy</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">U.add_mem</span><span class="w"> </span><span class="n">hx</span><span class="w"> </span><span class="n">hy</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hx</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">U.smul_mem</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">hx</span>
</pre></div>
</div>
<p>&#22312;&#19978;&#36848;&#20363;&#23376;&#20013;&#65292;&#38656;&#35201;&#29702;&#35299;&#30340;&#26159;&#65292;<cite>Submodule K V</cite> &#34920;&#31034; <cite>V</cite> &#19978;&#30340; <cite>K</cite>-&#32447;&#24615;&#23376;&#31354;&#38388;&#30340;&#31867;&#22411;&#65292;&#32780;&#38750; <cite>Set V</cite> &#20013;&#20803;&#32032; <cite>U</cite> &#30340;&#35859;&#35789; <cite>IsSubmodule U</cite>&#12290;<cite>Submodule K V</cite> &#37197;&#22791;&#20102;&#21040; <cite>Set V</cite> &#30340;&#24378;&#21046;&#31867;&#22411;&#36716;&#25442;&#65288;coercion&#65289;&#20197;&#21450;&#23545; <cite>V</cite> &#30340;&#25104;&#21592;&#20851;&#31995;&#35859;&#35789;&#12290;&#26377;&#20851;&#35813;&#35774;&#35745;&#30340;&#21407;&#22240;&#21450;&#23454;&#29616;&#26041;&#24335;&#65292;&#21487;&#21442;&#35265; <a class="reference internal" href="C08_Hierarchies.html#section-hierarchies-subobjects"><span class="std std-numref">Section 8.3</span></a>&#12290;</p>
<p>&#24403;&#28982;&#65292;&#20004;&#20010;&#23376;&#31354;&#38388;&#30456;&#31561;&#24403;&#19988;&#20165;&#24403;&#23427;&#20204;&#21253;&#21547;&#30456;&#21516;&#30340;&#20803;&#32032;&#12290;&#27492;&#24615;&#36136;&#24050;&#34987;&#27880;&#20876;&#29992;&#20110; <cite>ext</cite> &#31574;&#30053;&#65292;&#21518;&#32773;&#21487;&#29992;&#26469;&#35777;&#26126;&#20004;&#20010;&#23376;&#31354;&#38388;&#30456;&#31561;&#65292;&#26041;&#24335;&#19982;&#35777;&#26126;&#20004;&#20010;&#38598;&#21512;&#30456;&#31561;&#30456;&#21516;&#12290;</p>
<p>&#20363;&#22914;&#65292;&#35201;&#34920;&#36848;&#24182;&#35777;&#26126;&#23454;&#25968;&#22495; <cite>&#8477;</cite> &#26159;&#22797;&#25968;&#22495; <cite>&#8450;</cite> &#19978;&#30340;&#19968;&#20010; <cite>&#8477;</cite>-&#32447;&#24615;&#23376;&#31354;&#38388;&#65292;&#23454;&#36136;&#19978;&#26159;&#26500;&#36896;&#19968;&#20010;&#31867;&#22411;&#20026; <cite>Submodule &#8477; &#8450;</cite> &#30340;&#39033;&#65292;&#20351;&#20854;&#24378;&#21046;&#36716;&#25442;&#20026; <cite>Set &#8450;</cite> &#21518;&#27491;&#26159; <cite>&#8477;</cite>&#65292;&#25110;&#32773;&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#26159; <cite>&#8477;</cite> &#22312; <cite>&#8450;</cite> &#20013;&#30340;&#20687;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">&#8450;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">carrier</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Set.range</span><span class="w"> </span><span class="o">((</span><span class="bp">&#8593;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8450;</span><span class="o">)</span>
<span class="w">  </span><span class="n">add_mem&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">rintro</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">m</span>
<span class="w">    </span><span class="n">simp</span>
<span class="w">  </span><span class="n">zero_mem&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">simp</span>
<span class="w">  </span><span class="n">smul_mem&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">rintro</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">use</span><span class="w"> </span><span class="n">c</span><span class="bp">*</span><span class="n">a</span>
<span class="w">    </span><span class="n">simp</span>
</pre></div>
</div>
<p><cite>Submodule</cite> &#20013;&#35777;&#26126;&#23383;&#27573;&#26411;&#23614;&#30340;&#25735;&#21495;&#19982; <cite>LinearMap</cite> &#20013;&#30340;&#31867;&#20284;&#12290;&#36825;&#20123;&#23383;&#27573;&#20197; <cite>carrier</cite> &#23383;&#27573;&#20026;&#22522;&#30784;&#23450;&#20041;&#65292;&#22240;&#20026;&#23427;&#20204;&#22312; <cite>Membership</cite> &#23454;&#20363;&#20043;&#21069;&#34987;&#23450;&#20041;&#12290;&#38543;&#21518;&#65292;&#23427;&#20204;&#34987;&#25105;&#20204;&#20043;&#21069;&#30475;&#21040;&#30340; <cite>Submodule.add_mem</cite>&#12289;<cite>Submodule.zero_mem</cite> &#21644; <cite>Submodule.smul_mem</cite> &#25152;&#21462;&#20195;&#12290;</p>
<p>&#20316;&#20026;&#25805;&#20316;&#23376;&#31354;&#38388;&#21644;&#32447;&#24615;&#26144;&#23556;&#30340;&#32451;&#20064;&#65292;&#20320;&#23558;&#23450;&#20041;&#32447;&#24615;&#26144;&#23556;&#19979;&#23376;&#31354;&#38388;&#30340;&#21407;&#20687;&#65288;pre-image&#65289;&#65288;&#24403;&#28982;&#65292;&#21518;&#38754;&#20250;&#30475;&#21040; Mathlib &#24050;&#32463;&#21253;&#21547;&#20102;&#30456;&#20851;&#23450;&#20041;&#65289;&#12290;
&#35760;&#20303;&#65292;&#21487;&#20197;&#20351;&#29992; <cite>Set.mem_preimage</cite> &#26469;&#23545;&#28041;&#21450;&#25104;&#21592;&#36164;&#26684;&#21644;&#21407;&#20687;&#30340;&#38472;&#36848;&#36827;&#34892;&#37325;&#20889;&#12290;&#38500;&#20102;&#19978;&#36848;&#20851;&#20110; <cite>LinearMap</cite> &#21644; <cite>Submodule</cite> &#30340;&#24341;&#29702;&#22806;&#65292;&#36825;&#26159;&#20320;&#21807;&#19968;&#38656;&#35201;&#29992;&#21040;&#30340;&#24341;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">preimage</span><span class="w"> </span><span class="o">{</span><span class="n">W</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">H</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">carrier</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8315;&#185;&#39;</span><span class="w"> </span><span class="n">H</span>
<span class="w">  </span><span class="n">zero_mem&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">dsimp</span>
<span class="w">    </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">add_mem&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">smul_mem&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">dsimp</span>
<span class="w">    </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#20351;&#29992;&#31867;&#22411;&#31867;&#65292;Mathlib &#30693;&#36947;&#21521;&#37327;&#31354;&#38388;&#30340;&#23376;&#31354;&#38388;&#32487;&#25215;&#20102;&#21521;&#37327;&#31354;&#38388;&#32467;&#26500;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">inferInstance</span>
</pre></div>
</div>
<p>&#36825;&#20010;&#20363;&#23376;&#24456;&#24494;&#22937;&#12290;&#23545;&#35937; <code class="docutils literal notranslate"><span class="pre">U</span></code> &#19981;&#26159;&#19968;&#20010;&#31867;&#22411;&#65292;&#20294; Lean &#20250;&#36890;&#36807;&#23558;&#20854;&#35299;&#37322;&#20026; <code class="docutils literal notranslate"><span class="pre">V</span></code> &#30340;&#19968;&#20010;&#23376;&#31867;&#22411;&#26469;&#33258;&#21160;&#23558;&#20854;&#24378;&#21046;&#36716;&#25442;&#20026;&#19968;&#20010;&#31867;&#22411;&#12290;
&#22240;&#27492;&#65292;&#19978;&#38754;&#30340;&#20363;&#23376;&#21487;&#20197;&#26356;&#26126;&#30830;&#22320;&#37325;&#36848;&#20026;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">U</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">inferInstance</span>
</pre></div>
</div>
</section>
<section id="id8">
<h3><span class="section-number">10.2.2. </span>&#23436;&#20840;&#26684;&#32467;&#26500;&#21644;&#20869;&#30452;&#21644;<a class="headerlink" href="#id8" title="Link to this heading">&#61633;</a></h3>
<p>&#25317;&#26377;&#31867;&#22411; <cite>Submodule K V</cite> &#32780;&#38750;&#35859;&#35789; <cite>IsSubmodule : Set V &#8594; Prop</cite> &#30340;&#19968;&#20010;&#37325;&#35201;&#22909;&#22788;&#26159;&#65292;&#21487;&#20197;&#26041;&#20415;&#22320;&#36171;&#20104; <cite>Submodule K V</cite> &#39069;&#22806;&#30340;&#32467;&#26500;&#12290;
&#20854;&#20013;&#26368;&#37325;&#35201;&#30340;&#26159;&#23427;&#22312;&#21253;&#21547;&#20851;&#31995;&#19979;&#20855;&#26377;&#23436;&#22791;&#26684;&#32467;&#26500;&#12290;&#20363;&#22914;&#65292;&#19981;&#20877;&#38656;&#35201;&#21333;&#29420;&#30340;&#24341;&#29702;&#26469;&#35828;&#26126;&#20004;&#20010;&#23376;&#31354;&#38388;&#30340;&#20132;&#38598;&#20173;&#26159;&#23376;&#31354;&#38388;&#65292;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#26684;&#30340;&#36816;&#31639;&#31526; <cite>&#8851;</cite> &#26469;&#26500;&#36896;&#20132;&#38598;&#12290;
&#38543;&#21518;&#20415;&#21487;&#23545;&#35813;&#32467;&#26500;&#24212;&#29992;&#20219;&#24847;&#26684;&#35770;&#30456;&#20851;&#30340;&#24341;&#29702;&#12290;</p>
<p>&#19979;&#38754;&#25105;&#20204;&#39564;&#35777;&#65292;&#20004;&#20010;&#23376;&#31354;&#38388;&#19979;&#30830;&#30028;&#23545;&#24212;&#30340;&#24213;&#23618;&#38598;&#21512;&#65292;&#27491;&#26159;&#23427;&#20204;&#30340;&#65288;&#23450;&#20041;&#19978;&#30340;&#65289;&#20132;&#38598;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">H</span><span class="w"> </span><span class="n">H&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">((</span><span class="n">H</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">H&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">H</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">H&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#23545;&#24213;&#23618;&#38598;&#21512;&#30340;&#20132;&#38598;&#20351;&#29992;&#19981;&#21516;&#31526;&#21495;&#34920;&#31034;&#21487;&#33021;&#30475;&#36215;&#26469;&#26377;&#20123;&#22855;&#24618;&#65292;&#20294;&#36825;&#31181;&#23545;&#24212;&#20851;&#31995;&#24182;&#19981;&#36866;&#29992;&#20110;&#19978;&#30830;&#30028;&#36816;&#31639;&#21644;&#38598;&#21512;&#30340;&#24182;&#38598;&#65292;&#22240;&#20026;&#23376;&#31354;&#38388;&#30340;&#24182;&#38598;&#36890;&#24120;&#24182;&#19981;&#26159;&#23376;&#31354;&#38388;&#12290;
&#21462;&#32780;&#20195;&#20043;&#30340;&#26159;&#65292;&#38656;&#35201;&#20351;&#29992;&#30001;&#24182;&#38598;&#29983;&#25104;&#30340;&#23376;&#31354;&#38388;&#65292;&#36825;&#36890;&#24120;&#36890;&#36807; <cite>Submodule.span</cite> &#26469;&#23454;&#29616;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">H</span><span class="w"> </span><span class="n">H&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">((</span><span class="n">H</span><span class="w"> </span><span class="bp">&#8852;</span><span class="w"> </span><span class="n">H&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Submodule.span</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">((</span><span class="n">H</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="o">(</span><span class="n">H&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">))</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">Submodule.span_union</span><span class="o">]</span>
</pre></div>
</div>
<p>&#21478;&#19968;&#20010;&#32454;&#33410;&#26159;&#65292;&#21521;&#37327;&#31354;&#38388;&#26412;&#36523; <cite>V</cite> &#24182;&#19981;&#23646;&#20110;&#31867;&#22411; <cite>Submodule K V</cite>&#65292;&#22240;&#27492;&#38656;&#35201;&#19968;&#31181;&#26041;&#24335;&#26469;&#34920;&#31034;&#23558; <cite>V</cite> &#35270;&#20026;&#33258;&#36523;&#30340;&#23376;&#31354;&#38388;&#12290;&#36825;&#20063;&#30001;&#26684;&#32467;&#26500;&#25552;&#20379;&#25903;&#25345;&#65306;&#25972;&#20010;&#31354;&#38388;&#20316;&#20026;&#35813;&#26684;&#30340;&#26368;&#22823;&#20803;&#23384;&#22312;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8868;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">trivial</span>
</pre></div>
</div>
<p>&#21516;&#26679;&#65292;&#36825;&#20010;&#26684;&#30340;&#24213;&#37096;&#20803;&#32032;&#26159;&#21807;&#19968;&#20803;&#32032;&#20026;&#38646;&#20803;&#32032;&#30340;&#23376;&#31354;&#38388;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submodule.mem_bot</span><span class="w"> </span><span class="n">K</span>
</pre></div>
</div>
<p>&#29305;&#21035;&#22320;&#65292;&#25105;&#20204;&#21487;&#20197;&#35752;&#35770;&#22788;&#20110;&#65288;&#20869;&#37096;&#65289;&#30452;&#21644;&#30340;&#23376;&#31354;&#38388;&#30340;&#24773;&#20917;&#12290;&#22312;&#20004;&#20010;&#23376;&#31354;&#38388;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#20351;&#29992;&#36890;&#29992;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">IsCompl</span></code>&#65292;&#23427;&#36866;&#29992;&#20110;&#20219;&#20309;&#26377;&#30028;&#20559;&#24207;&#31867;&#22411;&#12290;&#22312;&#19968;&#33324;&#23376;&#31354;&#38388;&#26063;&#30340;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">DirectSum.IsInternal</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="c1">-- &#22914;&#26524;&#20004;&#20010;&#23376;&#31354;&#38388;&#26159;&#30452;&#21644;&#65292;&#21017;&#23427;&#20204;&#29983;&#25104;&#25972;&#20010;&#31354;&#38388;&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IsCompl</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8852;</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8868;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h.sup_eq_top</span>

<span class="c1">-- &#22914;&#26524;&#20004;&#20010;&#23376;&#31354;&#38388;&#26159;&#30452;&#21644;&#65292;&#21017;&#23427;&#20204;&#30340;&#20132;&#38598;&#20165;&#20026;&#38646;&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IsCompl</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">U</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h.inf_eq_bot</span>

<span class="kn">section</span>
<span class="kn">open</span><span class="w"> </span><span class="n">DirectSum</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span>

<span class="c1">-- &#22914;&#26524;&#23376;&#31354;&#38388;&#26159;&#30452;&#21644;&#65292;&#21017;&#23427;&#20204;&#29983;&#25104;&#25972;&#20010;&#31354;&#38388;&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">DirectSum.IsInternal</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="bp">&#10758;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8868;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h.submodule_iSup_eq_top</span>

<span class="c1">-- &#22914;&#26524;&#23376;&#31354;&#38388;&#26159;&#30452;&#21644;&#65292;&#21017;&#23427;&#20204;&#30340;&#20132;&#38598;&#20165;&#20026;&#38646;&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">DirectSum.IsInternal</span><span class="w"> </span><span class="n">U</span><span class="o">)</span>
<span class="w">    </span><span class="o">{</span><span class="n">i</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hij</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="n">j</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">(</span><span class="n">h.submodule_independent.pairwiseDisjoint</span><span class="w"> </span><span class="n">hij</span><span class="o">)</span><span class="bp">.</span><span class="n">eq_bot</span>

<span class="c1">-- &#36825;&#20123;&#26465;&#20214;&#34920;&#24449;&#20102;&#30452;&#21644;&#12290;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">DirectSum.isInternal_submodule_iff_independent_and_iSup_eq_top</span>

<span class="c1">-- &#19982;&#22806;&#30452;&#21644;&#30340;&#20851;&#31995;&#65306;&#22914;&#26524;&#19968;&#26063;&#23376;&#31354;&#38388;&#26159;&#20869;&#30452;&#21644;&#65292;&#21017;&#23427;&#20204;&#30340;&#22806;&#30452;&#21644;&#26144;&#23556;&#21040; `V` &#30340;&#26144;&#23556;&#26159;&#32447;&#24615;&#21516;&#26500;&#12290;</span>
<span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">U</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">DirectSum.IsInternal</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#10753;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">LinearEquiv.ofBijective</span><span class="w"> </span><span class="o">(</span><span class="n">coeLinearMap</span><span class="w"> </span><span class="n">U</span><span class="o">)</span><span class="w"> </span><span class="n">h</span>
<span class="kd">end</span>
</pre></div>
</div>
</section>
<section id="id9">
<h3><span class="section-number">10.2.3. </span>&#30001;&#38598;&#21512;&#29983;&#25104;&#30340;&#23376;&#31354;&#38388;<a class="headerlink" href="#id9" title="Link to this heading">&#61633;</a></h3>
<p>&#38500;&#20102;&#20174;&#29616;&#26377;&#23376;&#31354;&#38388;&#26500;&#24314;&#23376;&#31354;&#38388;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Submodule.span</span> <span class="pre">K</span> <span class="pre">s</span></code> &#20174;&#20219;&#20309;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#26500;&#24314;&#23376;&#31354;&#38388;&#65292;&#35813;&#20989;&#25968;&#26500;&#24314;&#21253;&#21547; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#26368;&#23567;&#23376;&#31354;&#38388;&#12290;
&#22312;&#32440;&#38754;&#19978;&#65292;&#36890;&#24120;&#20351;&#29992;&#35813;&#31354;&#38388;&#30001; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#25152;&#26377;&#32447;&#24615;&#32452;&#21512;&#26500;&#25104;&#30340;&#20107;&#23454;&#12290;&#20294;&#36890;&#24120;&#26356;&#26377;&#25928;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;&#20854;&#19975;&#26377;&#24615;&#36136;&#65292;&#21363; <code class="docutils literal notranslate"><span class="pre">Submodule.span_le</span></code>&#65292;&#20197;&#21450;&#25972;&#20010; Galois &#36830;&#25509;&#29702;&#35770;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule.span</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Submodule.span_le</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaloisInsertion</span><span class="w"> </span><span class="o">(</span><span class="n">Submodule.span</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">((</span><span class="bp">&#8593;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Submodule.gi</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span>
</pre></div>
</div>
<p>&#24403;&#19978;&#36848;&#26041;&#27861;&#19981;&#22815;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;&#30456;&#20851;&#30340;&#24402;&#32435;&#21407;&#29702; <cite>Submodule.span_induction</cite>&#65292;&#23427;&#20445;&#35777;&#21482;&#35201;&#26576;&#24615;&#36136;&#23545;&#38646;&#20803;&#21644;&#38598;&#21512; <cite>s</cite> &#20013;&#30340;&#20803;&#32032;&#25104;&#31435;&#65292;&#19988;&#22312;&#21152;&#27861;&#21644;&#26631;&#37327;&#20056;&#27861;&#19979;&#23553;&#38381;&#65292;&#37027;&#20040;&#35813;&#24615;&#36136;&#23545; <cite>s</cite> &#30340;&#24352;&#25104;&#23376;&#31354;&#38388;&#20013;&#30340;&#27599;&#20010;&#20803;&#32032;&#37117;&#25104;&#31435;&#12290;</p>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#25105;&#20204;&#37325;&#26032;&#35777;&#26126; <cite>Submodule.mem_sup</cite> &#30340;&#19968;&#20010;&#25512;&#35770;&#12290;&#35760;&#20303;&#20320;&#21487;&#20197;&#20351;&#29992; <cite>module</cite> &#31574;&#30053;&#65292;&#26469;&#35299;&#20915;&#22522;&#20110; <cite>V</cite> &#19978;&#21508;&#31181;&#20195;&#25968;&#36816;&#31639;&#20844;&#29702;&#30340;&#35777;&#26126;&#30446;&#26631;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">S</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="bp">&#8852;</span><span class="w"> </span><span class="n">T</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">S</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">T</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">t</span><span class="w">  </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">S.span_eq</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">T.span_eq</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">Submodule.span_union</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">h</span>
<span class="w">  </span><span class="n">induction</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">Submodule.span_induction</span><span class="w"> </span><span class="k">with</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">hx</span><span class="w"> </span><span class="n">hy</span><span class="w"> </span><span class="n">hx&#39;</span><span class="w"> </span><span class="n">hy&#39;</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">smul</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">hx</span><span class="w"> </span><span class="n">hx&#39;</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">      </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3><span class="section-number">10.2.4. </span>&#25289;&#22238;&#21644;&#25512;&#20986;&#23376;&#31354;&#38388;<a class="headerlink" href="#id10" title="Link to this heading">&#61633;</a></h3>
<p>&#22914;&#21069;&#25152;&#36848;&#65292;&#25105;&#20204;&#29616;&#22312;&#25551;&#36848;&#22914;&#20309;&#36890;&#36807;&#32447;&#24615;&#26144;&#23556;&#26469;&#25289;&#22238;&#21644;&#25512;&#20986;&#23376;&#31354;&#38388;&#12290;
&#22312; Mathlib &#20013;&#65292;&#31532;&#19968;&#20010;&#25805;&#20316;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">map</span></code>&#65292;&#31532;&#20108;&#20010;&#25805;&#20316;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">comap</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">W</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="k">in</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">Submodule.map</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="k">in</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">Submodule.comap</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>
</pre></div>
</div>
<p>&#36825;&#20123;&#20989;&#25968;&#23450;&#20041;&#22312; <cite>Submodule</cite> &#21629;&#21517;&#31354;&#38388;&#20869;&#65292;&#22240;&#27492;&#21487;&#20197;&#20351;&#29992;&#28857;&#35760;&#27861;&#20889;&#20316; <code class="docutils literal notranslate"><span class="pre">E.map</span> <span class="pre">&#966;</span></code> &#32780;&#19981;&#26159;``Submodule.map &#966; E``&#12290;&#19981;&#36807;&#36825;&#31181;&#20889;&#27861;&#38405;&#35835;&#36215;&#26469;&#30456;&#24403;&#21035;&#25197;&#65288;&#34429;&#28982;&#26377;&#20123; Mathlib &#36129;&#29486;&#32773;&#20250;&#36825;&#26679;&#20889;&#65289;&#12290;&#29305;&#21035;&#22320;&#65292;&#32447;&#24615;&#26144;&#23556;&#30340;&#20687;&#38598;&#21644;&#26680;&#37117;&#26159;&#23376;&#31354;&#38388;&#65292;&#36825;&#20123;&#29305;&#27530;&#24773;&#20917;&#37325;&#35201;&#21040;&#26377;&#19987;&#38376;&#30340;&#22768;&#26126;&#25903;&#25345;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LinearMap.range</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">.</span><span class="n">map</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8868;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">LinearMap.range_eq_map</span><span class="w"> </span><span class="n">&#966;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LinearMap.ker</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">.</span><span class="n">comap</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submodule.comap_bot</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="c1">-- or `rfl`</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#25105;&#20204;&#19981;&#33021;&#20889;&#25104; <cite>&#966;.ker</cite> &#26469;&#26367;&#20195; <cite>LinearMap.ker &#966;</cite>&#65292;&#22240;&#20026; <cite>LinearMap.ker</cite> &#19981;&#20165;&#36866;&#29992;&#20110;&#32447;&#24615;&#26144;&#23556;&#65292;&#36824;&#36866;&#29992;&#20110;&#20445;&#25345;&#26356;&#22810;&#32467;&#26500;&#30340;&#26144;&#23556;&#31867;&#65292;&#22240;&#27492;&#23427;&#19981;&#26399;&#26395;&#25509;&#25910;&#31867;&#22411;&#20197; <cite>LinearMap</cite> &#24320;&#22836;&#30340;&#21442;&#25968;&#65292;&#25152;&#20197;&#28857;&#35760;&#27861;&#22312;&#36825;&#37324;&#26080;&#27861;&#20351;&#29992;&#12290;&#28982;&#32780;&#65292;&#22312;&#21491;&#20391;&#25105;&#20204;&#33021;&#22815;&#20351;&#29992;&#21478;&#19968;&#31181;&#28857;&#35760;&#27861;&#12290;&#22240;&#20026; Lean &#22312;&#23637;&#24320;&#24038;&#20391;&#21518;&#65292;&#26399;&#26395;&#24471;&#21040;&#31867;&#22411;&#20026; <cite>Submodule K V</cite> &#30340;&#39033;&#65292;&#22240;&#27492;&#23427;&#20250;&#23558; <cite>.comap</cite> &#35299;&#26512;&#20026; <cite>Submodule.comap</cite>&#12290;</p>
<p>&#20197;&#19979;&#24341;&#29702;&#25551;&#36848;&#20102;&#36825;&#20123;&#23376;&#27169;&#19982;&#32447;&#24615;&#26144;&#23556; <cite>&#966;</cite> &#30340;&#20851;&#38190;&#20851;&#31995;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Function</span><span class="w"> </span><span class="n">LinearMap</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Injective</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">ker_eq_bot.symm</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Surjective</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8868;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">range_eq_top.symm</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#25105;&#20204;&#26469;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">map</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">comap</span></code> &#30340; Galois &#36830;&#25509;&#24615;&#36136;&#12290;
&#21487;&#20197;&#20351;&#29992;&#20197;&#19979;&#24341;&#29702;&#65292;&#20294;&#36825;&#19981;&#26159;&#24517;&#38656;&#30340;&#65292;&#22240;&#20026;&#23427;&#20204;&#26159;&#26681;&#25454;&#23450;&#20041;&#25104;&#31435;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Submodule.mem_map_of_mem</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Submodule.mem_map</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Submodule.mem_comap</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Submodule.map</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">Submodule.comap</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3><span class="section-number">10.2.5. </span>&#21830;&#31354;&#38388;<a class="headerlink" href="#id11" title="Link to this heading">&#61633;</a></h3>
<p>&#21830;&#21521;&#37327;&#31354;&#38388;&#20351;&#29992;&#36890;&#29992;&#30340;&#21830;&#35760;&#21495;&#65288;&#36755;&#20837;&#20026; <cite>quot</cite>&#65292;&#32780;&#38750;&#26222;&#36890;&#30340; <cite>/</cite>&#65289;&#12290;&#25237;&#24433;&#21040;&#21830;&#31354;&#38388;&#30340;&#26144;&#23556;&#26159; <cite>Submodule.mkQ</cite>&#65292;&#20854;&#19975;&#26377;&#24615;&#36136;&#30001; <cite>Submodule.liftQ</cite> &#32473;&#20986;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">E</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">inferInstance</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">E.mkQ</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="n">E.mkQ</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">E.ker_mkQ</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">E.mkQ</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8868;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">E.range_mkQ</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">E.liftQ</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">h&#966;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">.</span><span class="n">comap</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">F</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">E.mapQ</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">h&#966;</span>

<span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">LinearMap.ker</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">&#966;.quotKerEquivRange</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#25105;&#20204;&#26469;&#35777;&#26126;&#21830;&#31354;&#38388;&#23376;&#31354;&#38388;&#30340;&#23545;&#24212;&#23450;&#29702;&#12290;Mathlib &#20013;&#26377;&#19968;&#20010;&#31245;&#24494;&#26356;&#31934;&#30830;&#30340;&#29256;&#26412;&#65292;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">Submodule.comapMkQRelIso</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Submodule</span>

<span class="k">#check</span><span class="w"> </span><span class="n">Submodule.map_comap_eq</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Submodule.comap_map_eq</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">E</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">invFun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">left_inv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">right_inv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>
<section id="id12">
<h2><span class="section-number">10.3. </span>&#33258;&#21516;&#24577;<a class="headerlink" href="#id12" title="Link to this heading">&#61633;</a></h2>
<p>&#32447;&#24615;&#26144;&#23556;&#20013;&#30340;&#19968;&#20010;&#37325;&#35201;&#29305;&#20363;&#26159;&#33258;&#21516;&#24577;&#65288;endomorphisms&#65289;&#65306;&#21363;&#20174;&#21521;&#37327;&#31354;&#38388;&#33258;&#36523;&#26144;&#23556;&#21040;&#33258;&#36523;&#30340;&#32447;&#24615;&#26144;&#23556;&#12290;
&#33258;&#21516;&#24577;&#29305;&#21035;&#26377;&#36259;&#65292;&#22240;&#20026;&#23427;&#20204;&#26500;&#25104;&#20102;&#19968;&#20010; <cite>K</cite>-&#20195;&#25968;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;&#20854;&#19978;&#23545;&#31995;&#25968;&#23646;&#20110; <cite>K</cite> &#30340;&#22810;&#39033;&#24335;&#36827;&#34892;&#27714;&#20540;&#65292;&#23427;&#20204;&#20063;&#21487;&#33021;&#20855;&#26377;&#29305;&#24449;&#20540;&#21644;&#29305;&#24449;&#21521;&#37327;&#12290;</p>
<p>Mathlib &#20351;&#29992;&#31616;&#31216; <code class="docutils literal notranslate"><span class="pre">Module.End</span> <span class="pre">K</span> <span class="pre">V</span> <span class="pre">:=</span> <span class="pre">V</span> <span class="pre">&#8594;&#8343;[K]</span> <span class="pre">V</span></code>&#65292;&#36825;&#22312;&#22823;&#37327;&#20351;&#29992;&#27492;&#31867;&#26144;&#23556;&#26102;&#38750;&#24120;&#26041;&#20415;&#65292;&#23588;&#20854;&#26159;&#22312;&#25171;&#24320;&#20102; <cite>Module</cite> &#21629;&#21517;&#31354;&#38388;&#21518;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">K</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Field</span><span class="w"> </span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">W</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">]</span>


<span class="kn">open</span><span class="w"> </span><span class="n">Polynomial</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">LinearMap</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">&#8728;&#8343;</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">LinearMap.mul_eq_comp</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="c1">-- `rfl` &#20063;&#21487;&#20197;</span>

<span class="c1">-- evaluating `P` on `&#966;`</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">P</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">P</span>

<span class="c1">-- evaluating `X` on `&#966;` gives back `&#966;`</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">X</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">aeval_X</span><span class="w"> </span><span class="n">&#966;</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#32467;&#21512;&#33258;&#21516;&#24577;&#12289;&#23376;&#31354;&#38388;&#21644;&#22810;&#39033;&#24335;&#30340;&#25805;&#20316;&#65292;&#35753;&#25105;&#20204;&#35777;&#26126;&#20108;&#20803;&#26680;&#24341;&#29702;&#65306;&#23545;&#20110;&#20219;&#24847;&#33258;&#21516;&#24577; <span class="math notranslate nohighlight">\(&#966;\)</span> &#21450;&#20114;&#32032;&#22810;&#39033;&#24335; <span class="math notranslate nohighlight">\(P\)</span> &#21644; <span class="math notranslate nohighlight">\(Q\)</span>&#65292;&#26377; <span class="math notranslate nohighlight">\(\ker P(&#966;) &#8853; \ker Q(&#966;) = \ker \big(PQ(&#966;)\big)\)</span>&#12290;</p>
<p>&#27880;&#24847;&#65292;<cite>IsCoprime x y</cite> &#30340;&#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">a</span> <span class="pre">b,</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">b</span> <span class="pre">*</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">1</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Submodule.eq_bot_iff</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Submodule.mem_inf</span>
<span class="k">#check</span><span class="w"> </span><span class="n">LinearMap.mem_ker</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">P</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IsCoprime</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">Q</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="o">(</span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">P</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="o">(</span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">Q</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="k">#check</span><span class="w"> </span><span class="n">Submodule.add_mem_sup</span>
<span class="k">#check</span><span class="w"> </span><span class="n">map_mul</span>
<span class="k">#check</span><span class="w"> </span><span class="n">LinearMap.mul_apply</span>
<span class="k">#check</span><span class="w"> </span><span class="n">LinearMap.ker_le_ker_comp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">P</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">[</span><span class="n">X</span><span class="o">])</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IsCoprime</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="n">Q</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">ker</span><span class="w"> </span><span class="o">(</span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">P</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8852;</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="o">(</span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">Q</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">ker</span><span class="w"> </span><span class="o">(</span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">P</span><span class="bp">*</span><span class="n">Q</span><span class="o">))</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#36716;&#21521;&#26412;&#24449;&#31354;&#38388;&#21644;&#29305;&#24449;&#20540;&#30340;&#35752;&#35770;&#12290;&#23545;&#20110;&#33258;&#21516;&#24577; <span class="math notranslate nohighlight">\(&#966;\)</span> &#21644;&#26631;&#37327; <span class="math notranslate nohighlight">\(a\)</span> &#65292;&#19982;&#20043;&#23545;&#24212;&#30340;&#26412;&#24449;&#31354;&#38388;&#26159; <span class="math notranslate nohighlight">\(&#966; - aId\)</span> &#30340;&#26680;&#31354;&#38388;&#12290;&#26412;&#24449;&#31354;&#38388;&#23545;&#25152;&#26377; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#37117;&#26377;&#23450;&#20041;&#65292;&#20294;&#21482;&#26377;&#22312;&#26412;&#24449;&#31354;&#38388;&#38750;&#38646;&#26102;&#25165;&#26377;&#24847;&#20041;&#12290;&#28982;&#32780;&#65292;&#26412;&#24449;&#21521;&#37327;&#23450;&#20041;&#20026;&#26412;&#24449;&#31354;&#38388;&#20013;&#30340;&#38750;&#38646;&#20803;&#32032;&#12290;&#23545;&#24212;&#30340;&#35859;&#35789;&#26159; <cite>End.HasEigenvector</cite>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.eigenspace</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">LinearMap.ker</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">End.eigenspace_def</span>
</pre></div>
</div>
<p>&#28982;&#21518;&#26377;&#19968;&#20010;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">End.HasEigenvalue</span></code> &#21644;&#23545;&#24212;&#30340;&#23376;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">End.Eigenvalues</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.HasEigenvalue</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">&#966;.eigenspace</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="bp">&#8869;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Iff.rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.HasEigenvalue</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">&#966;.HasEigenvector</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">v</span><span class="w">  </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">End.HasEigenvalue.exists_hasEigenvector</span><span class="o">,</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">_</span><span class="o">,</span><span class="w"> </span><span class="n">hv</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">&#966;.hasEigenvalue_of_hasEigenvector</span><span class="w"> </span><span class="n">hv</span><span class="o">&#10217;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.Eigenvalues</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="n">&#966;.HasEigenvalue</span><span class="w"> </span><span class="n">a</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="c1">-- &#29305;&#24449;&#20540;&#26159;&#26368;&#23567;&#22810;&#39033;&#24335;&#30340;&#26681;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;.HasEigenvalue</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="o">(</span><span class="n">minpoly</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="bp">.</span><span class="n">IsRoot</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">&#966;.isRoot_of_hasEigenvalue</span>

<span class="c1">-- &#26377;&#38480;&#32500;&#24773;&#20917;&#19979;&#65292;&#21453;&#20043;&#20134;&#28982;&#65288;&#25105;&#20204;&#23558;&#22312;&#19979;&#38754;&#35752;&#35770;&#32500;&#24230;&#65289;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">&#966;.HasEigenvalue</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="o">(</span><span class="n">minpoly</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="bp">.</span><span class="n">IsRoot</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">&#966;.hasEigenvalue_iff_isRoot</span>

<span class="c1">--&#8239;Cayley-Hamilton</span>
<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">aeval</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#966;.charpoly</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">&#966;.aeval_self_charpoly</span>
</pre></div>
</div>
</section>
<section id="matrices-bases-dimension">
<span id="id13"></span><h2><span class="section-number">10.4. </span>&#30697;&#38453;&#12289;&#22522;&#21644;&#32500;&#24230;<a class="headerlink" href="#matrices-bases-dimension" title="Link to this heading">&#61633;</a></h2>
<section id="matrices">
<span id="id14"></span><h3><span class="section-number">10.4.1. </span>&#30697;&#38453;<a class="headerlink" href="#matrices" title="Link to this heading">&#61633;</a></h3>
<p id="index-3">&#22312;&#20171;&#32461;&#25277;&#35937;&#21521;&#37327;&#31354;&#38388;&#30340;&#22522;&#20043;&#21069;&#65292;&#25105;&#20204;&#20808;&#22238;&#21040;&#26356;&#22522;&#30784;&#30340;&#32447;&#24615;&#20195;&#25968;&#35774;&#32622;&#8212;&#8212;&#23450;&#20041;&#22312;&#26576;&#22495; <span class="math notranslate nohighlight">\(K\)</span> &#19978;&#30340; <span class="math notranslate nohighlight">\(K^n\)</span> &#12290;&#36825;&#37324;&#30340;&#20027;&#35201;&#23545;&#35937;&#26159;&#21521;&#37327;&#21644;&#30697;&#38453;&#12290;&#23545;&#20110;&#20855;&#20307;&#21521;&#37327;&#65292;&#21487;&#20197;&#20351;&#29992; <cite>![&#8230;]</cite> &#35760;&#27861;&#65292;&#20998;&#37327;&#20043;&#38388;&#29992;&#36887;&#21495;&#20998;&#38548;&#12290;&#23545;&#20110;&#20855;&#20307;&#30697;&#38453;&#65292;&#21487;&#20197;&#20351;&#29992; <cite>!![&#8230;]</cite> &#35760;&#27861;&#65292;&#34892;&#20043;&#38388;&#29992;&#20998;&#21495;&#20998;&#38548;&#65292;&#34892;&#20869;&#20998;&#37327;&#29992;&#20882;&#21495;&#20998;&#38548;&#12290;&#24403;&#30697;&#38453;&#20803;&#32032;&#31867;&#22411;&#26159;&#21487;&#35745;&#31639;&#31867;&#22411;&#65288;&#20363;&#22914; <cite>&#8469;</cite> &#25110; <cite>&#8474;</cite>&#65289;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992; <cite>eval</cite> &#21629;&#20196;&#26469;&#36827;&#34892;&#22522;&#26412;&#36816;&#31639;&#25805;&#20316;&#30340;&#35797;&#39564;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span><span class="w"> </span><span class="n">matrices</span>

<span class="c1">-- Adding vectors</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w">  </span><span class="c1">-- !![4, 6]</span>

<span class="c1">-- Adding matrices</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="bp">;</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">]</span><span class="w">  </span><span class="c1">-- !![4, 6; 8, 10]</span>

<span class="c1">-- Multiplying matrices</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="bp">;</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">]</span><span class="w">  </span><span class="c1">-- !![4, 6; 8, 10]</span>
</pre></div>
</div>
<p>&#38656;&#35201;&#29702;&#35299;&#30340;&#26159;&#65292;<cite>#eval</cite> &#30340;&#20351;&#29992;&#20027;&#35201;&#29992;&#20110;&#25506;&#32034;&#21644;&#35797;&#39564;&#65292;&#24182;&#19981;&#26088;&#22312;&#26367;&#20195;&#22914; Sage &#36825;&#31867;&#35745;&#31639;&#26426;&#20195;&#25968;&#31995;&#32479;&#12290;&#36825;&#37324;&#30697;&#38453;&#30340;&#25968;&#25454;&#34920;&#31034;&#26041;&#24335; <em>&#24182;&#19981;</em> &#22312;&#35745;&#31639;&#19978;&#39640;&#25928;&#65292;&#23427;&#37319;&#29992;&#20989;&#25968;&#32780;&#38750;&#25968;&#32452;&#65292;&#20248;&#21270;&#30446;&#26631;&#26159;&#35777;&#26126;&#32780;&#38750;&#35745;&#31639;&#12290;&#32780;&#19988;&#65292;<cite>#eval</cite> &#25152;&#29992;&#30340;&#34394;&#25311;&#26426;&#20063;&#26410;&#38024;&#23545;&#36825;&#31181;&#29992;&#36884;&#36827;&#34892;&#20248;&#21270;&#12290;</p>
<p>&#35831;&#27880;&#24847;&#65292;&#30697;&#38453;&#34920;&#31034;&#20013;&#21015;&#20986;&#20102;&#22810;&#34892;&#65292;&#32780;&#21521;&#37327;&#34920;&#31034;&#26082;&#19981;&#26159;&#34892;&#21521;&#37327;&#20063;&#19981;&#26159;&#21015;&#21521;&#37327;&#12290;&#30697;&#38453;&#19982;&#21521;&#37327;&#30340;&#20056;&#27861;&#65292;&#33509;&#20174;&#24038;&#20056;&#65292;&#21017;&#23558;&#21521;&#37327;&#35270;&#20026;&#34892;&#21521;&#37327;&#65307;&#33509;&#20174;&#21491;&#20056;&#65292;&#21017;&#23558;&#21521;&#37327;&#35270;&#20026;&#21015;&#21521;&#37327;&#12290;</p>
<p>&#23545;&#24212;&#30340;&#25805;&#20316;&#20026;&#65306;</p>
<ul class="simple">
<li><p><cite>Matrix.vecMul</cite>&#65292;&#31526;&#21495;&#20026; <cite>&#7525;*</cite></p></li>
<li><p><cite>Matrix.mulVec</cite>&#65292;&#31526;&#21495;&#20026; <cite>*&#7525;</cite></p></li>
</ul>
<p>&#36825;&#20123;&#31526;&#21495;&#38480;&#23450;&#22312; <cite>Matrix</cite> &#21629;&#21517;&#31354;&#38388;&#65292;&#22240;&#27492;&#25105;&#20204;&#38656;&#35201;&#25171;&#24320;&#35813;&#21629;&#21517;&#31354;&#38388;&#25165;&#33021;&#20351;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Matrix</span>

<span class="c1">-- &#30697;&#38453;&#24038;&#20316;&#29992;&#20110;&#21521;&#37327;</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="bp">*&#7525;</span><span class="w"> </span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="c1">-- ![3, 7]</span>

<span class="c1">-- &#30697;&#38453;&#24038;&#20316;&#29992;&#20110;&#21521;&#37327;&#65292;&#32467;&#26524;&#20026;&#19968;&#32500;&#30697;&#38453;</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="bp">*&#7525;</span><span class="w"> </span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w">  </span><span class="c1">-- ![3]</span>

<span class="c1">-- &#30697;&#38453;&#21491;&#20316;&#29992;&#20110;&#21521;&#37327;</span>
<span class="k">#eval</span><span class="w">  </span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="bp">&#7525;*</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="bp">;</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">]</span><span class="w"> </span><span class="c1">-- ![9, 12]</span>
</pre></div>
</div>
<p>&#20026;&#20102;&#29983;&#25104;&#30001;&#26576;&#21521;&#37327;&#25351;&#23450;&#30340;&#30456;&#21516;&#34892;&#25110;&#21015;&#30340;&#30697;&#38453;&#65292;&#25105;&#20204;&#20351;&#29992; <cite>Matrix.row</cite> &#21644; <cite>Matrix.column</cite>&#65292;&#23427;&#20204;&#30340;&#21442;&#25968;&#20998;&#21035;&#26159;&#29992;&#20110;&#32034;&#24341;&#34892;&#25110;&#21015;&#30340;&#31867;&#22411;&#20197;&#21450;&#35813;&#21521;&#37327;&#12290;
&#20363;&#22914;&#65292;&#21487;&#20197;&#24471;&#21040;&#21333;&#34892;&#30697;&#38453;&#25110;&#21333;&#21015;&#30697;&#38453;&#65288;&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#26159;&#34892;&#25110;&#21015;&#30001; <cite>Fin 1</cite> &#32034;&#24341;&#30340;&#30697;&#38453;&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="c1">-- !![1, 2]</span>

<span class="k">#eval</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="c1">-- !![1; 2]</span>
</pre></div>
</div>
<p>&#20854;&#23427;&#29087;&#24713;&#30340;&#25805;&#20316;&#21253;&#25324;&#21521;&#37327;&#28857;&#31215;&#12289;&#30697;&#38453;&#36716;&#32622;&#65292;&#20197;&#21450;&#23545;&#20110;&#26041;&#38453;&#30340;&#34892;&#21015;&#24335;&#21644;&#36857;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="c1">-- &#21521;&#37327;&#28857;&#31215;</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="bp">&#11037;&#7525;</span><span class="w"> </span><span class="bp">!</span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="c1">-- `11`</span>

<span class="c1">-- &#30697;&#38453;&#36716;&#32622;</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">&#7488;</span><span class="w"> </span><span class="c1">-- `!![1, 3; 2, 4]`</span>

<span class="c1">-- &#34892;&#21015;&#24335;</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span><span class="w"> </span><span class="c1">-- `-2`</span>

<span class="c1">-- &#36857;</span>
<span class="k">#eval</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">trace</span><span class="w"> </span><span class="c1">-- `5`</span>
</pre></div>
</div>
<p>&#24403;&#30697;&#38453;&#20803;&#32032;&#31867;&#22411;&#19981;&#21487;&#35745;&#31639;&#26102;&#65292;&#27604;&#22914;&#23454;&#25968;&#65292;<cite>#eval</cite> &#23601;&#26080;&#33021;&#20026;&#21147;&#20102;&#12290;&#32780;&#19988;&#65292;&#36825;&#31867;&#35745;&#31639;&#20063;&#19981;&#33021;&#30452;&#25509;&#29992;&#20110;&#35777;&#26126;&#20013;&#65292;&#21542;&#21017;&#38656;&#35201;&#22823;&#24133;&#25193;&#23637;&#21463;&#20449;&#20219;&#20195;&#30721;&#24211;&#65288;&#21363;&#22312;&#26816;&#39564;&#35777;&#26126;&#26102;&#24517;&#39035;&#20449;&#20219;&#30340; Lean &#26680;&#24515;&#37096;&#20998;&#65289;&#12290;</p>
<p>&#22240;&#27492;&#65292;&#22312;&#35777;&#26126;&#20013;&#25512;&#33616;&#20351;&#29992; <cite>simp</cite> &#21644; <cite>norm_num</cite> &#31574;&#30053;&#65292;&#25110;&#32773;&#23427;&#20204;&#23545;&#24212;&#30340;&#21629;&#20196;&#24418;&#24335;&#26469;&#36827;&#34892;&#24555;&#36895;&#25506;&#32034;&#21644;&#31616;&#21270;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="bp">#</span><span class="n">simp</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span><span class="w"> </span><span class="c1">-- `4 - 2*3`</span>

<span class="bp">#</span><span class="n">norm_num</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span><span class="w"> </span><span class="c1">-- `-2`</span>

<span class="bp">#</span><span class="n">norm_num</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">.</span><span class="n">trace</span><span class="w"> </span><span class="c1">-- `5`</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="k">in</span>
<span class="bp">#</span><span class="n">simp</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="bp">;</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="n">d</span><span class="o">]</span><span class="bp">.</span><span class="n">det</span><span class="w"> </span><span class="c1">-- `a * d &#8211; b * c`</span>
</pre></div>
</div>
<p>&#19979;&#19968;&#20010;&#20851;&#20110;&#26041;&#38453;&#30340;&#37325;&#35201;&#25805;&#20316;&#26159;&#27714;&#36870;&#12290;&#31867;&#20284;&#20110;&#25968;&#30340;&#38500;&#27861;&#24635;&#26159;&#23450;&#20041;&#30340;&#65292;&#19988;&#23545;&#38500;&#20197;&#38646;&#30340;&#24773;&#20917;&#36820;&#22238;&#20154;&#20026;&#35774;&#23450;&#30340;&#38646;&#20540;&#65292;&#30697;&#38453;&#27714;&#36870;&#25805;&#20316;&#20063;&#23450;&#20041;&#22312;&#25152;&#26377;&#30697;&#38453;&#19978;&#65292;&#23545;&#20110;&#19981;&#21487;&#36870;&#30697;&#38453;&#36820;&#22238;&#38646;&#30697;&#38453;&#12290;</p>
<p>&#26356;&#20855;&#20307;&#22320;&#65292;&#23384;&#22312;&#19968;&#20010;&#36890;&#29992;&#20989;&#25968; <cite>Ring.inverse</cite>&#65292;&#23427;&#22312;&#20219;&#24847;&#29615;&#20013;&#23454;&#29616;&#27492;&#21151;&#33021;&#65307;&#23545;&#20110;&#20219;&#24847;&#30697;&#38453; <cite>A</cite>&#65292;&#20854;&#36870;&#30697;&#38453;&#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">Ring.inverse</span> <span class="pre">A.det</span> <span class="pre">&#8226;</span> <span class="pre">A.adjugate</span></code> &#26681;&#25454;Cramer&#8217;s rule&#65292;&#24403;&#30697;&#38453;&#34892;&#21015;&#24335;&#19981;&#20026;&#38646;&#26102;&#65292;&#19978;&#36848;&#23450;&#20041;&#30830;&#23454;&#26159;&#30697;&#38453; <cite>A</cite> &#30340;&#36870;&#30697;&#38453;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="bp">#</span><span class="n">norm_num</span><span class="w"> </span><span class="o">[</span><span class="n">Matrix.inv_def</span><span class="o">]</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="c1">-- !![-2, 1; 3 / 2, -(1 / 2)]</span>
</pre></div>
</div>
<p>&#24403;&#28982;&#36825;&#31181;&#23450;&#20041;&#30830;&#23454;&#21482;&#23545;&#21487;&#36870;&#30697;&#38453;&#26377;&#29992;&#12290;&#23384;&#22312;&#19968;&#20010;&#36890;&#29992;&#31867;&#22411;&#31867; <code class="docutils literal notranslate"><span class="pre">Invertible</span></code> &#26469;&#24110;&#21161;&#35760;&#24405;&#36825;&#19968;&#28857;&#12290;&#20363;&#22914;&#65292;&#19979;&#38754;&#20363;&#23376;&#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#35843;&#29992;&#23558;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">inv_mul_of_invertible</span></code> &#24341;&#29702;&#65292;&#35813;&#24341;&#29702;&#20855;&#26377; <code class="docutils literal notranslate"><span class="pre">Invertible</span></code> &#31867;&#22411;&#31867;&#20551;&#35774;&#65292;&#22240;&#27492;&#21482;&#26377;&#22312;&#31867;&#22411;&#31867;&#21512;&#25104;&#31995;&#32479;&#33021;&#22815;&#25214;&#21040;&#23427;&#26102;&#25165;&#20250;&#35302;&#21457;&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">have</span></code> &#35821;&#21477;&#20351;&#36825;&#19968;&#20107;&#23454;&#21487;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Invertible</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">apply</span><span class="w"> </span><span class="n">Matrix.invertibleOfIsUnitDet</span>
<span class="w">    </span><span class="n">norm_num</span>
<span class="w">  </span><span class="n">simp</span>
</pre></div>
</div>
<p>&#22312;&#36825;&#20010;&#23436;&#20840;&#20855;&#20307;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">norm_num</span></code> &#24037;&#20855;&#65292;&#21644; <code class="docutils literal notranslate"><span class="pre">apply?</span></code> &#26469;&#25214;&#21040;&#26368;&#21518;&#19968;&#34892;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">!!</span><span class="o">[(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">),</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">norm_num</span><span class="w"> </span><span class="o">[</span><span class="n">Matrix.inv_def</span><span class="o">]</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="n">one_fin_two.symm</span>
</pre></div>
</div>
<p>&#20043;&#21069;&#25152;&#26377;&#20855;&#20307;&#30697;&#38453;&#30340;&#34892;&#21644;&#21015;&#22343;&#30001;&#26576;&#20010; <cite>Fin n</cite> &#32034;&#24341;&#65288;&#34892;&#21015;&#30340; <cite>n</cite> &#19981;&#19968;&#23450;&#30456;&#21516;&#65289;&#12290;&#20294;&#26377;&#26102;&#20351;&#29992;&#20219;&#24847;&#26377;&#38480;&#31867;&#22411;&#20316;&#20026;&#30697;&#38453;&#30340;&#34892;&#21015;&#32034;&#24341;&#26356;&#20026;&#26041;&#20415;&#12290;&#20363;&#22914;&#65292;&#26377;&#38480;&#22270;&#30340;&#37051;&#25509;&#30697;&#38453;&#65292;&#20854;&#34892;&#21644;&#21015;&#33258;&#28982;&#30001;&#22270;&#30340;&#39030;&#28857;&#32034;&#24341;&#12290;</p>
<p>&#23454;&#38469;&#19978;&#65292;&#22914;&#26524;&#20165;&#23450;&#20041;&#30697;&#38453;&#32780;&#19981;&#28041;&#21450;&#36816;&#31639;&#65292;&#32034;&#24341;&#31867;&#22411;&#30340;&#26377;&#38480;&#24615;&#29978;&#33267;&#19981;&#26159;&#24517;&#39035;&#30340;&#65292;&#30697;&#38453;&#20803;&#32032;&#30340;&#31867;&#22411;&#20063;&#26080;&#38656;&#20855;&#22791;&#20219;&#20309;&#20195;&#25968;&#32467;&#26500;&#12290;&#22240;&#27492;&#65292;Mathlib &#30452;&#25509;&#23558; <cite>Matrix m n &#945;</cite> &#23450;&#20041;&#20026; <cite>m &#8594; n &#8594; &#945;</cite>&#65292;&#20854;&#20013; <cite>m</cite>&#12289;<cite>n</cite>&#12289;<cite>&#945;</cite> &#26159;&#20219;&#24847;&#31867;&#22411;&#12290;&#25105;&#20204;&#20043;&#21069;&#20351;&#29992;&#30340;&#30697;&#38453;&#31867;&#22411;&#22810;&#22914; <cite>Matrix (Fin 2) (Fin 2) &#8477;</cite>&#12290;&#24403;&#28982;&#65292;&#20195;&#25968;&#36816;&#31639;&#23545; <cite>m</cite>&#12289;<cite>n</cite> &#21644; <cite>&#945;</cite> &#26377;&#26356;&#20005;&#26684;&#30340;&#20551;&#35774;&#12290;</p>
<p>&#25105;&#20204;&#19981;&#30452;&#25509;&#20351;&#29992; <cite>m &#8594; n &#8594; &#945;</cite> &#30340;&#20027;&#35201;&#21407;&#22240;&#65292;&#26159;&#35753;&#31867;&#22411;&#31867;&#31995;&#32479;&#33021;&#27491;&#30830;&#29702;&#35299;&#25105;&#20204;&#30340;&#24847;&#22270;&#12290;&#20030;&#20363;&#26469;&#35828;&#65292;&#23545;&#20110;&#29615; <cite>R</cite>&#65292;&#31867;&#22411; <cite>n &#8594; R</cite> &#33258;&#24102;&#36880;&#28857;&#20056;&#27861;&#65288;point-wise multiplication&#65289;&#65292;&#32780; <cite>m &#8594; n &#8594; R</cite> &#20063;&#26377;&#31867;&#20284;&#25805;&#20316;&#65292;&#20294;&#36825;&#24182;&#19981;&#26159;&#25105;&#20204;&#24819;&#22312;&#30697;&#38453;&#19978;&#20351;&#29992;&#30340;&#20056;&#27861;&#12290;</p>
<p>&#19979;&#38754;&#31532;&#19968;&#20010;&#31034;&#20363;&#20013;&#65292;&#25105;&#20204;&#24378;&#21046; Lean &#23637;&#24320; <cite>Matrix</cite> &#23450;&#20041;&#65292;&#25509;&#21463;&#38472;&#36848;&#30340;&#24847;&#20041;&#65292;&#24182;&#36890;&#36807;&#36880;&#20010;&#20803;&#32032;&#26816;&#26597;&#23436;&#25104;&#35777;&#26126;&#12290;</p>
<p>&#32780;&#21518;&#38754;&#20004;&#20010;&#31034;&#20363;&#23637;&#31034;&#20102; Lean &#23545; <cite>Fin 2 &#8594; Fin 2 &#8594; &#8484;</cite> &#20351;&#29992;&#36880;&#28857;&#20056;&#27861;&#65292;&#32780;&#23545; <cite>Matrix (Fin 2) (Fin 2) &#8484;</cite> &#20351;&#29992;&#30697;&#38453;&#20056;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="bp">;</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span>
<span class="w">  </span><span class="n">fin_cases</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">fin_cases</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="bp">;</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span>
<span class="w">  </span><span class="n">fin_cases</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">fin_cases</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="bp">;</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="bp">;</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">!!</span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="bp">;</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">norm_num</span>
</pre></div>
</div>
<p>&#20026;&#20102;&#23450;&#20041;&#30697;&#38453;&#20316;&#20026;&#20989;&#25968;&#32780;&#19981;&#22833;&#21435; <code class="docutils literal notranslate"><span class="pre">Matrix</span></code> &#22312;&#31867;&#22411;&#31867;&#21512;&#25104;&#20013;&#30340;&#22909;&#22788;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#20989;&#25968;&#21644;&#30697;&#38453;&#20043;&#38388;&#30340;&#31561;&#20215;&#20851;&#31995; <code class="docutils literal notranslate"><span class="pre">Matrix.of</span></code>&#12290;&#36825;&#20010;&#31561;&#20215;&#20851;&#31995;&#26159;&#36890;&#36807; <code class="docutils literal notranslate"><span class="pre">Equiv.refl</span></code> &#38544;&#24335;&#23450;&#20041;&#30340;&#12290;</p>
<p>&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#19982;&#21521;&#37327; <code class="docutils literal notranslate"><span class="pre">v</span></code> &#23545;&#24212;&#30340;&#33539;&#24503;&#33945;&#24503;&#30697;&#38453;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Matrix.vandermonde</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Matrix.of</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="o">(</span><span class="n">j</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">))</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
<span class="kd">end</span>
<span class="kd">end</span><span class="w"> </span><span class="n">matrices</span>
</pre></div>
</div>
</section>
<section id="id15">
<h3><span class="section-number">10.4.2. </span>&#22522;<a class="headerlink" href="#id15" title="Link to this heading">&#61633;</a></h3>
<p>&#25105;&#20204;&#29616;&#22312;&#35752;&#35770;&#21521;&#37327;&#31354;&#38388;&#30340;&#22522;&#12290;&#38750;&#27491;&#24335;&#22320;&#35828;&#65292;&#36825;&#19968;&#27010;&#24565;&#26377;&#22810;&#31181;&#23450;&#20041;&#26041;&#24335;&#65306;</p>
<ul class="simple">
<li><p>&#21487;&#20197;&#36890;&#36807;&#19975;&#26377;&#24615;&#36136;&#26469;&#23450;&#20041;&#65307;</p></li>
<li><p>&#21487;&#20197;&#35828;&#22522;&#26159;&#19968;&#26063;&#32447;&#24615;&#26080;&#20851;&#19988;&#24352;&#25104;&#20840;&#31354;&#38388;&#30340;&#21521;&#37327;&#65307;</p></li>
<li><p>&#25110;&#32467;&#21512;&#36825;&#20004;&#20010;&#24615;&#36136;&#65292;&#30452;&#25509;&#35828;&#22522;&#26159;&#19968;&#26063;&#21521;&#37327;&#65292;&#20351;&#24471;&#27599;&#20010;&#21521;&#37327;&#37117;&#33021;&#21807;&#19968;&#22320;&#34920;&#31034;&#20026;&#22522;&#21521;&#37327;&#30340;&#32447;&#24615;&#32452;&#21512;&#65307;</p></li>
<li><p>&#21478;&#19968;&#31181;&#35828;&#27861;&#26159;&#65292;&#22522;&#25552;&#20379;&#20102;&#19982;&#22522;&#22495; <code class="docutils literal notranslate"><span class="pre">K</span></code> &#30340;&#26576;&#20010;&#24130;&#65288;&#20316;&#20026; <code class="docutils literal notranslate"><span class="pre">K</span></code> &#19978;&#30340;&#21521;&#37327;&#31354;&#38388;&#65289;&#30340;&#32447;&#24615;&#21516;&#26500;&#12290;</p></li>
</ul>
<p>&#23454;&#38469;&#19978;&#65292;Mathlib &#22312;&#24213;&#23618;&#37319;&#29992;&#30340;&#26159;&#26368;&#21518;&#19968;&#31181;&#21516;&#26500;&#30340;&#23450;&#20041;&#65292;&#24182;&#20174;&#20013;&#25512;&#23548;&#20986;&#20854;&#20182;&#24615;&#36136;&#12290;
&#23545;&#20110;&#26080;&#38480;&#22522;&#30340;&#24773;&#20917;&#65292;&#38656;&#31245;&#21152;&#27880;&#24847;&#8220;&#22522;&#22495;&#30340;&#24130;&#8221;&#36825;&#19968;&#35828;&#27861;&#12290;&#22240;&#20026;&#22312;&#20195;&#25968;&#29615;&#22659;&#20013;&#65292;&#21482;&#32771;&#34385;&#26377;&#38480;&#32447;&#24615;&#32452;&#21512;&#26377;&#24847;&#20041;&#65292;
&#25152;&#20197;&#25105;&#20204;&#21442;&#32771;&#30340;&#21521;&#37327;&#31354;&#38388;&#19981;&#26159;&#22522;&#22495;&#30340;&#30452;&#31215;&#65292;&#32780;&#26159;&#30452;&#21644;&#12290;
&#25105;&#20204;&#21487;&#20197;&#29992; <cite>&#10753; i : &#953;, K</cite> &#34920;&#31034;&#26576;&#20010;&#31867;&#22411; <cite>&#953;</cite> &#32034;&#24341;&#30340;&#22522;&#21521;&#37327;&#38598;&#21512;&#23545;&#24212;&#30340;&#30452;&#21644;&#65292;
&#20294;&#26356;&#24120;&#29992;&#30340;&#26159;&#26356;&#19987;&#38376;&#30340;&#34920;&#31034;&#27861; <cite>&#953; &#8594;&#8320; K</cite>&#65292;&#34920;&#31034;&#8220;&#20855;&#26377;&#26377;&#38480;&#25903;&#38598;&#30340;&#20989;&#25968;&#8221;&#65292;&#21363;&#22312; <cite>&#953;</cite> &#19978;&#38500;&#26377;&#38480;&#28857;&#22806;&#20540;&#20026;&#38646;&#30340;&#20989;&#25968;&#65288;&#36825;&#20010;&#26377;&#38480;&#38598;&#21512;&#19981;&#26159;&#22266;&#23450;&#30340;&#65292;&#20381;&#36182;&#20110;&#20989;&#25968;&#26412;&#36523;&#65289;&#12290;</p>
<p>&#23545;&#20110;&#22522; <cite>B</cite> &#20013;&#30340;&#20989;&#25968;&#65292;&#32473;&#23450;&#21521;&#37327; <cite>v</cite> &#21644;&#32034;&#24341; <cite>i : &#953;</cite>&#65292;&#20989;&#25968;&#30340;&#20540;&#21363;&#20026; <cite>v</cite> &#22312;&#31532; <cite>i</cite> &#20010;&#22522;&#21521;&#37327;&#19978;&#30340;&#22352;&#26631;&#20998;&#37327;&#12290;</p>
<p>&#20197;&#31867;&#22411; <cite>&#953;</cite> &#32034;&#24341;&#30340;&#21521;&#37327;&#31354;&#38388; <cite>V</cite> &#30340;&#22522;&#31867;&#22411;&#20026; <cite>Basis &#953; K V</cite>&#65292;&#23545;&#24212;&#30340;&#21516;&#26500;&#31216;&#20026; <cite>Basis.repr</cite>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">K</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Field</span><span class="w"> </span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span>

<span class="kn">section</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span>

<span class="c1">-- &#32034;&#24341;&#20026; ``i`` &#30340;&#22522;&#21521;&#37327;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>

<span class="c1">-- &#19982;&#27169;&#31354;&#38388; ``B`` &#32473;&#20986;&#30340;&#32447;&#24615;&#21516;&#26500;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">B.repr</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;&#8320;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span>

<span class="c1">-- ``v`` &#30340;&#20998;&#37327;&#20989;&#25968;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">B.repr</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;&#8320;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span>

<span class="c1">-- ``v`` &#22312;&#32034;&#24341;&#20026; ``i`` &#30340;&#22522;&#21521;&#37327;&#19978;&#30340;&#20998;&#37327;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">B.repr</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">K</span><span class="o">)</span>
</pre></div>
</div>
<p>&#19982;&#20854;&#20174;&#21516;&#26500;&#20986;&#21457;&#65292;&#20063;&#21487;&#20197;&#20174;&#19968;&#26063;&#32447;&#24615;&#26080;&#20851;&#19988;&#24352;&#25104;&#30340;&#21521;&#37327;&#26063; <cite>b</cite> &#24320;&#22987;&#26500;&#36896;&#22522;&#65292;&#36825;&#23601;&#26159; <cite>Basis.mk</cite>&#12290;&#8220;&#24352;&#25104;&#8221;&#30340;&#20551;&#35774;&#34920;&#36798;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8868;</span> <span class="pre">&#8804;</span> <span class="pre">Submodule.span</span> <span class="pre">K</span> <span class="pre">(Set.range</span> <span class="pre">b)</span></code>&#65292;&#36825;&#37324;&#30340; <cite>&#8868;</cite> &#26159; <cite>V</cite> &#30340;&#26368;&#22823;&#23376;&#27169;&#65292;&#21363; <cite>V</cite> &#33258;&#36523;&#20316;&#20026;&#33258;&#36523;&#30340;&#23376;&#27169;&#12290;&#36825;&#20010;&#34920;&#36798;&#30475;&#36215;&#26469;&#26377;&#20123;&#25303;&#21475;&#65292;&#20294;&#19979;&#38754;&#25105;&#20204;&#23558;&#30475;&#21040;&#23427;&#19982;&#26356;&#26131;&#29702;&#35299;&#30340;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">v,</span> <span class="pre">v</span> <span class="pre">&#8712;</span> <span class="pre">Submodule.span</span> <span class="pre">K</span> <span class="pre">(Set.range</span> <span class="pre">b)</span></code> &#20960;&#20046;&#26159;&#23450;&#20041;&#31561;&#20215;&#30340;&#65288;&#19979;&#38754;&#20195;&#30721;&#20013;&#30340;&#19979;&#21010;&#32447;&#34920;&#31034;&#26080;&#29992;&#20449;&#24687; <cite>v &#8712; &#8868;</cite>&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b_indep</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LinearIndependent</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">b</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">b_spans</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">Submodule.span</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">Set.range</span><span class="w"> </span><span class="n">b</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Basis.mk</span><span class="w"> </span><span class="n">b_indep</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">b_spans</span><span class="w"> </span><span class="n">v</span><span class="o">)</span>

<span class="c1">-- &#35813;&#22522;&#30340;&#24213;&#23618;&#21521;&#37327;&#26063;&#30830;&#23454;&#26159; ``b``&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b_indep</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">LinearIndependent</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">b</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">b_spans</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">Submodule.span</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">Set.range</span><span class="w"> </span><span class="n">b</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Basis.mk</span><span class="w"> </span><span class="n">b_indep</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">b_spans</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Basis.mk_apply</span><span class="w"> </span><span class="n">b_indep</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">b_spans</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
<p>&#29305;&#21035;&#22320;&#65292;&#27169;&#22411;&#21521;&#37327;&#31354;&#38388; <cite>&#953; &#8594;&#8320; K</cite> &#20855;&#26377;&#25152;&#35859;&#30340;&#26631;&#20934;&#22522;&#65288;canonical basis&#65289;&#65292;&#20854; <cite>repr</cite> &#20989;&#25968;&#22312;&#20219;&#24847;&#21521;&#37327;&#19978;&#30340;&#20540;&#21363;&#20026;&#24658;&#31561;&#21516;&#26500;&#12290;&#35813;&#22522;&#31216;&#20026; <cite>Finsupp.basisSingleOne</cite>&#65292;&#20854;&#20013; <cite>Finsupp</cite> &#34920;&#31034;&#26377;&#38480;&#25903;&#38598;&#20989;&#25968;&#65292;<cite>basisSingleOne</cite> &#25351;&#30340;&#26159;&#22522;&#21521;&#37327;&#26159;&#38500;&#21333;&#20010;&#36755;&#20837;&#28857;&#22806;&#65292;&#20854;&#20313;&#28857;&#20540;&#30342;&#20026;&#38646;&#30340;&#20989;&#25968;&#12290;&#26356;&#20855;&#20307;&#22320;&#65292;&#32034;&#24341;&#20026; <cite>i : &#953;</cite> &#30340;&#22522;&#21521;&#37327;&#26159; <code class="docutils literal notranslate"><span class="pre">Finsupp.single</span> <span class="pre">i</span> <span class="pre">1</span></code>&#65292;&#36825;&#26159;&#19968;&#20010;&#26377;&#38480;&#25903;&#38598;&#20989;&#25968;&#65292;&#22312;&#28857; <cite>i</cite> &#21462;&#20540;&#20026; <cite>1</cite>&#65292;&#20854;&#20313;&#28857;&#21462;&#20540;&#20026; <cite>0</cite>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finsupp.basisSingleOne.repr</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">LinearEquiv.refl</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;&#8320;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finsupp.basisSingleOne</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Finsupp.single</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#24403;&#32034;&#24341;&#31867;&#22411;&#26159;&#26377;&#38480;&#38598;&#21512;&#26102;&#65292;&#26377;&#38480;&#25903;&#38598;&#20989;&#25968;&#30340;&#27010;&#24565;&#23601;&#19981;&#20877;&#38656;&#35201;&#12290;&#36825;&#26102;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#26356;&#31616;&#21333;&#30340; <cite>Pi.basisFun</cite>&#65292;&#23427;&#30452;&#25509;&#26500;&#36896;&#20102;&#25972;&#20010; <cite>&#953; &#8594; K</cite> &#30340;&#19968;&#32452;&#22522;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Finite</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="k">Pi</span><span class="bp">.</span><span class="n">basisFun</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="bp">.</span><span class="n">repr</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">simp</span>
</pre></div>
</div>
<p>&#22238;&#21040;&#25277;&#35937;&#21521;&#37327;&#31354;&#38388;&#22522;&#30340;&#36890;&#29992;&#24773;&#20917;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#20219;&#20309;&#21521;&#37327;&#34920;&#31034;&#20026;&#22522;&#21521;&#37327;&#30340;&#32447;&#24615;&#32452;&#21512;&#12290;&#35753;&#25105;&#20204;&#39318;&#20808;&#30475;&#30475;&#26377;&#38480;&#22522;&#30340;&#31616;&#21333;&#24773;&#20917;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">,</span><span class="w"> </span><span class="n">B.repr</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">B.sum_repr</span><span class="w"> </span><span class="n">v</span>
</pre></div>
</div>
<p>&#24403;&#32034;&#24341;&#31867;&#22411; <cite>&#953;</cite> &#19981;&#26159;&#26377;&#38480;&#38598;&#26102;&#65292;&#19978;&#36848;&#30452;&#25509;&#23545; <cite>&#953;</cite> &#27714;&#21644;&#30340;&#35828;&#27861;&#22312;&#29702;&#35770;&#19978;&#27809;&#26377;&#24847;&#20041;&#65292;&#22240;&#20026;&#26080;&#27861;&#23545;&#26080;&#38480;&#38598;&#21512;&#36827;&#34892;&#30452;&#25509;&#27714;&#21644;&#12290;&#19981;&#36807;&#65292;&#34987;&#27714;&#21644;&#30340;&#20989;&#25968;&#30340;&#25903;&#38598;&#26159;&#26377;&#38480;&#30340;&#65288;&#21363; <cite>B.repr v</cite> &#30340;&#25903;&#38598;&#65289;&#65292;&#36825;&#23601;&#20801;&#35768;&#23545;&#26377;&#38480;&#25903;&#38598;&#36827;&#34892;&#27714;&#21644;&#12290;&#20026;&#20102;&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#65292;Mathlib &#20351;&#29992;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;&#20989;&#25968;&#65292;&#34429;&#28982;&#38656;&#35201;&#19968;&#20123;&#26102;&#38388;&#36866;&#24212;&#65292;&#23427;&#26159; <cite>Finsupp.linearCombination`&#65288;&#24314;&#31435;&#22312;&#26356;&#36890;&#29992;&#30340; `Finsupp.sum</cite> &#20043;&#19978;&#65289;&#12290;</p>
<p>&#32473;&#23450;&#19968;&#20010;&#20174;&#31867;&#22411; <cite>&#953;</cite> &#21040;&#22522;&#22495; <cite>K</cite> &#30340;&#26377;&#38480;&#25903;&#38598;&#20989;&#25968; <cite>c</cite>&#65292;&#20197;&#21450;&#20219;&#24847;&#20174; <cite>&#953;</cite> &#21040;&#21521;&#37327;&#31354;&#38388; <cite>V</cite> &#30340;&#20989;&#25968; <cite>f</cite>&#65292;<cite>Finsupp.linearCombination K f c</cite> &#23450;&#20041;&#20026;&#23545; <cite>c</cite> &#30340;&#25903;&#38598;&#19978;&#25152;&#26377;&#20803;&#32032;&#30340; <cite>c &#8226; f</cite> &#36827;&#34892;&#26631;&#37327;&#20056;&#27861;&#21518;&#27714;&#21644;&#12290;&#29305;&#21035;&#22320;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#23558;&#27714;&#21644;&#33539;&#22260;&#26367;&#25442;&#20026;&#20219;&#20309;&#21253;&#21547; <cite>c</cite> &#25903;&#38598;&#30340;&#26377;&#38480;&#38598;&#21512;&#12290;</p>
<p>When <code class="docutils literal notranslate"><span class="pre">&#953;</span></code> is not finite, the above statement makes no sense a priori: we cannot take a sum over <code class="docutils literal notranslate"><span class="pre">&#953;</span></code>.
However the support of the function being summed is finite (it is the support of <code class="docutils literal notranslate"><span class="pre">B.repr</span> <span class="pre">v</span></code>).
But we need to apply a construction that takes this into account.
Here Mathlib uses a special purpose function that requires some time to get used to:
<code class="docutils literal notranslate"><span class="pre">Finsupp.linearCombination</span></code> (which is built on top of the more general <code class="docutils literal notranslate"><span class="pre">Finsupp.sum</span></code>).
Given a finitely supported function <code class="docutils literal notranslate"><span class="pre">c</span></code> from a type <code class="docutils literal notranslate"><span class="pre">&#953;</span></code> to the base field <code class="docutils literal notranslate"><span class="pre">K</span></code> and any
function <code class="docutils literal notranslate"><span class="pre">f</span></code> from <code class="docutils literal notranslate"><span class="pre">&#953;</span></code> to <code class="docutils literal notranslate"><span class="pre">V</span></code>, <code class="docutils literal notranslate"><span class="pre">Finsupp.linearCombination</span> <span class="pre">K</span> <span class="pre">f</span> <span class="pre">c</span></code> is the
sum over the support of <code class="docutils literal notranslate"><span class="pre">c</span></code> of the scalar multiplication <code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">&#8226;</span> <span class="pre">f</span></code>. In
particular, we can replace it by a sum over any finite set containing the
support of <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;&#8320;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">c.support</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Finsupp.linearCombination</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Finsupp.linearCombination_apply_of_mem_supported</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#20063;&#21487;&#20197;&#20551;&#35774; <cite>f</cite> &#26159;&#26377;&#38480;&#25903;&#38598;&#20989;&#25968;&#65292;&#36825;&#26679;&#20381;&#28982;&#33021;&#24471;&#21040;&#33391;&#23450;&#20041;&#30340;&#27714;&#21644;&#32467;&#26524;&#12290;&#20294; <cite>Finsupp.linearCombination</cite> &#25152;&#20316;&#30340;&#36873;&#25321;&#26356;&#36148;&#21512;&#25105;&#20204;&#20851;&#20110;&#22522;&#30340;&#35752;&#35770;&#65292;&#22240;&#20026;&#23427;&#25903;&#25345;&#38472;&#36848; <cite>Basis.sum_repr</cite> &#30340;&#25512;&#24191;&#29256;&#26412;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finsupp.linearCombination</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">(</span><span class="n">B.repr</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">B.linearCombination_repr</span><span class="w"> </span><span class="n">v</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#33021;&#20250;&#22909;&#22855;&#65292;&#20026;&#20160;&#20040;&#36825;&#37324;&#30340; <cite>K</cite> &#26159;&#26174;&#24335;&#21442;&#25968;&#65292;&#23613;&#31649;&#23427;&#21487;&#20197;&#20174; <cite>c</cite> &#30340;&#31867;&#22411;&#20013;&#25512;&#26029;&#20986;&#26469;&#12290;&#20851;&#38190;&#22312;&#20110;&#65292;&#37096;&#20998;&#24212;&#29992;&#30340; <cite>Finsupp.linearCombination K f</cite> &#26412;&#36523;&#23601;&#26159;&#19968;&#20010;&#26377;&#36259;&#30340;&#23545;&#35937;&#12290;
&#23427;&#19981;&#20165;&#20165;&#26159;&#19968;&#20010;&#20174; <cite>&#953; &#8594;&#8320; K</cite> &#21040; <cite>V</cite> &#30340;&#26222;&#36890;&#20989;&#25968;&#65292;&#26356;&#26159;&#19968;&#20010; <cite>K</cite>-&#32447;&#24615;&#26144;&#23556;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="k">in</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">Finsupp.linearCombination</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;&#8320;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>
</pre></div>
</div>
<p>&#19978;&#36848;&#32454;&#33410;&#20063;&#35299;&#37322;&#20102;&#20026;&#20160;&#20040;&#19981;&#33021;&#29992;&#28857;&#35760;&#27861;&#20889;&#25104; <cite>c.linearCombination K f</cite> &#26469;&#20195;&#26367; <cite>Finsupp.linearCombination K f c</cite>&#12290;
&#20107;&#23454;&#19978;&#65292;<cite>Finsupp.linearCombination</cite> &#26412;&#36523;&#24182;&#19981;&#30452;&#25509;&#25509;&#25910; <cite>c</cite> &#20316;&#20026;&#21442;&#25968;&#65292;&#32780;&#26159;&#20808;&#37096;&#20998;&#24212;&#29992; <cite>K</cite> &#21644; <cite>f</cite>&#65292;&#24471;&#21040;&#19968;&#20010;&#34987;&#24378;&#21046;&#36716;&#25442;&#20026;&#20989;&#25968;&#31867;&#22411;&#30340;&#23545;&#35937;&#65292;&#38543;&#21518;&#35813;&#20989;&#25968;&#25165;&#25509;&#25910; <cite>c</cite> &#20316;&#20026;&#21442;&#25968;&#12290;</p>
<p>&#22238;&#21040;&#25968;&#23398;&#35752;&#35770;&#65292;&#29702;&#35299;&#22522;&#19979;&#21521;&#37327;&#30340;&#20855;&#20307;&#34920;&#31034;&#22312;&#24418;&#24335;&#21270;&#25968;&#23398;&#20013;&#24448;&#24448;&#27809;&#26377;&#20320;&#24819;&#35937;&#30340;&#37027;&#20040;&#26377;&#29992;&#38750;&#24120;&#37325;&#35201;&#12290;&#23454;&#38469;&#19978;&#65292;&#30452;&#25509;&#21033;&#29992;&#22522;&#30340;&#26356;&#25277;&#35937;&#24615;&#36136;&#36890;&#24120;&#26356;&#21152;&#39640;&#25928;&#12290;
&#29305;&#21035;&#26159;&#65292;&#22522;&#30340;&#36890;&#29992;&#24615;&#36136;&#23558;&#20854;&#19982;&#20195;&#25968;&#20013;&#30340;&#20854;&#20182;&#33258;&#30001;&#23545;&#35937;&#36830;&#25509;&#36215;&#26469;&#65292;&#20351;&#24471;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#25351;&#23450;&#22522;&#21521;&#37327;&#30340;&#20687;&#26469;&#26500;&#36896;&#32447;&#24615;&#26144;&#23556;&#12290;&#36825;&#23601;&#26159; <cite>Basis.constr</cite>&#12290;&#23545;&#20110;&#20219;&#24847; <cite>K</cite>-&#21521;&#37327;&#31354;&#38388; <cite>W</cite>&#65292;&#25105;&#20204;&#30340;&#22522; <cite>B</cite> &#25552;&#20379;&#20102;&#19968;&#20010;&#32447;&#24615;&#21516;&#26500; <cite>Basis.constr B K : (&#953; &#8594; W) &#8771;&#8343;[K] (V &#8594;&#8343;[K] W)</cite>&#12290;&#35813;&#21516;&#26500;&#30340;&#29305;&#28857;&#26159;&#65292;&#23545;&#20110;&#20219;&#24847;&#20989;&#25968; <cite>u : &#953; &#8594; W</cite>&#65292;&#23427;&#23545;&#24212;&#30340;&#32447;&#24615;&#26144;&#23556;&#23558;&#22522;&#21521;&#37327; <cite>B i</cite> &#26144;&#23556;&#20026; <cite>u i</cite>&#65292;&#20854;&#20013; <cite>i : &#953;</cite>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">W</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup</span><span class="w"> </span><span class="n">W</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Module</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">]</span>
<span class="w">         </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">B.constr</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">&#953;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">))</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">B.constr</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">B.constr</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">B.constr_basis</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">i</span>
</pre></div>
</div>
<p>&#36825;&#20010;&#24615;&#36136;&#23454;&#38469;&#19978;&#26159;&#29305;&#24449;&#24615;&#30340;&#65292;&#22240;&#20026;&#32447;&#24615;&#26144;&#23556;&#26159;&#30001;&#23427;&#20204;&#22312;&#22522;&#19978;&#30340;&#20540;&#20915;&#23450;&#30340;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="n">i</span><span class="o">))</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">&#968;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">B.ext</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#22914;&#26524;&#25105;&#20204;&#22312;&#30446;&#26631;&#31354;&#38388;&#19978;&#20063;&#26377;&#19968;&#20010;&#22522; <code class="docutils literal notranslate"><span class="pre">B'</span></code>&#65292;&#37027;&#20040;&#25105;&#20204;&#21487;&#20197;&#23558;&#32447;&#24615;&#26144;&#23556;&#19982;&#30697;&#38453;&#36827;&#34892;&#35782;&#21035;&#12290;
&#36825;&#31181;&#35782;&#21035;&#26159;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">K</span></code>-&#32447;&#24615;&#21516;&#26500;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">B&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;&#39;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#953;&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;&#39;</span><span class="o">]</span>

<span class="kn">open</span><span class="w"> </span><span class="n">LinearMap</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8771;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">Matrix</span><span class="w"> </span><span class="n">&#953;&#39;</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Matrix</span><span class="w"> </span><span class="c1">-- &#33719;&#21462;&#23545;&#30697;&#38453;&#21644;&#21521;&#37327;&#20043;&#38388;&#20056;&#27861;&#30340; ``*&#7525;`` &#35760;&#27861;&#30340;&#35775;&#38382;&#12290;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="w"> </span><span class="bp">*&#7525;</span><span class="w"> </span><span class="o">(</span><span class="n">B.repr</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">B&#39;.repr</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="n">v</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">toMatrix_mulVec_repr</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">&#966;</span><span class="w"> </span><span class="n">v</span>


<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;&#39;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">B&#39;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;&#39;&#39;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#953;&#39;&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#953;&#39;&#39;</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8594;&#8343;</span><span class="o">[</span><span class="n">K</span><span class="o">]</span><span class="w"> </span><span class="n">W</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;&#39;</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">B&#39;&#39;</span><span class="w"> </span><span class="bp">.</span><span class="n">id</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">simp</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#26412;&#20027;&#39064;&#30340;&#32451;&#20064;&#65292;&#25105;&#20204;&#23558;&#35777;&#26126;&#19968;&#37096;&#20998;&#23450;&#29702;&#65292;&#20445;&#35777;&#33258;&#21516;&#24577;&#30340;&#34892;&#21015;&#24335;&#26159;&#33391;&#23450;&#20041;&#30340;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;&#25105;&#20204;&#35201;&#35777;&#26126;&#65306;&#24403;&#20004;&#20010;&#22522;&#30001;&#30456;&#21516;&#31867;&#22411;&#32034;&#24341;&#26102;&#65292;&#23427;&#20204;&#23545;&#24212;&#20219;&#24847;&#33258;&#21516;&#24577;&#30340;&#30697;&#38453;&#20855;&#26377;&#30456;&#21516;&#30340;&#34892;&#21015;&#24335;&#12290;
&#28982;&#21518;&#65292;&#32467;&#21512;&#25152;&#26377;&#22522;&#30340;&#32034;&#24341;&#31867;&#22411;&#24444;&#27492;&#32447;&#24615;&#21516;&#26500;&#65292;&#20415;&#21487;&#24471;&#21040;&#23436;&#25972;&#32467;&#35770;&#12290;</p>
<p>&#24403;&#28982;&#65292;Mathlib &#24050;&#32463;&#21253;&#21547;&#20102;&#36825;&#19968;&#32467;&#35770;&#65292;&#19988; <cite>simp</cite> &#31574;&#30053;&#21487;&#20197;&#31435;&#21363;&#35299;&#20915;&#27492;&#30446;&#26631;&#65292;&#22240;&#27492;&#20320;&#19981;&#24212;&#36807;&#26089;&#20351;&#29992;&#23427;&#65292;&#32780;&#24212;&#20808;&#23581;&#35797;&#20351;&#29992;&#30456;&#20851;&#24341;&#29702;&#36827;&#34892;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">LinearMap</span><span class="w"> </span><span class="n">Matrix</span>

<span class="c1">-- &#19968;&#20123;&#26469;&#33258;&#20110; `LinearMap.toMatrix` &#26159;&#19968;&#20010;&#20195;&#25968;&#21516;&#24577;&#30340;&#20107;&#23454;&#30340;&#24341;&#29702;&#12290;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">toMatrix_comp</span>
<span class="k">#check</span><span class="w"> </span><span class="n">id_comp</span>
<span class="k">#check</span><span class="w"> </span><span class="n">comp_id</span>
<span class="k">#check</span><span class="w"> </span><span class="n">toMatrix_id</span>

<span class="c1">-- &#19968;&#20123;&#26469;&#33258;&#20110; ``Matrix.det`` &#26159;&#19968;&#20010;&#20056;&#27861;&#21333;&#20803;&#29615;&#21516;&#24577;&#30340;&#20107;&#23454;&#30340;&#24341;&#29702;&#12290;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Matrix.det_mul</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Matrix.det_one</span>

<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">B&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#966;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">End</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="bp">.</span><span class="n">det</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">&#966;</span><span class="o">)</span><span class="bp">.</span><span class="n">det</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">&#966;</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">M&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">&#966;</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;</span><span class="o">)</span><span class="w"> </span><span class="n">LinearMap.id</span>
<span class="w">  </span><span class="n">set</span><span class="w"> </span><span class="n">P&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">toMatrix</span><span class="w"> </span><span class="n">B&#39;</span><span class="w"> </span><span class="n">B</span><span class="o">)</span><span class="w"> </span><span class="n">LinearMap.id</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
</section>
<section id="id16">
<h3><span class="section-number">10.4.3. </span>&#32500;&#24230;<a class="headerlink" href="#id16" title="Link to this heading">&#61633;</a></h3>
<p>&#22238;&#21040;&#21333;&#20010;&#21521;&#37327;&#31354;&#38388;&#30340;&#24773;&#20917;&#65292;&#22522;&#20063;&#29992;&#20110;&#23450;&#20041;&#32500;&#24230;&#30340;&#27010;&#24565;&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#20877;&#27425;&#36935;&#21040;&#26377;&#38480;&#32500;&#21521;&#37327;&#31354;&#38388;&#30340;&#22522;&#26412;&#24773;&#20917;&#12290;
&#23545;&#20110;&#36825;&#26679;&#30340;&#31354;&#38388;&#65292;&#25105;&#20204;&#26399;&#26395;&#32500;&#24230;&#26159;&#19968;&#20010;&#33258;&#28982;&#25968;&#12290;&#36825;&#23601;&#26159; <code class="docutils literal notranslate"><span class="pre">Module.finrank</span></code>&#12290;&#23427;&#23558;&#22522;&#22495;&#20316;&#20026;&#26174;&#24335;&#21442;&#25968;&#65292;&#22240;&#20026;&#32473;&#23450;&#30340;&#38463;&#36125;&#23572;&#32676;&#21487;&#20197;&#26159;&#19981;&#21516;&#22495;&#19978;&#30340;&#21521;&#37327;&#31354;&#38388;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>

<span class="c1">-- `Fin n &#8594; K` &#26159;&#32500;&#24230;&#20026; `n` &#30340;&#20856;&#22411;&#31354;&#38388;&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">K</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Module.finrank_fin_fun</span><span class="w"> </span><span class="n">K</span>

<span class="c1">-- &#20316;&#20026;&#33258;&#36523;&#30340;&#21521;&#37327;&#31354;&#38388;&#65292;`&#8450;` &#30340;&#32500;&#24230;&#20026;1&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">&#8450;</span><span class="w"> </span><span class="n">&#8450;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Module.finrank_self</span><span class="w"> </span><span class="n">&#8450;</span>

<span class="c1">-- &#20294;&#20316;&#20026;&#23454;&#21521;&#37327;&#31354;&#38388;&#65292;&#23427;&#30340;&#32500;&#24230;&#20026;2&#12290;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="n">&#8450;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Complex.finrank_real_complex</span>
</pre></div>
</div>
<p>&#27880;&#24847;&#21040; <code class="docutils literal notranslate"><span class="pre">Module.finrank</span></code> &#26159;&#20026;&#20219;&#20309;&#21521;&#37327;&#31354;&#38388;&#23450;&#20041;&#30340;&#12290;&#23427;&#23545;&#20110;&#26080;&#38480;&#32500;&#21521;&#37327;&#31354;&#38388;&#36820;&#22238;&#38646;&#65292;&#23601;&#20687;&#38500;&#20197;&#38646;&#36820;&#22238;&#38646;&#19968;&#26679;&#12290;</p>
<p>&#24403;&#28982;&#65292;&#35768;&#22810;&#24341;&#29702;&#37117;&#38656;&#35201;&#26377;&#38480;&#32500;&#24230;&#30340;&#20551;&#35774;&#12290;&#36825;&#23601;&#26159; <code class="docutils literal notranslate"><span class="pre">FiniteDimensional</span></code> &#31867;&#22411;&#31867;&#30340;&#20316;&#29992;&#12290;&#20363;&#22914;&#65292;&#32771;&#34385;&#19979;&#19968;&#20010;&#20363;&#23376;&#22312;&#27809;&#26377;&#36825;&#20010;&#20551;&#35774;&#30340;&#24773;&#20917;&#19979;&#26159;&#22914;&#20309;&#22833;&#36133;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">Nontrivial</span><span class="w"> </span><span class="n">V</span><span class="w">  </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Module.finrank_pos_iff</span>
</pre></div>
</div>
<p>&#22312;&#19978;&#36848;&#38472;&#36848;&#20013;&#65292;<cite>Nontrivial V</cite> &#34920;&#31034; <cite>V</cite> &#33267;&#23569;&#21253;&#21547;&#20004;&#20010;&#19981;&#21516;&#20803;&#32032;&#12290;&#27880;&#24847;&#65292;<cite>Module.finrank_pos_iff</cite> &#27809;&#26377;&#26174;&#24335;&#21442;&#25968;&#12290;
&#20174;&#24038;&#21521;&#21491;&#20351;&#29992;&#26102;&#27809;&#38382;&#39064;&#65292;&#20294;&#20174;&#21491;&#21521;&#24038;&#20351;&#29992;&#26102;&#20250;&#36935;&#21040;&#22256;&#38590;&#65292;&#22240;&#20026; Lean &#26080;&#27861;&#20174; <cite>Nontrivial V</cite> &#36825;&#19968;&#21629;&#39064;&#20013;&#25512;&#26029;&#20986;&#22495; <cite>K</cite>&#12290;
&#27492;&#26102;&#65292;&#20351;&#29992;&#21629;&#21517;&#21442;&#25968;&#35821;&#27861;&#20250;&#24456;&#26377;&#24110;&#21161;&#65292;&#21069;&#25552;&#26159;&#30830;&#35748;&#35813;&#24341;&#29702;&#26159;&#22312;&#19968;&#20010;&#21517;&#20026; <cite>R</cite> &#30340;&#29615;&#19978;&#38472;&#36848;&#30340;&#12290;&#22240;&#27492;&#25105;&#20204;&#21487;&#20197;&#20889;&#25104;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nontrivial</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="o">(</span><span class="n">Module.finrank_pos_iff</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">K</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#19978;&#36848;&#20889;&#27861;&#30475;&#36215;&#26469;&#26377;&#20123;&#22855;&#24618;&#65292;&#22240;&#20026;&#25105;&#20204;&#24050;&#32463;&#26377;&#20102;&#20551;&#35774; <cite>h</cite>&#65292;&#22240;&#27492;&#23436;&#20840;&#21487;&#20197;&#30452;&#25509;&#20889;&#25104; <cite>Module.finrank_pos_iff.1 h</cite> &#26469;&#20351;&#29992;&#35813;&#24341;&#29702;&#12290;&#19981;&#36807;&#65292;&#20102;&#35299;&#21629;&#21517;&#21442;&#25968;&#30340;&#29992;&#27861;&#23545;&#20110;&#26356;&#22797;&#26434;&#30340;&#24773;&#20917;&#20173;&#28982;&#24456;&#26377;&#24110;&#21161;&#12290;</p>
<p>&#26681;&#25454;&#23450;&#20041;&#65292;<cite>FiniteDimensional K V</cite> &#21487;&#20197;&#36890;&#36807;&#20219;&#24847;&#19968;&#32452;&#22522;&#26469;&#21028;&#23450;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Finite</span><span class="w"> </span><span class="n">&#953;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">FiniteDimensional.of_fintype_basis</span><span class="w"> </span><span class="n">B</span>

<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finite</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">(</span><span class="n">FiniteDimensional.fintypeBasisIndex</span><span class="w"> </span><span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">finite</span>
<span class="kd">end</span>
</pre></div>
</div>
<p>&#20351;&#29992;&#19982;&#32447;&#24615;&#23376;&#31354;&#38388;&#23545;&#24212;&#30340;&#23376;&#31867;&#22411;&#20855;&#26377;&#21521;&#37327;&#31354;&#38388;&#32467;&#26500;&#65292;&#25105;&#20204;&#21487;&#20197;&#35752;&#35770;&#23376;&#31354;&#38388;&#30340;&#32500;&#24230;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span>

<span class="kn">open</span><span class="w"> </span><span class="n">Module</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="bp">&#8852;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span>
<span class="w">    </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Submodule.finrank_sup_add_finrank_inf_eq</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">F</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submodule.finrank_le</span><span class="w"> </span><span class="n">E</span>
</pre></div>
</div>
<p>&#22312;&#31532;&#19968;&#26465;&#35821;&#21477;&#20013;&#65292;&#31867;&#22411;&#27880;&#37322;&#30340;&#30446;&#30340;&#26159;&#30830;&#20445;&#23545; <code class="docutils literal notranslate"><span class="pre">Type*</span></code> &#30340;&#24378;&#21046;&#36716;&#25442;&#19981;&#20250;&#36807;&#26089;&#35302;&#21457;&#12290;</p>
<p>&#25105;&#20204;&#29616;&#22312;&#20934;&#22791;&#36827;&#34892;&#19968;&#20010;&#20851;&#20110; <code class="docutils literal notranslate"><span class="pre">finrank</span></code> &#21644;&#23376;&#31354;&#38388;&#30340;&#32451;&#20064;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">F</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">Nontrivial</span><span class="w"> </span><span class="o">(</span><span class="n">E</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submodule</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kd">end</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#36716;&#21521;&#19968;&#33324;&#30340;&#32500;&#25968;&#29702;&#35770;&#24773;&#24418;&#12290;&#27492;&#26102;&#65292;<cite>finrank</cite> &#23601;&#19981;&#20877;&#36866;&#29992;&#65292;&#20294;&#25105;&#20204;&#20381;&#28982;&#30693;&#36947;&#65292;&#23545;&#20110;&#21516;&#19968;&#21521;&#37327;&#31354;&#38388;&#30340;&#20219;&#24847;&#20004;&#32452;&#22522;&#65292;&#20854;&#32034;&#24341;&#31867;&#22411;&#20043;&#38388;&#23384;&#22312;&#19968;&#20010;&#21452;&#23556;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#26399;&#26395;&#23558;&#31209;&#23450;&#20041;&#20026;&#22522;&#25968;&#65288;cardinal&#65289;&#65292;&#21363;&#8220;&#31867;&#22411;&#38598;&#21512;&#22312;&#23384;&#22312;&#21452;&#23556;&#30340;&#31561;&#20215;&#20851;&#31995;&#19979;&#30340;&#21830;&#38598;&#8221;&#20013;&#30340;&#20803;&#32032;&#12290;</p>
<p>&#22312;&#35752;&#35770;&#22522;&#25968;&#26102;&#65292;&#38590;&#20197;&#20687;&#26412;&#20070;&#20854;&#20182;&#37096;&#20998;&#37027;&#26679;&#24573;&#30053;&#31867;&#20284;&#32599;&#32032;&#24726;&#35770;&#30340;&#22522;&#30784;&#24615;&#38382;&#39064;&#12290;&#22240;&#20026;&#19981;&#23384;&#22312;&#8220;&#25152;&#26377;&#31867;&#22411;&#30340;&#31867;&#22411;&#8221;&#65292;&#21542;&#21017;&#20250;&#23548;&#33268;&#36923;&#36753;&#30683;&#30462;&#12290;
&#36825;&#19968;&#38382;&#39064;&#36890;&#36807;&#23431;&#23449;&#23618;&#32423;&#65288;universe hierarchy&#65289;&#26469;&#35299;&#20915;&#65292;&#32780;&#25105;&#20204;&#36890;&#24120;&#20250;&#23581;&#35797;&#24573;&#30053;&#36825;&#20123;&#32454;&#33410;&#12290;</p>
<p>&#27599;&#20010;&#31867;&#22411;&#37117;&#26377;&#19968;&#20010;&#23431;&#23449;&#23618;&#32423;&#65292;&#35813;&#23618;&#32423;&#34892;&#20026;&#31867;&#20284;&#33258;&#28982;&#25968;&#12290;&#29305;&#21035;&#22320;&#65292;&#26377;&#19968;&#20010;&#38646;&#23618;&#32423;&#65292;&#23545;&#24212;&#30340;&#23431;&#23449; <cite>Type 0</cite> &#31616;&#20889;&#20026; <cite>Type</cite>&#65292;&#36825;&#20010;&#23431;&#23449;&#36275;&#20197;&#23481;&#32435;&#20960;&#20046;&#25152;&#26377;&#32463;&#20856;&#25968;&#23398;&#23545;&#35937;&#65292;&#27604;&#22914; <cite>&#8469;</cite> &#21644; <cite>&#8477;</cite> &#37117;&#23646;&#20110;&#31867;&#22411; <cite>Type</cite>&#12290;&#27599;&#20010;&#23618;&#32423; <cite>u</cite> &#26377;&#19968;&#20010;&#21518;&#32487;&#23618;&#32423; <cite>u + 1</cite>&#65292;&#19988; <cite>Type u</cite> &#30340;&#31867;&#22411;&#26159; <cite>Type (u + 1)</cite>&#12290;</p>
<p>&#20294;&#23431;&#23449;&#23618;&#32423;&#19981;&#26159;&#33258;&#28982;&#25968;&#65292;&#23427;&#20204;&#26412;&#36136;&#19981;&#21516;&#19988;&#27809;&#26377;&#23545;&#24212;&#30340;&#31867;&#22411;&#12290;&#20363;&#22914;&#65292;&#26080;&#27861;&#22312; Lean &#20013;&#22768;&#26126; <cite>u &#8800; u + 1</cite>&#65292;&#22240;&#20026;&#19981;&#23384;&#22312;&#19968;&#20010;&#31867;&#22411;&#21487;&#20197;&#34920;&#36798;&#36825;&#20010;&#21629;&#39064;&#12290;&#21363;&#20351;&#22768;&#26126; <cite>Type u &#8800; Type (u+1)</cite> &#20063;&#27809;&#26377;&#24847;&#20041;&#65292;&#22240;&#20026;&#20004;&#32773;&#23646;&#20110;&#19981;&#21516;&#30340;&#31867;&#22411;&#12290;</p>
<p>&#24403;&#25105;&#20204;&#20889; <cite>Type*</cite> &#26102;&#65292;Lean &#20250;&#33258;&#21160;&#25554;&#20837;&#19968;&#20010;&#21517;&#20026; <cite>u_n</cite> &#30340;&#23431;&#23449;&#21464;&#37327;&#65292;&#20854;&#20013; <cite>n</cite> &#26159;&#19968;&#20010;&#25968;&#23383;&#65292;&#20801;&#35768;&#23450;&#20041;&#21644;&#38472;&#36848;&#22312;&#25152;&#26377;&#23431;&#23449;&#23618;&#32423;&#20013;&#25104;&#31435;&#12290;</p>
<p>&#32473;&#23450;&#23431;&#23449;&#23618;&#32423; <cite>u</cite>&#65292;&#25105;&#20204;&#21487;&#20197;&#22312; <cite>Type u</cite> &#19978;&#23450;&#20041;&#31561;&#20215;&#20851;&#31995;&#65306;&#24403;&#19988;&#20165;&#24403;&#20004;&#20010;&#31867;&#22411; <cite>&#945;</cite> &#21644; <cite>&#946;</cite> &#23384;&#22312;&#21452;&#23556;&#26102;&#23427;&#20204;&#31561;&#20215;&#12290;
&#21830;&#31867;&#22411; <cite>Cardinal.{u}</cite> &#23646;&#20110; <cite>Type (u + 1)</cite>&#65292;&#33457;&#25324;&#21495;&#34920;&#31034;&#36825;&#26159;&#19968;&#20010;&#23431;&#23449;&#21464;&#37327;&#12290;&#31867;&#22411; <cite>&#945; : Type u</cite> &#22312;&#21830;&#20013;&#30340;&#20687;&#20026; <cite>Cardinal.mk &#945; : Cardinal.{u}</cite>&#12290;</p>
<p>&#20294;&#25105;&#20204;&#19981;&#33021;&#30452;&#25509;&#27604;&#36739;&#19981;&#21516;&#23431;&#23449;&#23618;&#32423;&#20013;&#30340;&#22522;&#25968;&#12290;&#22240;&#27492;&#25216;&#26415;&#19978;&#35762;&#65292;&#19981;&#33021;&#23558;&#21521;&#37327;&#31354;&#38388; <cite>V</cite> &#30340;&#31209;&#23450;&#20041;&#20026;&#32034;&#24341; <cite>V</cite> &#22522;&#30340;&#25152;&#26377;&#31867;&#22411;&#30340;&#22522;&#25968;&#12290;
&#30456;&#21453;&#65292;&#31209;&#23450;&#20041;&#20026; <cite>Module.rank K V</cite>&#65292;&#21363; <cite>V</cite> &#20013;&#25152;&#26377;&#32447;&#24615;&#26080;&#20851;&#38598;&#22522;&#25968;&#30340;&#19978;&#30830;&#30028;&#12290;&#22914;&#26524; <cite>V</cite> &#23646;&#20110;&#23431;&#23449;&#23618;&#32423; <cite>u</cite>&#65292;&#21017;&#20854;&#31209;&#23646;&#20110; <cite>Cardinal.{u}</cite> &#31867;&#22411;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="c1">-- Type u_2</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Module.rank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="c1">-- Cardinal.{u_2}</span>
</pre></div>
</div>
<p>&#36825;&#20010;&#23450;&#20041;&#20173;&#28982;&#21487;&#20197;&#19982;&#22522;&#32852;&#31995;&#36215;&#26469;&#12290;&#23454;&#38469;&#19978;&#65292;&#23431;&#23449;&#23618;&#32423;&#19978;&#23384;&#22312;&#19968;&#20010;&#20132;&#25442;&#30340; <cite>max</cite> &#36816;&#31639;&#65292;&#23545;&#20110;&#20219;&#24847;&#20004;&#20010;&#23431;&#23449;&#23618;&#32423; <cite>u</cite> &#21644; <cite>v</cite>&#65292;&#23384;&#22312;&#19968;&#20010;&#25805;&#20316;
<cite>Cardinal.lift.{u, v} : Cardinal.{v} &#8594; Cardinal.{max v u}</cite>&#65292;&#35813;&#25805;&#20316;&#20801;&#35768;&#23558;&#22522;&#25968;&#25552;&#21319;&#21040;&#20849;&#21516;&#30340;&#23431;&#23449;&#23618;&#32423;&#20013;&#65292;&#20174;&#32780;&#38472;&#36848;&#32500;&#25968;&#23450;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">universe</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="c1">-- `u` &#21644; `v` &#23558;&#34920;&#31034;&#23431;&#23449;&#23618;&#32423;</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#953;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>
<span class="w">         </span><span class="o">{</span><span class="n">&#953;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">v</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">B&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Basis</span><span class="w"> </span><span class="n">&#953;&#39;</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Cardinal.lift</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">u</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="bp">.</span><span class="n">mk</span><span class="w"> </span><span class="n">&#953;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Cardinal.lift</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="bp">.</span><span class="n">mk</span><span class="w"> </span><span class="n">&#953;&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">mk_eq_mk_of_basis</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">B&#39;</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#21487;&#20197;&#23558;&#26377;&#38480;&#32500;&#24773;&#20917;&#19982;&#27492;&#35752;&#35770;&#32852;&#31995;&#36215;&#26469;&#65292;&#20351;&#29992;&#20174;&#33258;&#28982;&#25968;&#21040;&#26377;&#38480;&#22522;&#25968;&#30340;&#24378;&#21046;&#36716;&#25442;&#65288;&#26356;&#20934;&#30830;&#22320;&#35828;&#65292;&#26159;&#29983;&#27963;&#22312; <code class="docutils literal notranslate"><span class="pre">Cardinal.{v}</span></code> &#20013;&#30340;&#26377;&#38480;&#22522;&#25968;&#65292;&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">v</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">V</span></code> &#30340;&#23431;&#23449;&#23618;&#32423;&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">FiniteDimensional</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="o">]</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">(</span><span class="n">Module.finrank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Cardinal</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Module.rank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Module.finrank_eq_rank</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">V</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C09_Groups_and_Rings.html" class="btn btn-neutral float-left" title="9. &#32676;&#19982;&#29615;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C11_Topology.html" class="btn btn-neutral float-right" title="11. &#25299;&#25169;&#23398;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>