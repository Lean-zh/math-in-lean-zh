

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8. &#23618;&#27425;&#32467;&#26500; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="9. &#32676;&#19982;&#29615;" href="C09_Groups_and_Rings.html" />
    <link rel="prev" title="7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;" href="C07_Structures.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. &#21021;&#31561;&#25968;&#35770;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C06_Discrete_Mathematics.html">6. &#31163;&#25955;&#25968;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C07_Structures.html">7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">8. &#23618;&#27425;&#32467;&#26500;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#section-hierarchies-basics">8.1. &#22522;&#30784;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#section-hierarchies-morphisms">8.2. &#24577;&#23556;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#section-hierarchies-subobjects">8.3. &#23376;&#23545;&#35937;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C09_Groups_and_Rings.html">9. &#32676;&#19982;&#29615;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Linear_Algebra.html">10. &#32447;&#24615;&#20195;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Topology.html">11. &#25299;&#25169;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Differential_Calculus.html">12. &#24494;&#20998;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C13_Integration_and_Measure_Theory.html">13. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">8. </span>&#23618;&#27425;&#32467;&#26500;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C08_Hierarchies.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="hierarchies">
<span id="id1"></span><h1><span class="section-number">8. </span>&#23618;&#27425;&#32467;&#26500;<a class="headerlink" href="#hierarchies" title="Link to this heading">&#61633;</a></h1>
<p>&#22312; <a class="reference internal" href="C07_Structures.html#structures"><span class="std std-numref">&#31532; 7 &#31456;</span></a> &#20013;&#65292;&#25105;&#20204;&#24050;&#32463;&#20102;&#35299;&#20102;&#22914;&#20309;&#23450;&#20041;&#32676;&#31867;&#24182;&#21019;&#24314;&#27492;&#31867;&#30340;&#23454;&#20363;&#65292;&#20197;&#21450;&#22914;&#20309;&#21019;&#24314;&#20132;&#25442;&#29615;&#31867;&#30340;&#23454;&#20363;&#12290;&#20294;&#24403;&#28982;&#36825;&#37324;&#23384;&#22312;&#19968;&#20010;&#23618;&#27425;&#32467;&#26500;&#65306;&#20132;&#25442;&#29615;&#23588;&#20854;&#26159;&#19968;&#31181;&#21152;&#27861;&#32676;&#12290;&#22312;&#26412;&#31456;&#20013;&#65292;&#25105;&#20204;&#23558;&#30740;&#31350;&#22914;&#20309;&#26500;&#24314;&#36825;&#26679;&#30340;&#23618;&#27425;&#32467;&#26500;&#12290;&#23427;&#20204;&#20986;&#29616;&#22312;&#25968;&#23398;&#30340;&#25152;&#26377;&#20998;&#25903;&#20013;&#65292;&#20294;&#22312;&#26412;&#31456;&#20013;&#65292;&#37325;&#28857;&#23558;&#25918;&#22312;&#20195;&#25968;&#31034;&#20363;&#19978;&#12290;
&#22312;&#26356;&#22810;&#22320;&#35752;&#35770;&#22914;&#20309;&#20351;&#29992;&#29616;&#26377;&#30340;&#23618;&#32423;&#32467;&#26500;&#20043;&#21069;&#65292;&#23601;&#26469;&#25506;&#35752;&#22914;&#20309;&#26500;&#24314;&#23618;&#32423;&#32467;&#26500;&#20284;&#20046;&#20026;&#26102;&#23578;&#26089;&#12290;&#20294;&#35201;&#20351;&#29992;&#23618;&#32423;&#32467;&#26500;&#65292;&#23601;&#38656;&#35201;&#23545;&#20854;&#24213;&#23618;&#25216;&#26415;&#26377;&#19968;&#23450;&#30340;&#20102;&#35299;&#12290;&#25152;&#20197;&#24744;&#25110;&#35768;&#36824;&#26159;&#24212;&#35813;&#35835;&#19968;&#19979;&#36825;&#19968;&#31456;&#65292;&#19981;&#36807;&#22312;&#31532;&#19968;&#27425;&#38405;&#35835;&#26102;&#19981;&#24517;&#22826;&#21162;&#21147;&#35760;&#20303;&#25152;&#26377;&#20869;&#23481;&#65292;&#20808;&#35835;&#23436;&#21518;&#38754;&#30340;&#31456;&#33410;&#65292;&#28982;&#21518;&#20877;&#22238;&#36807;&#22836;&#26469;&#37325;&#35835;&#36825;&#19968;&#31456;&#12290;
&#22312;&#36825;&#19968;&#31456;&#20013;&#65292;&#25105;&#20204;&#23558;&#37325;&#26032;&#23450;&#20041;&#65288;&#26356;&#31616;&#21333;&#30340;&#29256;&#26412;&#65289;&#20986;&#29616;&#22312; Mathlib &#20013;&#30340;&#35768;&#22810;&#20869;&#23481;&#65292;&#22240;&#27492;&#25105;&#20204;&#23558;&#20351;&#29992;&#32034;&#24341;&#26469;&#21306;&#20998;&#25105;&#20204;&#30340;&#29256;&#26412;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#23558;&#25226;&#25105;&#20204;&#30340;&#29256;&#26412;&#30340; <code class="docutils literal notranslate"><span class="pre">Ring</span></code> &#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">Ring&#8321;</span></code> &#12290;&#30001;&#20110;&#25105;&#20204;&#23558;&#36880;&#27493;&#20171;&#32461;&#26356;&#24378;&#22823;&#30340;&#24418;&#24335;&#21270;&#32467;&#26500;&#30340;&#26041;&#27861;&#65292;&#36825;&#20123;&#32034;&#24341;&#26377;&#26102;&#20250;&#36229;&#36807; 1&#12290;</p>
<section id="section-hierarchies-basics">
<span id="id2"></span><h2><span class="section-number">8.1. </span>&#22522;&#30784;<a class="headerlink" href="#section-hierarchies-basics" title="Link to this heading">&#61633;</a></h2>
<p>&#22312;Lean&#30340;&#25152;&#26377;&#23618;&#27425;&#32467;&#26500;&#30340;&#26368;&#24213;&#23618;&#65292;&#25105;&#20204;&#33021;&#25214;&#21040;&#25215;&#36733;&#25968;&#25454;&#30340;&#31867;&#12290;&#19979;&#38754;&#36825;&#20010;&#31867;&#35760;&#24405;&#20102;&#32473;&#23450;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20855;&#26377;&#19968;&#20010;&#34987;&#31216;&#20026; <code class="docutils literal notranslate"><span class="pre">one</span></code> &#30340;&#29305;&#27530;&#20803;&#32032;&#12290;&#22312;&#29616;&#38454;&#27573;&#65292;&#23427;&#27809;&#26377;&#20219;&#20309;&#23646;&#24615;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">One&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- The element one -/</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
</pre></div>
</div>
<p>&#30001;&#20110;&#22312;&#26412;&#31456;&#20013;&#25105;&#20204;&#23558;&#26356;&#39057;&#32321;&#22320;&#20351;&#29992;&#31867;&#65292;&#25152;&#20197;&#25105;&#20204;&#38656;&#35201;&#36827;&#19968;&#27493;&#20102;&#35299; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#21629;&#20196;&#30340;&#20316;&#29992;&#12290;
&#39318;&#20808;&#65292;&#19978;&#36848;&#30340; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#21629;&#20196;&#23450;&#20041;&#20102;&#19968;&#20010;&#32467;&#26500;&#20307; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span></code> &#65292;&#20854;&#21442;&#25968;&#20026; <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">:</span> <span class="pre">Type</span></code> &#65292;&#19988;&#21482;&#26377;&#19968;&#20010;&#23383;&#27573; <code class="docutils literal notranslate"><span class="pre">one</span></code> &#12290;&#23427;&#36824;&#26631;&#35760;&#27492;&#32467;&#26500;&#20307;&#20026;&#31867;&#65292;&#36825;&#26679;&#23545;&#20110;&#26576;&#20123;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span> <span class="pre">&#945;</span></code> &#31867;&#22411;&#30340;&#21442;&#25968;&#65292;&#21482;&#35201;&#23427;&#20204;&#34987;&#26631;&#35760;&#20026;&#23454;&#20363;&#38544;&#24335;&#21442;&#25968;&#65288;&#21363;&#20986;&#29616;&#22312;&#26041;&#25324;&#21495;&#20013;&#65289;&#65292;&#23601;&#21487;&#20197;&#36890;&#36807;&#23454;&#20363;&#35299;&#26512;&#36807;&#31243;&#36827;&#34892;&#25512;&#26029;&#12290;
&#36825;&#20004;&#20010;&#25928;&#26524;&#20063;&#21487;&#20197;&#36890;&#36807;&#24102;&#26377; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#23646;&#24615;&#30340; <code class="docutils literal notranslate"><span class="pre">structure</span></code> &#21629;&#20196;&#26469;&#23454;&#29616;&#65292;&#21363;&#20889;&#25104; <code class="docutils literal notranslate"><span class="pre">&#64;[class]</span> <span class="pre">structure</span></code> &#30340;&#24418;&#24335;&#12290;&#20294; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#21629;&#20196;&#36824;&#30830;&#20445;&#20102; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span> <span class="pre">&#945;</span></code> &#22312;&#20854;&#33258;&#36523;&#30340;&#23383;&#27573;&#20013;&#20197;&#23454;&#20363;&#38544;&#24335;&#21442;&#25968;&#30340;&#24418;&#24335;&#20986;&#29616;&#12290;&#27604;&#36739;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">One&#8321;.one</span><span class="w"> </span><span class="c1">-- One&#8321;.one {&#945; : Type} [self : One&#8321; &#945;] : &#945;</span>

<span class="kd">@[</span><span class="n">class</span><span class="kd">]</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="n">One&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- The element one -/</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">One&#8322;.one</span>
</pre></div>
</div>
<p>&#22312;&#31532;&#20108;&#27425;&#26816;&#26597;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040; <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">:</span> <span class="pre">One&#8322;</span> <span class="pre">&#945;</span></code> &#26159;&#19968;&#20010;&#26174;&#24335;&#21442;&#25968;&#12290;
&#35753;&#25105;&#20204;&#30830;&#20445;&#31532;&#19968;&#20010;&#29256;&#26412;&#30830;&#23454;&#21487;&#20197;&#22312;&#27809;&#26377;&#20219;&#20309;&#26174;&#24335;&#21442;&#25968;&#30340;&#24773;&#20917;&#19979;&#20351;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">One&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">One&#8321;.one</span>
</pre></div>
</div>
<p>&#22791;&#27880;&#65306;&#22312;&#19978;&#36848;&#31034;&#20363;&#20013;&#65292;&#21442;&#25968; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span> <span class="pre">&#945;</span></code> &#34987;&#26631;&#35760;&#20026;&#23454;&#20363;&#38544;&#24335;&#65292;&#36825;&#26377;&#28857;&#34850;&#65292;&#22240;&#20026;&#36825;&#20165;&#24433;&#21709;&#35813;&#22768;&#26126;&#30340; <strong>&#20351;&#29992;</strong> &#65292;&#32780;&#30001; <code class="docutils literal notranslate"><span class="pre">example</span></code> &#21629;&#20196;&#21019;&#24314;&#30340;&#22768;&#26126;&#26080;&#27861;&#34987;&#20351;&#29992;&#12290;&#19981;&#36807;&#65292;&#36825;&#20351;&#25105;&#20204;&#33021;&#22815;&#36991;&#20813;&#20026;&#35813;&#21442;&#25968;&#21629;&#21517;&#65292;&#26356;&#37325;&#35201;&#30340;&#26159;&#65292;&#23427;&#24320;&#22987;&#20859;&#25104;&#23558; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span> <span class="pre">&#945;</span></code> &#21442;&#25968;&#26631;&#35760;&#20026;&#23454;&#20363;&#38544;&#24335;&#30340;&#33391;&#22909;&#20064;&#24815;&#12290;</p>
<dl class="simple">
<dt>&#21478;&#19968;&#20010;&#38656;&#35201;&#27880;&#24847;&#30340;&#22320;&#26041;&#26159;&#65292;&#21482;&#26377;&#24403; Lean &#30693;&#36947; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#26159;&#20160;&#20040;&#26102;&#65292;&#19978;&#36848;&#25152;&#26377;&#20869;&#23481;&#25165;&#20250;&#36215;&#20316;&#29992;&#12290;&#22312;&#19978;&#36848;&#31034;&#20363;&#20013;&#65292;&#22914;&#26524;&#30465;&#30053;&#31867;&#22411;&#26631;&#27880; <code class="docutils literal notranslate"><span class="pre">:</span> <span class="pre">&#945;</span></code> &#65292;&#21017;&#20250;&#29983;&#25104;&#31867;&#20284;&#20197;&#19979;&#30340;&#38169;&#35823;&#28040;&#24687;&#65306;</dt><dd><p><code class="docutils literal notranslate"><span class="pre">typeclass</span> <span class="pre">instance</span> <span class="pre">problem</span> <span class="pre">is</span> <span class="pre">stuck,</span> <span class="pre">it</span> <span class="pre">is</span> <span class="pre">often</span> <span class="pre">due</span> <span class="pre">to</span> <span class="pre">metavariables</span> <span class="pre">One&#8321;</span> <span class="pre">(?m.263</span> <span class="pre">&#945;)</span></code></p>
</dd>
</dl>
<p>&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">?m.263</span> <span class="pre">&#945;</span></code> &#34920;&#31034;&#8220;&#20381;&#36182;&#20110; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#26576;&#31181;&#31867;&#22411;&#8221;&#65288;263 &#21482;&#26159;&#19968;&#20010;&#33258;&#21160;&#29983;&#25104;&#30340;&#32034;&#24341;&#65292;&#29992;&#20110;&#21306;&#20998;&#22810;&#20010;&#26410;&#30693;&#20107;&#29289;&#65289;&#12290;&#21478;&#19968;&#31181;&#36991;&#20813;&#27492;&#38382;&#39064;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;&#31867;&#22411;&#27880;&#35299;&#65292;&#20363;&#22914;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">One&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">One&#8321;.one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
</pre></div>
</div>
<p>&#22914;&#26524;&#24744;&#22312; <a class="reference internal" href="C03_Logic.html#sequences-and-convergence"><span class="std std-numref">Section 3.6</span></a> &#20013;&#23581;&#35797;&#22788;&#29702;&#25968;&#21015;&#30340;&#26497;&#38480;&#26102;&#36935;&#21040;&#36807;&#36825;&#20010;&#38382;&#39064;&#65292;&#37027;&#20040;&#24744;&#21487;&#33021;&#24050;&#32463;&#36935;&#21040;&#36807;&#36825;&#31181;&#24773;&#20917;&#65292;&#27604;&#22914;&#24744;&#35797;&#22270;&#22768;&#26126; <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">1</span></code> &#65292;&#20294;&#27809;&#26377;&#21578;&#35785; Lean &#24744;&#26159;&#24819;&#34920;&#31034;&#33258;&#28982;&#25968;&#20043;&#38388;&#30340;&#19981;&#31561;&#24335;&#36824;&#26159;&#23454;&#25968;&#20043;&#38388;&#30340;&#19981;&#31561;&#24335;&#12290;</p>
<p>&#25105;&#20204;&#30340;&#19979;&#19968;&#20010;&#20219;&#21153;&#26159;&#20026; <code class="docutils literal notranslate"><span class="pre">One&#8321;.one</span></code> &#25351;&#23450;&#19968;&#20010;&#31526;&#21495;&#12290;&#30001;&#20110;&#25105;&#20204;&#19981;&#24819;&#19982;&#20869;&#32622;&#30340; <code class="docutils literal notranslate"><span class="pre">1</span></code> &#31526;&#21495;&#21457;&#29983;&#20914;&#31361;&#65292;&#25105;&#20204;&#23558;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">&#120793;</span></code> &#12290;&#36825;&#26159;&#36890;&#36807;&#20197;&#19979;&#21629;&#20196;&#23454;&#29616;&#30340;&#65292;&#20854;&#20013;&#31532;&#19968;&#34892;&#21578;&#35785; Lean &#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">One&#8321;.one</span></code> &#30340;&#25991;&#26723;&#20316;&#20026;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">&#120793;</span></code> &#30340;&#25991;&#26723;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">inherit_doc</span><span class="kd">]</span>
<span class="kd">notation</span><span class="w"> </span><span class="s2">&quot;&#120793;&quot;</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">One&#8321;.one</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">One&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">&#120793;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">One&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">&#120793;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#24819;&#35201;&#19968;&#20010;&#35760;&#24405;&#20108;&#20803;&#36816;&#31639;&#30340;&#25968;&#25454;&#25215;&#36733;&#31867;&#12290;&#30446;&#21069;&#25105;&#20204;&#19981;&#24819;&#22312;&#21152;&#27861;&#21644;&#20056;&#27861;&#20043;&#38388;&#20570;&#20986;&#36873;&#25321;&#65292;&#25152;&#20197;&#25105;&#20204;&#23558;&#20351;&#29992;&#33777;&#24418;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Dia&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">dia</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">infixl</span><span class="o">:</span><span class="mi">70</span><span class="w"> </span><span class="s2">&quot; &#8900; &quot;</span><span class="w">   </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">Dia&#8321;.dia</span>
</pre></div>
</div>
<p>&#19982; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span></code> &#31034;&#20363;&#19968;&#26679;&#65292;&#27492;&#26102;&#35813;&#36816;&#31639;&#27809;&#26377;&#20219;&#20309;&#23646;&#24615;&#12290;&#29616;&#22312;&#35753;&#25105;&#20204;&#23450;&#20041;&#19968;&#20010;&#21322;&#32676;&#32467;&#26500;&#31867;&#65292;&#20854;&#20013;&#36816;&#31639;&#29992; <code class="docutils literal notranslate"><span class="pre">&#8900;</span></code> &#34920;&#31034;&#12290;&#30446;&#21069;&#65292;&#25105;&#20204;&#25163;&#21160;&#23558;&#20854;&#23450;&#20041;&#20026;&#20855;&#26377;&#20004;&#20010;&#23383;&#27573;&#30340;&#32467;&#26500;&#65292;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Dia&#8321;</span></code> &#23454;&#20363;&#21644;&#19968;&#20010;&#20540;&#20026; <code class="docutils literal notranslate"><span class="pre">Prop</span></code> &#30340;&#23383;&#27573; <code class="docutils literal notranslate"><span class="pre">dia_assoc</span></code> &#65292;&#29992;&#20110;&#26029;&#35328; <code class="docutils literal notranslate"><span class="pre">&#8900;</span></code> &#30340;&#32467;&#21512;&#24615;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Semigroup&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toDia&#8321;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Dia&#8321;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="sd">/-- Diamond is associative -/</span>
<span class="w">  </span><span class="n">dia_assoc</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">c</span><span class="o">)</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#22312;&#22768;&#26126; <code class="docutils literal notranslate"><span class="pre">dia_assoc</span></code> &#26102;&#65292;&#20808;&#21069;&#23450;&#20041;&#30340;&#23383;&#27573; <code class="docutils literal notranslate"><span class="pre">toDia&#8321;</span></code> &#22312;&#26412;&#22320;&#19978;&#19979;&#25991;&#20013;&#65292;&#22240;&#27492;&#22312; Lean &#25628;&#32034; <code class="docutils literal notranslate"><span class="pre">Dia&#8321;</span> <span class="pre">&#945;</span></code> &#30340;&#23454;&#20363;&#20197;&#29702;&#35299; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&#8900;</span> <span class="pre">b</span></code> &#26102;&#21487;&#20197;&#20351;&#29992;&#23427;&#12290;&#20294;&#26159;&#36825;&#20010; <code class="docutils literal notranslate"><span class="pre">toDia&#8321;</span></code> &#23383;&#27573;&#19981;&#20250;&#25104;&#20026;&#31867;&#22411;&#31867;&#23454;&#20363;&#25968;&#25454;&#24211;&#30340;&#19968;&#37096;&#20998;&#12290;&#22240;&#27492;&#65292;&#25191;&#34892; <code class="docutils literal notranslate"><span class="pre">example</span> <span class="pre">{&#945;</span> <span class="pre">:</span> <span class="pre">Type}</span> <span class="pre">[Semigroup&#8321;</span> <span class="pre">&#945;]</span> <span class="pre">(a</span> <span class="pre">b</span> <span class="pre">:</span> <span class="pre">&#945;)</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">:=</span> <span class="pre">a</span> <span class="pre">&#8900;</span> <span class="pre">b</span></code> &#23558;&#20250;&#22833;&#36133;&#12290;&#38169;&#35823;&#28040;&#24687; <code class="docutils literal notranslate"><span class="pre">failed</span> <span class="pre">to</span> <span class="pre">synthesize</span> <span class="pre">instance</span> <span class="pre">Dia&#8321;</span> <span class="pre">&#945;</span></code> &#12290;</p>
<p>&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#31245;&#21518;&#28155;&#21152; <code class="docutils literal notranslate"><span class="pre">instance</span></code> &#23646;&#24615;&#26469;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">attribute</span><span class="w"> </span><span class="o">[</span><span class="kd">instance</span><span class="o">]</span><span class="w"> </span><span class="n">Semigroup&#8321;.toDia&#8321;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Semigroup&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">b</span>
</pre></div>
</div>
<p>&#22312;&#26500;&#24314;&#20043;&#21069;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#31181;&#27604;&#26174;&#24335;&#32534;&#20889;&#35832;&#22914; <cite>toDia&#8321;</cite> &#36825;&#26679;&#30340;&#23383;&#27573;&#24182;&#25163;&#21160;&#28155;&#21152;&#23454;&#20363;&#23646;&#24615;&#26356;&#26041;&#20415;&#30340;&#26041;&#24335;&#26469;&#25193;&#23637;&#32467;&#26500;&#12290; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#20351;&#29992;&#22914;&#19979;&#35821;&#27861;&#36890;&#36807; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#25903;&#25345;&#36825;&#19968;&#28857;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Semigroup&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Dia&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- Diamond is associative -/</span>
<span class="w">  </span><span class="n">dia_assoc</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">c</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Semigroup&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">b</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#36825;&#31181;&#35821;&#27861;&#22312; <code class="docutils literal notranslate"><span class="pre">structure</span></code> &#21629;&#20196;&#20013;&#20063;&#26159;&#21487;&#29992;&#30340;&#65292;&#23613;&#31649;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#23427;&#20165;&#35299;&#20915;&#20102;&#32534;&#20889;&#35832;&#22914; <cite>toDia&#8321;</cite> &#36825;&#26679;&#30340;&#23383;&#27573;&#30340;&#40635;&#28902;&#65292;&#22240;&#20026;&#22312;&#37027;&#31181;&#24773;&#20917;&#19979;&#27809;&#26377;&#23454;&#20363;&#38656;&#35201;&#23450;&#20041;&#12290;</p>
<p>&#29616;&#22312;&#35753;&#25105;&#20204;&#23581;&#35797;&#23558;&#19968;&#20010;&#33777;&#24418;&#36816;&#31639;&#21644;&#19968;&#20010;&#29305;&#27530;&#25805;&#20316;&#32467;&#21512;&#36215;&#26469;&#65292;&#24182;&#29992;&#20844;&#29702;&#35828;&#26126;&#36825;&#20010;&#20803;&#32032;&#22312;&#20004;&#36793;&#37117;&#26159;&#38646;&#20803;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">DiaOneClass&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">One&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">Dia&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- &#23384;&#22312;&#19968;&#20010;&#23545;&#20110;&#33777;&#24418;&#36816;&#31639;&#30340;&#24038;&#38646;&#20803;&#12290; -/</span>
<span class="w">  </span><span class="n">one_dia</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="mi">&#120793;</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span>
<span class="w">  </span><span class="sd">/-- &#23384;&#22312;&#19968;&#20010;&#23545;&#20110;&#33777;&#24418;&#36816;&#31639;&#30340;&#21491;&#38646;&#20803;&#12290; -/</span>
<span class="w">  </span><span class="n">dia_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="mi">&#120793;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>&#22312;&#19979;&#19968;&#20010;&#31034;&#20363;&#20013;&#65292;&#25105;&#20204;&#21578;&#35785; Lean <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20855;&#26377; <code class="docutils literal notranslate"><span class="pre">DiaOneClass&#8321;</span></code> &#32467;&#26500;&#65292;&#24182;&#22768;&#26126;&#19968;&#20010;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Dia&#8321;</span></code> &#23454;&#20363;&#21644; <code class="docutils literal notranslate"><span class="pre">One&#8321;</span></code> &#23454;&#20363;&#30340;&#23646;&#24615;&#12290;&#20026;&#20102;&#26597;&#30475; Lean &#22914;&#20309;&#25214;&#21040;&#36825;&#20123;&#23454;&#20363;&#65292;&#25105;&#20204;&#35774;&#32622;&#20102;&#19968;&#20010;&#36319;&#36394;&#36873;&#39033;&#65292;&#20854;&#32467;&#26524;&#21487;&#20197;&#22312; Infoview &#20013;&#30475;&#21040;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#35813;&#32467;&#26524;&#30456;&#24403;&#31616;&#30053;&#65292;&#20294;&#21487;&#20197;&#36890;&#36807;&#28857;&#20987;&#20197;&#40657;&#33394;&#31661;&#22836;&#32467;&#23614;&#30340;&#34892;&#26469;&#23637;&#24320;&#12290;&#23427;&#21253;&#25324; Lean &#22312;&#25317;&#26377;&#36275;&#22815;&#30340;&#31867;&#22411;&#20449;&#24687;&#20043;&#21069;&#23581;&#35797;&#26597;&#25214;&#23454;&#20363;&#20294;&#26410;&#25104;&#21151;&#30340;&#23581;&#35797;&#12290;&#25104;&#21151;&#30340;&#23581;&#35797;&#30830;&#23454;&#28041;&#21450;&#30001; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#35821;&#27861;&#29983;&#25104;&#30340;&#23454;&#20363;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">set_option</span><span class="w"> </span><span class="n">trace.Meta.synthInstance</span><span class="w"> </span><span class="n">true</span><span class="w"> </span><span class="k">in</span>
<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DiaOneClass&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Prop</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#22312;&#32452;&#21512;&#29616;&#26377;&#31867;&#26102;&#65292;&#25105;&#20204;&#19981;&#38656;&#35201;&#21253;&#21547;&#39069;&#22806;&#30340;&#23383;&#27573;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558;&#21322;&#32676;&#23450;&#20041;&#20026;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Monoid&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Semigroup&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">DiaOneClass&#8321;</span><span class="w"> </span><span class="n">&#945;</span>
</pre></div>
</div>
<p>&#34429;&#28982;&#19978;&#36848;&#23450;&#20041;&#30475;&#36215;&#26469;&#24456;&#31616;&#21333;&#65292;&#20294;&#23427;&#38544;&#34255;&#20102;&#19968;&#20010;&#37325;&#35201;&#30340;&#24494;&#22937;&#20043;&#22788;&#12290; <code class="docutils literal notranslate"><span class="pre">Semigroup&#8321;</span> <span class="pre">&#945;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">DiaOneClass&#8321;</span> <span class="pre">&#945;</span></code> &#37117;&#25193;&#23637;&#20102; <code class="docutils literal notranslate"><span class="pre">Dia&#8321;</span> <span class="pre">&#945;</span></code> &#65292;&#25152;&#20197;&#26377;&#20154;&#21487;&#33021;&#20250;&#25285;&#24515;&#65292;&#25317;&#26377;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Monoid&#8321;</span> <span class="pre">&#945;</span></code> &#23454;&#20363;&#20250;&#22312; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#20135;&#29983;&#20004;&#20010;&#19981;&#30456;&#20851;&#30340;&#33777;&#24418;&#36816;&#31639;&#65292;&#19968;&#20010;&#26469;&#33258;&#23383;&#27573; <code class="docutils literal notranslate"><span class="pre">Monoid&#8321;.toSemigroup&#8321;</span></code> &#65292;&#21478;&#19968;&#20010;&#26469;&#33258;&#23383;&#27573; <code class="docutils literal notranslate"><span class="pre">Monoid&#8321;.toDiaOneClass&#8321;</span></code> &#12290;</p>
<p>&#23454;&#38469;&#19978;&#65292;&#22914;&#26524;&#25105;&#20204;&#23581;&#35797;&#36890;&#36807;&#20197;&#19979;&#26041;&#24335;&#25163;&#21160;&#26500;&#24314;&#19968;&#20010;&#21333;&#23376;&#31867;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Monoid&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toSemigroup&#8321;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Semigroup&#8321;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">toDiaOneClass&#8321;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">DiaOneClass&#8321;</span><span class="w"> </span><span class="n">&#945;</span>
</pre></div>
</div>
<dl class="simple">
<dt>&#37027;&#20040;&#25105;&#20204;&#20250;&#24471;&#21040;&#20004;&#20010;&#23436;&#20840;&#19981;&#30456;&#20851;&#30340;&#33777;&#24418;&#36816;&#31639;</dt><dd><p><code class="docutils literal notranslate"><span class="pre">Monoid&#8322;.toSemigroup&#8321;.toDia&#8321;.dia</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Monoid&#8322;.toDiaOneClass&#8321;.toDia&#8321;.dia</span></code> &#12290;</p>
</dd>
</dl>
<p>&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#35821;&#27861;&#29983;&#25104;&#30340;&#29256;&#26412;&#19981;&#23384;&#22312;&#27492;&#32570;&#38519;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid&#8321;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="o">(</span><span class="n">Monoid&#8321;.toSemigroup&#8321;.toDia&#8321;.dia</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Monoid&#8321;.toDiaOneClass&#8321;.toDia&#8321;.dia</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#25152;&#20197; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#21629;&#20196;&#20026;&#25105;&#20204;&#20570;&#20102;&#20123;&#31070;&#22855;&#30340;&#20107;&#65288; <code class="docutils literal notranslate"><span class="pre">structure</span></code> &#21629;&#20196;&#20063;&#20250;&#36825;&#26679;&#20570;&#65289;&#12290;&#26597;&#30475;&#31867;&#30340;&#26500;&#36896;&#20989;&#25968;&#26159;&#20102;&#35299;&#20854;&#23383;&#27573;&#30340;&#31616;&#20415;&#26041;&#27861;&#12290;&#27604;&#36739;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="c">/-</span><span class="cm"> Monoid&#8322;.mk {&#945; : Type} (toSemigroup&#8321; : Semigroup&#8321; &#945;) (toDiaOneClass&#8321; : DiaOneClass&#8321; &#945;) : Monoid&#8322; &#945; -/</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Monoid&#8322;.mk</span>

<span class="c">/-</span><span class="cm"> Monoid&#8321;.mk {&#945; : Type} [toSemigroup&#8321; : Semigroup&#8321; &#945;] [toOne&#8321; : One&#8321; &#945;] (one_dia : &#8704; (a : &#945;), &#120793; &#8900; a = a) (dia_one : &#8704; (a : &#945;), a &#8900; &#120793; = a) : Monoid&#8321; &#945; -/</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Monoid&#8321;.mk</span>
</pre></div>
</div>
<p>&#25152;&#20197;&#25105;&#20204;&#30475;&#21040; <code class="docutils literal notranslate"><span class="pre">Monoid&#8321;</span></code> &#25353;&#39044;&#26399;&#25509;&#21463; <code class="docutils literal notranslate"><span class="pre">Semigroup&#8321;</span> <span class="pre">&#945;</span></code> &#21442;&#25968;&#65292;&#20294;&#19981;&#20250;&#25509;&#21463;&#21487;&#33021;&#37325;&#21472;&#30340; <code class="docutils literal notranslate"><span class="pre">DiaOneClass&#8321;</span> <span class="pre">&#945;</span></code> &#21442;&#25968;&#65292;&#32780;&#26159;&#23558;&#20854;&#25286;&#20998;&#24182;&#20165;&#21253;&#21547;&#19981;&#37325;&#21472;&#30340;&#37096;&#20998;&#12290;&#23427;&#36824;&#33258;&#21160;&#29983;&#25104;&#20102;&#19968;&#20010;&#23454;&#20363; <code class="docutils literal notranslate"><span class="pre">Monoid&#8321;.toDiaOneClass&#8321;</span></code> &#65292;&#36825;&#24182;&#38750;&#23383;&#27573;&#65292;&#20294;&#20855;&#26377;&#39044;&#26399;&#30340;&#31614;&#21517;&#65292;&#20174;&#26368;&#32456;&#29992;&#25143;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#36825;&#24674;&#22797;&#20102;&#20004;&#20010;&#25193;&#23637;&#31867; <code class="docutils literal notranslate"><span class="pre">Semigroup&#8321;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">DiaOneClass&#8321;</span></code> &#20043;&#38388;&#30340;&#23545;&#31216;&#24615;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Monoid&#8321;.toSemigroup&#8321;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Monoid&#8321;.toDiaOneClass&#8321;</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#31163;&#23450;&#20041;&#32676;&#38750;&#24120;&#25509;&#36817;&#20102;&#12290;&#25105;&#20204;&#21487;&#20197;&#22312;&#21333;&#23376;&#32467;&#26500;&#20013;&#28155;&#21152;&#19968;&#20010;&#23383;&#27573;&#65292;&#26029;&#35328;&#27599;&#20010;&#20803;&#32032;&#37117;&#23384;&#22312;&#36870;&#20803;&#12290;&#20294;&#37027;&#26679;&#30340;&#35805;&#65292;&#25105;&#20204;&#38656;&#35201;&#21162;&#21147;&#25165;&#33021;&#35775;&#38382;&#36825;&#20123;&#36870;&#20803;&#12290;&#23454;&#38469;&#19978;&#65292;&#23558;&#20854;&#20316;&#20026;&#25968;&#25454;&#28155;&#21152;&#20250;&#26356;&#26041;&#20415;&#12290;&#20026;&#20102;&#20248;&#21270;&#21487;&#37325;&#29992;&#24615;&#65292;&#25105;&#20204;&#23450;&#20041;&#19968;&#20010;&#26032;&#30340;&#25658;&#24102;&#25968;&#25454;&#30340;&#31867;&#65292;&#28982;&#21518;&#20026;&#20854;&#25552;&#20379;&#19968;&#20123;&#31526;&#21495;&#34920;&#31034;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Inv&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- The inversion function -/</span>
<span class="w">  </span><span class="n">inv</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">@[</span><span class="n">inherit_doc</span><span class="kd">]</span>
<span class="kd">postfix</span><span class="o">:</span><span class="n">max</span><span class="w"> </span><span class="s2">&quot;&#8315;&#185;&quot;</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">Inv&#8321;.inv</span>

<span class="kd">class</span><span class="w"> </span><span class="n">Group&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Monoid&#8321;</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">Inv&#8321;</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">inv_dia</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span>
</pre></div>
</div>
<p>&#19978;&#36848;&#23450;&#20041;&#21487;&#33021;&#30475;&#36215;&#26469;&#22826;&#24369;&#20102;&#65292;&#25105;&#20204;&#21482;&#35201;&#27714; <code class="docutils literal notranslate"><span class="pre">a&#8315;&#185;</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#30340;&#24038;&#36870;&#20803;&#12290;&#20294;&#21478;&#19968;&#20391;&#26159;&#33258;&#21160;&#30340;&#12290;&#20026;&#20102;&#35777;&#26126;&#36825;&#19968;&#28857;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#39044;&#22791;&#24341;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">lemma</span><span class="w"> </span><span class="n">left_inv_eq_right_inv&#8321;</span><span class="w"> </span><span class="o">{</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hba</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hac</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">DiaOneClass&#8321;.one_dia</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">hba</span><span class="o">,</span><span class="w"> </span><span class="n">Semigroup&#8321;.dia_assoc</span><span class="o">,</span><span class="w"> </span><span class="n">hac</span><span class="o">,</span><span class="w"> </span><span class="n">DiaOneClass&#8321;.dia_one</span><span class="w"> </span><span class="n">b</span><span class="o">]</span>
</pre></div>
</div>
<p>&#22312;&#36825;&#20010;&#24341;&#29702;&#20013;&#65292;&#32473;&#20986;&#20840;&#21517;&#30456;&#24403;&#28902;&#20154;&#65292;&#23588;&#20854;&#26159;&#22240;&#20026;&#36825;&#38656;&#35201;&#30693;&#36947;&#36825;&#20123;&#20107;&#23454;&#26159;&#30001;&#23618;&#27425;&#32467;&#26500;&#20013;&#30340;&#21738;&#19968;&#37096;&#20998;&#25552;&#20379;&#30340;&#12290;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#30340;&#19968;&#31181;&#26041;&#27861;&#26159;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">export</span></code> &#21629;&#20196;&#23558;&#36825;&#20123;&#20107;&#23454;&#20316;&#20026;&#24341;&#29702;&#22797;&#21046;&#21040;&#26681;&#21517;&#31216;&#31354;&#38388;&#20013;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">export</span><span class="w"> </span><span class="n">DiaOneClass&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">one_dia</span><span class="w"> </span><span class="n">dia_one</span><span class="o">)</span>
<span class="kn">export</span><span class="w"> </span><span class="n">Semigroup&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">dia_assoc</span><span class="o">)</span>
<span class="kn">export</span><span class="w"> </span><span class="n">Group&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">inv_dia</span><span class="o">)</span>
</pre></div>
</div>
<p>&#28982;&#21518;&#25105;&#20204;&#21487;&#20197;&#23558;&#19978;&#36848;&#35777;&#26126;&#37325;&#20889;&#20026;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hba</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hac</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">one_dia</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">hba</span><span class="o">,</span><span class="w"> </span><span class="n">dia_assoc</span><span class="o">,</span><span class="w"> </span><span class="n">hac</span><span class="o">,</span><span class="w"> </span><span class="n">dia_one</span><span class="w"> </span><span class="n">b</span><span class="o">]</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#36718;&#21040;&#20320;&#26469;&#35777;&#26126;&#25105;&#20204;&#20195;&#25968;&#32467;&#26500;&#30340;&#24615;&#36136;&#20102;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">lemma</span><span class="w"> </span><span class="n">inv_eq_of_dia</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8321;</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">lemma</span><span class="w"> </span><span class="n">dia_inv</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8321;</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8900;</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">&#120793;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#22312;&#36825;&#20010;&#38454;&#27573;&#65292;&#25105;&#20204;&#24819;&#32487;&#32493;&#23450;&#20041;&#29615;&#65292;&#20294;&#26377;&#19968;&#20010;&#20005;&#37325;&#30340;&#38382;&#39064;&#12290;&#19968;&#20010;&#31867;&#22411;&#30340;&#29615;&#32467;&#26500;&#21253;&#21547;&#19968;&#20010;&#21152;&#27861;&#32676;&#32467;&#26500;&#21644;&#19968;&#20010;&#20056;&#27861;&#21322;&#32676;&#32467;&#26500;&#65292;&#20197;&#21450;&#23427;&#20204;&#30456;&#20114;&#20316;&#29992;&#30340;&#19968;&#20123;&#24615;&#36136;&#12290;&#20294;&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#20026;&#25152;&#26377;&#25805;&#20316;&#30828;&#32534;&#30721;&#20102;&#19968;&#20010;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">&#8900;</span></code> &#12290;&#26356;&#26681;&#26412;&#30340;&#26159;&#65292;&#31867;&#22411;&#31867;&#31995;&#32479;&#20551;&#23450;&#27599;&#20010;&#31867;&#22411;&#23545;&#20110;&#27599;&#20010;&#31867;&#22411;&#31867;&#21482;&#26377;&#19968;&#20010;&#23454;&#20363;&#12290;&#26377;&#22810;&#31181;&#26041;&#27861;&#21487;&#20197;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;&#20196;&#20154;&#24778;&#35766;&#30340;&#26159;&#65292;Mathlib &#20351;&#29992;&#20102;&#19968;&#20010;&#26420;&#32032;&#30340;&#24819;&#27861;&#65292;&#20511;&#21161;&#19968;&#20123;&#20195;&#30721;&#29983;&#25104;&#23646;&#24615;&#65292;&#20026;&#21152;&#27861;&#21644;&#20056;&#27861;&#29702;&#35770;&#22797;&#21046;&#20102;&#25152;&#26377;&#20869;&#23481;&#12290;&#32467;&#26500;&#21644;&#31867;&#20197;&#21152;&#27861;&#21644;&#20056;&#27861;&#20004;&#31181;&#35760;&#27861;&#23450;&#20041;&#65292;&#24182;&#36890;&#36807;&#23646;&#24615; <code class="docutils literal notranslate"><span class="pre">to_additive</span></code> &#30456;&#20114;&#20851;&#32852;&#12290;&#23545;&#20110;&#20687;&#21322;&#32676;&#36825;&#26679;&#30340;&#22810;&#37325;&#32487;&#25215;&#24773;&#20917;&#65292;&#33258;&#21160;&#29983;&#25104;&#30340;&#8220;&#24674;&#22797;&#23545;&#31216;&#24615;&#8221;&#30340;&#23454;&#20363;&#20063;&#38656;&#35201;&#36827;&#34892;&#26631;&#35760;&#12290;&#36825;&#26377;&#28857;&#25216;&#26415;&#24615;&#65292;&#24744;&#26080;&#38656;&#29702;&#35299;&#32454;&#33410;&#12290;&#37325;&#35201;&#30340;&#26159;&#65292;&#24341;&#29702;&#20165;&#20197;&#20056;&#27861;&#35760;&#27861;&#38472;&#36848;&#65292;&#24182;&#36890;&#36807;&#23646;&#24615; <code class="docutils literal notranslate"><span class="pre">to_additive</span></code> &#26631;&#35760;&#65292;&#20197;&#29983;&#25104;&#21152;&#27861;&#29256;&#26412;&#20026; <code class="docutils literal notranslate"><span class="pre">left_inv_eq_right_inv'</span></code> &#65292;&#20854;&#33258;&#21160;&#29983;&#25104;&#30340;&#21152;&#27861;&#29256;&#26412;&#20026; <code class="docutils literal notranslate"><span class="pre">left_neg_eq_right_neg'</span></code> &#12290;&#20026;&#20102;&#26816;&#26597;&#36825;&#20010;&#21152;&#27861;&#29256;&#26412;&#30340;&#21517;&#31216;&#65292;&#25105;&#20204;&#22312; <code class="docutils literal notranslate"><span class="pre">left_inv_eq_right_inv'</span></code> &#20043;&#19978;&#20351;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">whatsnew</span> <span class="pre">in</span></code> &#21629;&#20196;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">AddSemigroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">where</span>
<span class="sd">/-- Addition is associative -/</span>
<span class="w">  </span><span class="n">add_assoc&#8323;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">c</span><span class="o">)</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">AddSemigroup&#8323;</span><span class="kd">]</span>
<span class="kd">class</span><span class="w"> </span><span class="n">Semigroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Mul</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">where</span>
<span class="sd">/-- Multiplication is associative -/</span>
<span class="w">  </span><span class="n">mul_assoc&#8323;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span><span class="o">)</span>

<span class="kd">class</span><span class="w"> </span><span class="n">AddMonoid&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddSemigroup&#8323;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">AddZeroClass</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">AddMonoid&#8323;</span><span class="kd">]</span>
<span class="kd">class</span><span class="w"> </span><span class="n">Monoid&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Semigroup&#8323;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">MulOneClass</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kn">attribute</span><span class="w"> </span><span class="o">[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">existing</span><span class="o">]</span><span class="w"> </span><span class="n">Monoid&#8323;.toMulOneClass</span>

<span class="kn">export</span><span class="w"> </span><span class="n">Semigroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">mul_assoc&#8323;</span><span class="o">)</span>
<span class="kn">export</span><span class="w"> </span><span class="n">AddSemigroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">add_assoc&#8323;</span><span class="o">)</span>

<span class="n">whatsnew</span><span class="w"> </span><span class="k">in</span>
<span class="kd">@[</span><span class="n">to_additive</span><span class="kd">]</span>
<span class="kd">lemma</span><span class="w"> </span><span class="n">left_inv_eq_right_inv&#39;</span><span class="w"> </span><span class="o">{</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid&#8323;</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hba</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hac</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">one_mul</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">hba</span><span class="o">,</span><span class="w"> </span><span class="n">mul_assoc&#8323;</span><span class="o">,</span><span class="w"> </span><span class="n">hac</span><span class="o">,</span><span class="w"> </span><span class="n">mul_one</span><span class="w"> </span><span class="n">b</span><span class="o">]</span>

<span class="k">#check</span><span class="w"> </span><span class="n">left_neg_eq_right_neg&#39;</span>
</pre></div>
</div>
<p>&#20511;&#21161;&#36825;&#39033;&#25216;&#26415;&#65292;&#25105;&#20204;&#21487;&#20197;&#36731;&#26494;&#23450;&#20041;&#20132;&#25442;&#21322;&#32676;&#12289;&#24186;&#21322;&#32676;&#21644;&#32676;&#65292;&#28982;&#21518;&#23450;&#20041;&#29615;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">AddCommSemigroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddSemigroup&#8323;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">add_comm</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">a</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">AddCommSemigroup&#8323;</span><span class="kd">]</span>
<span class="kd">class</span><span class="w"> </span><span class="n">CommSemigroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Semigroup&#8323;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul_comm</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">a</span>

<span class="kd">class</span><span class="w"> </span><span class="n">AddCommMonoid&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddMonoid&#8323;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">AddCommSemigroup&#8323;</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">AddCommMonoid&#8323;</span><span class="kd">]</span>
<span class="kd">class</span><span class="w"> </span><span class="n">CommMonoid&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Monoid&#8323;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">CommSemigroup&#8323;</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">class</span><span class="w"> </span><span class="n">AddGroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddMonoid&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">Neg</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">neg_add</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="bp">-</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">AddGroup&#8323;</span><span class="kd">]</span>
<span class="kd">class</span><span class="w"> </span><span class="n">Group&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Monoid&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">Inv</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">inv_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#24212;&#24403;&#22312;&#36866;&#24403;&#30340;&#26102;&#20505;&#29992; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#26631;&#35760;&#24341;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">attribute</span><span class="w"> </span><span class="o">[</span><span class="n">simp</span><span class="o">]</span><span class="w"> </span><span class="n">Group&#8323;.inv_mul</span><span class="w"> </span><span class="n">AddGroup&#8323;.neg_add</span>
</pre></div>
</div>
<p>&#28982;&#21518;&#25105;&#20204;&#38656;&#35201;&#37325;&#22797;&#19968;&#20123;&#24037;&#20316;&#65292;&#22240;&#20026;&#25105;&#20204;&#20999;&#25442;&#21040;&#26631;&#20934;&#35760;&#27861;&#65292;&#20294;&#33267;&#23569; <code class="docutils literal notranslate"><span class="pre">to_additive</span></code> &#23436;&#25104;&#20102;&#20174;&#20056;&#27861;&#35760;&#27861;&#21040;&#21152;&#27861;&#35760;&#27861;&#30340;&#36716;&#25442;&#24037;&#20316;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">to_additive</span><span class="kd">]</span>
<span class="kd">lemma</span><span class="w"> </span><span class="n">inv_eq_of_mul</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#21487;&#20197;&#35201;&#27714; <code class="docutils literal notranslate"><span class="pre">to_additive</span></code> &#20026;&#19968;&#20010;&#24341;&#29702;&#28155;&#21152; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#26631;&#31614;&#65292;&#24182;&#23558;&#35813;&#23646;&#24615;&#20256;&#25773;&#21040;&#21152;&#27861;&#29256;&#26412;&#65292;&#22914;&#19979;&#25152;&#31034;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="o">(</span><span class="n">attr</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">simp</span><span class="o">)</span><span class="kd">]</span>
<span class="kd">lemma</span><span class="w"> </span><span class="n">Group&#8323;.mul_inv</span><span class="w"> </span><span class="o">{</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">a</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="kd">]</span>
<span class="kd">lemma</span><span class="w"> </span><span class="n">mul_left_cancel&#8323;</span><span class="w"> </span><span class="o">{</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="kd">]</span>
<span class="kd">lemma</span><span class="w"> </span><span class="n">mul_right_cancel&#8323;</span><span class="w"> </span><span class="o">{</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="bp">*</span><span class="n">a</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">class</span><span class="w"> </span><span class="n">AddCommGroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddGroup&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">AddCommMonoid&#8323;</span><span class="w"> </span><span class="n">G</span>

<span class="kd">@[</span><span class="n">to_additive</span><span class="w"> </span><span class="n">AddCommGroup&#8323;</span><span class="kd">]</span>
<span class="kd">class</span><span class="w"> </span><span class="n">CommGroup&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Group&#8323;</span><span class="w"> </span><span class="n">G</span><span class="o">,</span><span class="w"> </span><span class="n">CommMonoid&#8323;</span><span class="w"> </span><span class="n">G</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#25105;&#20204;&#20934;&#22791;&#35752;&#35770;&#29615;&#12290;&#20026;&#20102;&#28436;&#31034;&#30446;&#30340;&#65292;&#25105;&#20204;&#19981;&#20250;&#20551;&#35774;&#21152;&#27861;&#26159;&#20132;&#25442;&#30340;&#65292;&#28982;&#21518;&#31435;&#21363;&#25552;&#20379;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">AddCommGroup&#8323;</span></code> &#30340;&#23454;&#20363;&#12290;Mathlib &#19981;&#20250;&#29609;&#36825;&#31181;&#25226;&#25103;&#65292;&#39318;&#20808;&#26159;&#22240;&#20026;&#22312;&#23454;&#36341;&#20013;&#36825;&#19981;&#20250;&#20351;&#20219;&#20309;&#29615;&#23454;&#20363;&#21464;&#24471;&#26356;&#23481;&#26131;&#65292;&#20854;&#27425;&#26159;&#22240;&#20026; Mathlib &#30340;&#20195;&#25968;&#23618;&#27425;&#32467;&#26500;&#36890;&#36807;&#21322;&#29615;&#36827;&#34892;&#65292;&#21322;&#29615;&#31867;&#20284;&#20110;&#29615;&#20294;&#27809;&#26377;&#30456;&#21453;&#25968;&#65292;&#22240;&#27492;&#19979;&#38754;&#30340;&#35777;&#26126;&#23545;&#23427;&#20204;&#19981;&#36215;&#20316;&#29992;&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#19981;&#20165;&#25910;&#33719;&#20102;&#19968;&#20010;&#19981;&#38169;&#30340;&#23454;&#36341;&#26426;&#20250;&#65288;&#23588;&#20854;&#26159;&#23545;&#20110;&#21021;&#27425;&#25509;&#35302;&#32773;&#32780;&#35328;&#65289;&#65292;&#26356;&#33021;&#36890;&#36807;&#36825;&#19968;&#36807;&#31243;&#25484;&#25569;&#19968;&#20010;&#23454;&#20363;&#26500;&#24314;&#30340;&#33539;&#20363;&#65292;&#20854;&#20013;&#36816;&#29992;&#20102;&#33021;&#22815;&#21516;&#26102;&#25351;&#23450;&#29238;&#32467;&#26500;&#21450;&#39069;&#22806;&#23383;&#27573;&#30340;&#35821;&#27861;&#25216;&#24039;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Ring&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddGroup&#8323;</span><span class="w"> </span><span class="n">R</span><span class="o">,</span><span class="w"> </span><span class="n">Monoid&#8323;</span><span class="w"> </span><span class="n">R</span><span class="o">,</span><span class="w"> </span><span class="n">MulZeroClass</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- Multiplication is left distributive over addition -/</span>
<span class="w">  </span><span class="n">left_distrib</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span>
<span class="w">  </span><span class="sd">/-- Multiplication is right distributive over addition -/</span>
<span class="w">  </span><span class="n">right_distrib</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">c</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">{</span><span class="n">R</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Ring&#8323;</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">AddCommGroup&#8323;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="o">:=</span>
<span class="o">{</span><span class="w"> </span><span class="n">Ring&#8323;.toAddGroup&#8323;</span><span class="w"> </span><span class="k">with</span>
<span class="w">  </span><span class="n">add_comm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="gr">sorry</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>&#24403;&#28982;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#26500;&#24314;&#20855;&#20307;&#30340;&#23454;&#20363;&#65292;&#27604;&#22914;&#22312;&#25972;&#25968;&#19978;&#26500;&#24314;&#29615;&#32467;&#26500;&#65288;&#24403;&#28982;&#19979;&#38754;&#30340;&#23454;&#20363;&#21033;&#29992;&#20102; Mathlib &#20013;&#24050;&#32463;&#23436;&#25104;&#30340;&#25152;&#26377;&#24037;&#20316;&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Ring&#8323;</span><span class="w"> </span><span class="n">&#8484;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">  </span><span class="n">add_assoc&#8323;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">add_assoc</span>
<span class="w">  </span><span class="n">zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">zero_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">add_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">neg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">-</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">  </span><span class="n">neg_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">  </span><span class="n">mul_assoc&#8323;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">mul_assoc</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">zero_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">mul_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">left_distrib</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.mul_add</span>
<span class="w">  </span><span class="n">right_distrib</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.add_mul</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#24744;&#29616;&#22312;&#21487;&#20197;&#20026;&#24207;&#20851;&#31995;&#35774;&#32622;&#19968;&#20010;&#31616;&#21333;&#30340;&#23618;&#27425;&#32467;&#26500;&#65292;&#21253;&#25324;&#19968;&#20010;&#26377;&#24207;&#20132;&#25442;&#24186;&#21322;&#32676;&#30340;&#31867;&#65292;&#23427;&#21516;&#26102;&#20855;&#26377;&#20559;&#24207;&#20851;&#31995;&#21644;&#20132;&#25442;&#24186;&#21322;&#32676;&#32467;&#26500;&#65292;&#28385;&#36275; <code class="docutils literal notranslate"><span class="pre">&#8704;</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">b</span> <span class="pre">&#8594;</span> <span class="pre">&#8704;</span> <span class="pre">c</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">c</span> <span class="pre">*</span> <span class="pre">a</span> <span class="pre">&#8804;</span> <span class="pre">c</span> <span class="pre">*</span> <span class="pre">b</span></code> &#12290;&#24403;&#28982;&#65292;&#24744;&#38656;&#35201;&#20026;&#20197;&#19979;&#31867;&#28155;&#21152;&#23383;&#27573;&#65292;&#21487;&#33021;&#36824;&#38656;&#35201;&#28155;&#21152; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#23376;&#21477;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">LE&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- The Less-or-Equal relation. -/</span>
<span class="w">  </span><span class="n">le</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Prop</span>

<span class="kd">@[</span><span class="n">inherit_doc</span><span class="kd">]</span><span class="w"> </span><span class="kd">infix</span><span class="o">:</span><span class="mi">50</span><span class="w"> </span><span class="s2">&quot; &#8804;&#8321; &quot;</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">LE&#8321;.le</span>

<span class="kd">class</span><span class="w"> </span><span class="n">Preorder&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span>

<span class="kd">class</span><span class="w"> </span><span class="n">PartialOrder&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span>

<span class="kd">class</span><span class="w"> </span><span class="n">OrderedCommMonoid&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">OrderedCommMonoid&#8321;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="n">where</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#35201;&#35752;&#35770;&#28041;&#21450;&#22810;&#20010;&#31867;&#22411;&#30340;&#20195;&#25968;&#32467;&#26500;&#12290;&#26368;&#20856;&#22411;&#30340;&#20363;&#23376;&#26159;&#29615;&#19978;&#30340;&#27169;&#12290;&#22914;&#26524;&#24744;&#19981;&#30693;&#36947;&#20160;&#20040;&#26159;&#27169;&#65292;&#24744;&#21487;&#20197;&#20551;&#35013;&#23427;&#25351;&#30340;&#26159;&#21521;&#37327;&#31354;&#38388;&#65292;&#24182;&#35748;&#20026;&#25105;&#20204;&#25152;&#26377;&#30340;&#29615;&#37117;&#26159;&#22495;&#12290;&#36825;&#20123;&#32467;&#26500;&#26159;&#37197;&#22791;&#20102;&#26576;&#20010;&#29615;&#30340;&#20803;&#32032;&#30340;&#26631;&#37327;&#20056;&#27861;&#30340;&#20132;&#25442;&#21152;&#27861;&#32676;&#12290;</p>
<p>&#25105;&#20204;&#39318;&#20808;&#23450;&#20041;&#30001;&#26576;&#31181;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#22312;&#26576;&#31181;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> &#19978;&#36827;&#34892;&#26631;&#37327;&#20056;&#27861;&#30340;&#25968;&#25454;&#25215;&#36733;&#31867;&#22411;&#31867;&#65292;&#24182;&#20026;&#20854;&#36171;&#20104;&#21491;&#32467;&#21512;&#30340;&#34920;&#31034;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">SMul&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- Scalar multiplication -/</span>
<span class="w">  </span><span class="n">smul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span>

<span class="kd">infixr</span><span class="o">:</span><span class="mi">73</span><span class="w"> </span><span class="s2">&quot; &#8226; &quot;</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">SMul&#8323;.smul</span>
</pre></div>
</div>
<p>&#28982;&#21518;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#27169;&#65288;&#22914;&#26524;&#24744;&#19981;&#30693;&#36947;&#20160;&#20040;&#26159;&#27169;&#65292;&#21487;&#20197;&#20808;&#24819;&#24819;&#21521;&#37327;&#31354;&#38388;&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Module&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Ring&#8323;</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup&#8323;</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">SMul&#8323;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">zero_smul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">one_smul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">mul_smul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">add_smul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">),</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">smul_add</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">),</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8226;</span><span class="w"> </span><span class="n">n</span>
</pre></div>
</div>
<p>&#36825;&#37324;&#26377;&#19968;&#20123;&#26377;&#36259;&#30340;&#20107;&#24773;&#12290;&#34429;&#28982; <code class="docutils literal notranslate"><span class="pre">R</span></code> &#19978;&#30340;&#29615;&#32467;&#26500;&#20316;&#20026;&#27492;&#23450;&#20041;&#30340;&#21442;&#25968;&#24182;&#19981;&#20196;&#20154;&#24847;&#22806;&#65292;&#20294;&#24744;&#21487;&#33021;&#26399;&#26395; <code class="docutils literal notranslate"><span class="pre">AddCommGroup&#8323;</span> <span class="pre">M</span></code> &#20687; <code class="docutils literal notranslate"><span class="pre">SMul&#8323;</span> <span class="pre">R</span> <span class="pre">M</span></code> &#19968;&#26679;&#25104;&#20026; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#23376;&#21477;&#30340;&#19968;&#37096;&#20998;&#12290;&#23581;&#35797;&#36825;&#26679;&#20570;&#20250;&#23548;&#33268;&#19968;&#20010;&#21548;&#36215;&#26469;&#24456;&#31070;&#31192;&#30340;&#38169;&#35823;&#28040;&#24687;&#65306;
<code class="docutils literal notranslate"><span class="pre">cannot</span> <span class="pre">find</span> <span class="pre">synthesization</span> <span class="pre">order</span> <span class="pre">for</span> <span class="pre">instance</span> <span class="pre">Module&#8321;.toAddCommGroup&#8323;</span> <span class="pre">with</span> <span class="pre">type</span> <span class="pre">(R</span> <span class="pre">:</span> <span class="pre">Type)</span> <span class="pre">&#8594;</span> <span class="pre">[inst</span> <span class="pre">:</span> <span class="pre">Ring&#8323;</span> <span class="pre">R]</span> <span class="pre">&#8594;</span> <span class="pre">{M</span> <span class="pre">:</span> <span class="pre">Type}</span> <span class="pre">&#8594;</span> <span class="pre">[self</span> <span class="pre">:</span> <span class="pre">Module&#8321;</span> <span class="pre">R</span> <span class="pre">M]</span> <span class="pre">&#8594;</span> <span class="pre">AddCommGroup&#8323;</span> <span class="pre">M</span>
<span class="pre">all</span> <span class="pre">remaining</span> <span class="pre">arguments</span> <span class="pre">have</span> <span class="pre">metavariables:</span> <span class="pre">Ring&#8323;</span> <span class="pre">?R</span> <span class="pre">&#64;Module&#8321;</span> <span class="pre">?R</span> <span class="pre">?inst&#10013;</span> <span class="pre">M</span></code>&#12290;
&#35201;&#29702;&#35299;&#27492;&#28040;&#24687;&#65292;&#24744;&#38656;&#35201;&#35760;&#20303;&#65292;&#36825;&#26679;&#30340; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#23376;&#21477;&#20250;&#23548;&#33268;&#19968;&#20010;&#26631;&#35760;&#20026;&#23454;&#20363;&#30340;&#23383;&#27573; <code class="docutils literal notranslate"><span class="pre">Module&#8323;.toAddCommGroup&#8323;</span></code> &#12290;&#27492;&#23454;&#20363;&#20855;&#26377;&#38169;&#35823;&#28040;&#24687;&#20013;&#20986;&#29616;&#30340;&#31614;&#21517;&#65306;</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">(R</span> <span class="pre">:</span> <span class="pre">Type)</span> <span class="pre">&#8594;</span> <span class="pre">[inst</span> <span class="pre">:</span> <span class="pre">Ring&#8323;</span> <span class="pre">R]</span> <span class="pre">&#8594;</span> <span class="pre">{M</span> <span class="pre">:</span> <span class="pre">Type}</span> <span class="pre">&#8594;</span> <span class="pre">[self</span> <span class="pre">:</span> <span class="pre">Module&#8321;</span> <span class="pre">R</span> <span class="pre">M]</span> <span class="pre">&#8594;</span> <span class="pre">AddCommGroup&#8323;</span> <span class="pre">M</span></code> &#12290;&#22312;&#31867;&#22411;&#31867;&#25968;&#25454;&#24211;&#20013;&#26377;&#36825;&#26679;&#19968;&#20010;&#23454;&#20363;&#65292;&#27599;&#27425; Lean &#35201;&#20026;&#26576;&#20010; <code class="docutils literal notranslate"><span class="pre">M</span></code> &#26597;&#25214;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">AddCommGroup&#8323;</span> <span class="pre">M</span></code> &#23454;&#20363;&#26102;&#65292;&#23427;&#37117;&#38656;&#35201;&#20808;&#21435;&#23547;&#25214;&#19968;&#20010;&#23436;&#20840;&#26410;&#25351;&#23450;&#30340;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">R</span></code> &#20197;&#21450;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Ring&#8323;</span> <span class="pre">R</span></code> &#23454;&#20363;&#65292;&#28982;&#21518;&#25165;&#33021;&#24320;&#22987;&#23547;&#25214;&#20027;&#35201;&#30446;&#26631;&#65292;&#21363;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Module&#8321;</span> <span class="pre">R</span> <span class="pre">M</span></code> &#23454;&#20363;&#12290;&#36825;&#20004;&#20010;&#25903;&#32447;&#20219;&#21153;&#22312;&#38169;&#35823;&#28040;&#24687;&#20013;&#30001;&#20803;&#21464;&#37327;&#34920;&#31034;&#65292;&#24182;&#22312;&#37027;&#37324;&#29992; <code class="docutils literal notranslate"><span class="pre">&#65311;R</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">&#65311;inst&#10013;</span></code> &#26631;&#27880;&#12290;&#36825;&#26679;&#30340;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Module&#8323;.toAddCommGroup&#8323;</span></code> &#23454;&#20363;&#23545;&#20110;&#23454;&#20363;&#35299;&#26512;&#36807;&#31243;&#26469;&#35828;&#20250;&#26159;&#19968;&#20010;&#24040;&#22823;&#30340;&#38519;&#38449;&#65292;&#22240;&#27492; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#21629;&#20196;&#25298;&#32477;&#35774;&#32622;&#23427;&#12290;</p>
</div></blockquote>
<dl class="simple">
<dt>&#37027;&#20040; <code class="docutils literal notranslate"><span class="pre">extends</span> <span class="pre">SMul&#8323;</span> <span class="pre">R</span> <span class="pre">M</span></code> &#21448;&#22914;&#20309;&#21602;&#65311;&#23427;&#21019;&#24314;&#20102;&#19968;&#20010;&#23383;&#27573;</dt><dd><p><code class="docutils literal notranslate"><span class="pre">Module&#8321;.toSMul&#8323;</span> <span class="pre">:</span> <span class="pre">{R</span> <span class="pre">:</span> <span class="pre">Type}</span> <span class="pre">&#8594;</span>&#160; <span class="pre">[inst</span> <span class="pre">:</span> <span class="pre">Ring&#8323;</span> <span class="pre">R]</span> <span class="pre">&#8594;</span> <span class="pre">{M</span> <span class="pre">:</span> <span class="pre">Type}</span> <span class="pre">&#8594;</span> <span class="pre">[inst_1</span> <span class="pre">:</span> <span class="pre">AddCommGroup&#8323;</span> <span class="pre">M]</span> <span class="pre">&#8594;</span> <span class="pre">[self</span> <span class="pre">:</span> <span class="pre">Module&#8321;</span> <span class="pre">R</span> <span class="pre">M]</span> <span class="pre">&#8594;</span> <span class="pre">SMul&#8323;</span> <span class="pre">R</span> <span class="pre">M</span></code></p>
</dd>
</dl>
<p>&#20854;&#26368;&#32456;&#32467;&#26524; <code class="docutils literal notranslate"><span class="pre">SMul&#8323;</span> <span class="pre">R</span> <span class="pre">M</span></code> &#21516;&#26102;&#25552;&#21040;&#20102; <code class="docutils literal notranslate"><span class="pre">R</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">M</span></code> &#65292;&#25152;&#20197;&#36825;&#20010;&#23383;&#27573;&#21487;&#20197;&#23433;&#20840;&#22320;&#29992;&#20316;&#23454;&#20363;&#12290;&#35268;&#21017;&#24456;&#23481;&#26131;&#35760;&#20303;&#65306;&#22312; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#23376;&#21477;&#20013;&#20986;&#29616;&#30340;&#27599;&#20010;&#31867;&#37117;&#24212;&#25552;&#21450;&#21442;&#25968;&#20013;&#20986;&#29616;&#30340;&#27599;&#20010;&#31867;&#22411;&#12290;</p>
<p>&#35753;&#25105;&#20204;&#21019;&#24314;&#25105;&#20204;&#30340;&#31532;&#19968;&#20010;&#27169;&#23454;&#20363;&#65306;&#19968;&#20010;&#29615;&#33258;&#36523;&#23601;&#26159;&#19968;&#20010;&#27169;&#65292;&#20854;&#20056;&#27861;&#20316;&#20026;&#26631;&#37327;&#20056;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="n">selfModule</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Ring&#8323;</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module&#8321;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">r</span><span class="bp">*</span><span class="n">s</span>
<span class="w">  </span><span class="n">zero_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">zero_mul</span>
<span class="w">  </span><span class="n">one_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">one_mul</span>
<span class="w">  </span><span class="n">mul_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">mul_assoc&#8323;</span>
<span class="w">  </span><span class="n">add_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Ring&#8323;.right_distrib</span>
<span class="w">  </span><span class="n">smul_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Ring&#8323;.left_distrib</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#31532;&#20108;&#20010;&#20363;&#23376;&#65292;&#27599;&#20010;&#38463;&#36125;&#23572;&#32676;&#37117;&#26159;&#25972;&#25968;&#29615;&#19978;&#30340;&#27169;&#65288;&#36825;&#26159;&#25512;&#24191;&#21521;&#37327;&#31354;&#38388;&#29702;&#35770;&#20197;&#20801;&#35768;&#38750;&#21487;&#36870;&#26631;&#37327;&#30340;&#21407;&#22240;&#20043;&#19968;&#65289;&#12290;&#39318;&#20808;&#65292;&#23545;&#20110;&#20219;&#20309;&#37197;&#22791;&#38646;&#21644;&#21152;&#27861;&#30340;&#31867;&#22411;&#65292;&#37117;&#21487;&#20197;&#23450;&#20041;&#33258;&#28982;&#25968;&#30340;&#26631;&#37327;&#20056;&#27861;&#65306; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&#8226;</span> <span class="pre">a</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">&#8943;</span> <span class="pre">+</span> <span class="pre">a</span></code> &#65292;&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#20986;&#29616; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#27425;&#12290;&#28982;&#21518;&#36890;&#36807;&#30830;&#20445; <code class="docutils literal notranslate"><span class="pre">(-1)</span> <span class="pre">&#8226;</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">-a</span></code> &#23558;&#20854;&#25193;&#23637;&#21040;&#25972;&#25968;&#30340;&#26631;&#37327;&#20056;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">nsmul&#8321;</span><span class="w"> </span><span class="o">[</span><span class="n">Zero</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Add</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">nsmul&#8321;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">a</span>

<span class="kd">def</span><span class="w"> </span><span class="n">zsmul&#8321;</span><span class="w"> </span><span class="o">{</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Zero</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Add</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Neg</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">Int.ofNat</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">nsmul&#8321;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">a</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">Int.negSucc</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="bp">-</span><span class="n">nsmul&#8321;</span><span class="w"> </span><span class="n">n.succ</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>&#35777;&#26126;&#36825;&#20250;&#20135;&#29983;&#19968;&#20010;&#27169;&#32467;&#26500;&#26377;&#28857;&#32321;&#29712;&#65292;&#19988;&#23545;&#24403;&#21069;&#35752;&#35770;&#26469;&#35828;&#19981;&#37027;&#20040;&#26377;&#36259;&#65292;&#25152;&#20197;&#25105;&#20204;&#24456;&#25265;&#27465;&#22320;&#30053;&#36807;&#25152;&#26377;&#20844;&#29702;&#12290;&#24744;**&#26080;&#38656;**&#29992;&#35777;&#26126;&#26469;&#26367;&#25442;&#36825;&#20123;&#25265;&#27465;&#12290;&#22914;&#26524;&#24744;&#22362;&#25345;&#36825;&#26679;&#20570;&#65292;&#37027;&#20040;&#24744;&#21487;&#33021;&#38656;&#35201;&#38472;&#36848;&#24182;&#35777;&#26126;&#20851;&#20110; <code class="docutils literal notranslate"><span class="pre">nsmul&#8321;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">zsmul&#8321;</span></code> &#30340;&#20960;&#20010;&#20013;&#38388;&#24341;&#29702;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="n">abGrpModule</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">AddCommGroup&#8323;</span><span class="w"> </span><span class="n">A</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Module&#8321;</span><span class="w"> </span><span class="n">&#8484;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">zsmul&#8321;</span>
<span class="w">  </span><span class="n">zero_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">one_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">mul_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">add_smul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">smul_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#19968;&#20010;&#26356;&#20026;&#37325;&#35201;&#30340;&#38382;&#39064;&#26159;&#65292;&#25105;&#20204;&#30446;&#21069;&#23545;&#20110;&#25972;&#25968;&#29615; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#26412;&#36523;&#23384;&#22312;&#20004;&#31181;&#27169;&#32467;&#26500;&#65306;&#39318;&#20808;&#65292;&#30001;&#20110; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#26159;&#38463;&#36125;&#23572;&#32676;&#65292;&#22240;&#27492;&#21487;&#20197;&#23450;&#20041;&#20854;&#20026; <code class="docutils literal notranslate"><span class="pre">abGrpModule</span> <span class="pre">&#8484;</span></code> &#65307;&#20854;&#27425;&#65292;&#37492;&#20110; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#20316;&#20026;&#29615;&#30340;&#24615;&#36136;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#23558;&#20854;&#35270;&#20316; <code class="docutils literal notranslate"><span class="pre">selfModule</span> <span class="pre">&#8484;</span></code> &#12290;&#36825;&#20004;&#31181;&#27169;&#32467;&#26500;&#34429;&#28982;&#23545;&#24212;&#30456;&#21516;&#30340;&#38463;&#36125;&#23572;&#32676;&#32467;&#26500;&#65292;&#20294;&#23427;&#20204;&#22312;&#26631;&#37327;&#20056;&#27861;&#19978;&#30340;&#19968;&#33268;&#24615;&#24182;&#19981;&#26174;&#32780;&#26131;&#35265;&#12290;&#23454;&#38469;&#19978;&#65292;&#36825;&#20004;&#32773;&#30830;&#23454;&#26159;&#30456;&#21516;&#30340;&#65292;&#20294;&#36825;&#19968;&#28857;&#24182;&#38750;&#30001;&#23450;&#20041;&#30452;&#25509;&#20915;&#23450;&#65292;&#32780;&#38656;&#35201;&#36890;&#36807;&#35777;&#26126;&#26469;&#30830;&#35748;&#12290;&#36825;&#19968;&#24773;&#20917;&#23545;&#31867;&#22411;&#31867;&#23454;&#20363;&#35299;&#26512;&#36807;&#31243;&#32780;&#35328;&#26080;&#30097;&#26159;&#20010;&#19981;&#21033;&#28040;&#24687;&#65292;&#24182;&#19988;&#21487;&#33021;&#20250;&#35753;&#20351;&#29992;&#27492;&#23618;&#27425;&#32467;&#26500;&#30340;&#29992;&#25143;&#24863;&#21040;&#39047;&#20026;&#27822;&#20007;&#12290;&#24403;&#25105;&#20204;&#30452;&#25509;&#35831;&#27714;&#25214;&#21040;&#26576;&#20010;&#23454;&#20363;&#26102;&#65292;Lean &#20250;&#33258;&#21160;&#36873;&#25321;&#19968;&#20010;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#20197;&#19979;&#21629;&#20196;&#26597;&#30475;&#25152;&#36873;&#30340;&#26159;&#21738;&#19968;&#20010;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="bp">#</span><span class="n">synth</span><span class="w"> </span><span class="n">Module&#8321;</span><span class="w"> </span><span class="n">&#8484;</span><span class="w"> </span><span class="n">&#8484;</span><span class="w"> </span><span class="c1">-- abGrpModule &#8484;</span>
</pre></div>
</div>
<p>&#20294;&#22312;&#26356;&#38388;&#25509;&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;Lean &#21487;&#33021;&#20250;&#20808;&#25512;&#26029;&#20986;&#19968;&#20010;&#23454;&#20363;&#65292;&#28982;&#21518;&#24863;&#21040;&#22256;&#24785;&#12290;&#36825;&#31181;&#24773;&#20917;&#34987;&#31216;&#20026;&#22351;&#33777;&#24418;&#12290;&#36825;&#19982;&#25105;&#20204;&#19978;&#38754;&#20351;&#29992;&#30340;&#33777;&#24418;&#36816;&#31639;&#26080;&#20851;&#65292;&#32780;&#26159;&#25351;&#20174; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#21040;&#20854; <code class="docutils literal notranslate"><span class="pre">Module&#8321;</span> <span class="pre">&#8484;</span></code> &#30340;&#36335;&#24452;&#65292;&#21487;&#20197;&#36890;&#36807; <code class="docutils literal notranslate"><span class="pre">AddCommGroup&#8323;</span> <span class="pre">&#8484;</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">Ring&#8323;</span> <span class="pre">&#8484;</span></code> &#20013;&#30340;&#20219;&#24847;&#19968;&#20010;&#21040;&#36798;&#12290;</p>
<p>&#37325;&#35201;&#30340;&#26159;&#35201;&#26126;&#30333;&#65292;&#24182;&#38750;&#25152;&#26377;&#30340;&#33777;&#24418;&#32467;&#26500;&#37117;&#26159;&#19981;&#22909;&#30340;&#12290;&#23454;&#38469;&#19978;&#65292;&#22312; Mathlib &#20013;&#20197;&#21450;&#26412;&#31456;&#20013;&#21040;&#22788;&#37117;&#26377;&#33777;&#24418;&#32467;&#26500;&#12290;&#22312;&#26368;&#24320;&#22987;&#30340;&#26102;&#20505;&#25105;&#20204;&#23601;&#30475;&#21040;&#65292;&#21487;&#20197;&#20174; <code class="docutils literal notranslate"><span class="pre">Monoid&#8321;</span> <span class="pre">&#945;</span></code> &#36890;&#36807; <code class="docutils literal notranslate"><span class="pre">Semigroup&#8321;</span> <span class="pre">&#945;</span></code> &#25110;&#32773; <code class="docutils literal notranslate"><span class="pre">DiaOneClass&#8321;</span> <span class="pre">&#945;</span></code> &#21040;&#36798; <code class="docutils literal notranslate"><span class="pre">Dia&#8321;</span> <span class="pre">&#945;</span></code> &#65292;&#24182;&#19988;&#30001;&#20110; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#21629;&#20196;&#25152;&#20570;&#30340;&#24037;&#20316;&#65292;&#36825;&#20004;&#20010; <code class="docutils literal notranslate"><span class="pre">Dia&#8321;</span> <span class="pre">&#945;</span></code> &#23454;&#20363;&#22312;&#23450;&#20041;&#19978;&#26159;&#30456;&#31561;&#30340;&#12290;&#29305;&#21035;&#26159;&#65292;&#24213;&#37096;&#20026; <code class="docutils literal notranslate"><span class="pre">Prop</span></code> &#20540;&#31867;&#30340;&#33777;&#24418;&#32467;&#26500;&#19981;&#21487;&#33021;&#26159;&#19981;&#22909;&#30340;&#65292;&#22240;&#20026;&#23545;&#21516;&#19968;&#38472;&#36848;&#30340;&#20219;&#20309;&#20004;&#20010;&#35777;&#26126;&#22312;&#23450;&#20041;&#19978;&#37117;&#26159;&#30456;&#31561;&#30340;&#12290;</p>
<p>&#20294;&#26159;&#25105;&#20204;&#29992;&#27169;&#21019;&#24314;&#30340;&#33777;&#24418;&#32943;&#23450;&#26159;&#26377;&#38382;&#39064;&#30340;&#12290;&#38382;&#39064;&#20986;&#22312; <code class="docutils literal notranslate"><span class="pre">smul</span></code> &#23383;&#27573;&#19978;&#65292;&#23427;&#26159;&#25968;&#25454;&#32780;&#38750;&#35777;&#26126;&#65292;&#24182;&#19988;&#25105;&#20204;&#26377;&#20004;&#20010;&#26500;&#36896;&#22312;&#23450;&#20041;&#19978;&#24182;&#19981;&#30456;&#31561;&#12290;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#30340;&#31283;&#20581;&#26041;&#27861;&#26159;&#30830;&#20445;&#20174;&#20016;&#23500;&#32467;&#26500;&#21040;&#36139;&#20047;&#32467;&#26500;&#30340;&#36716;&#25442;&#24635;&#26159;&#36890;&#36807;&#36951;&#24536;&#25968;&#25454;&#26469;&#23454;&#29616;&#65292;&#32780;&#19981;&#26159;&#36890;&#36807;&#23450;&#20041;&#25968;&#25454;&#12290;&#36825;&#31181;&#20247;&#25152;&#21608;&#30693;&#30340;&#27169;&#24335;&#34987;&#31216;&#20026;&#8220;&#36951;&#24536;&#32487;&#25215;&#8221;&#65292;&#22312; <a class="reference external" href="https://inria.hal.science/hal-02463336">https://inria.hal.science/hal-02463336</a> &#20013;&#26377;&#22823;&#37327;&#35752;&#35770;&#12290;</p>
<p>&#22312;&#25105;&#20204;&#30340;&#20855;&#20307;&#26696;&#20363;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#20462;&#25913; <code class="docutils literal notranslate"><span class="pre">AddMonoid&#8323;</span></code> &#30340;&#23450;&#20041;&#65292;&#20197;&#21253;&#21547;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">nsmul</span></code> &#25968;&#25454;&#23383;&#27573;&#20197;&#21450;&#19968;&#20123;&#20540;&#20026; <code class="docutils literal notranslate"><span class="pre">Prop</span></code> &#31867;&#22411;&#30340;&#23383;&#27573;&#65292;&#20197;&#30830;&#20445;&#27492;&#25805;&#20316;&#30830;&#23454;&#26159;&#25105;&#20204;&#22312;&#19978;&#38754;&#26500;&#36896;&#30340;&#37027;&#20010;&#12290;&#22312;&#19979;&#38754;&#30340;&#23450;&#20041;&#20013;&#65292;&#36825;&#20123;&#23383;&#27573;&#22312;&#20854;&#31867;&#22411;&#21518;&#38754;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">:=</span></code> &#32473;&#20986;&#20102;&#40664;&#35748;&#20540;&#12290;&#30001;&#20110;&#36825;&#20123;&#40664;&#35748;&#20540;&#30340;&#23384;&#22312;&#65292;&#22823;&#22810;&#25968;&#23454;&#20363;&#30340;&#26500;&#36896;&#26041;&#24335;&#19982;&#25105;&#20204;&#20043;&#21069;&#30340;&#23450;&#20041;&#23436;&#20840;&#30456;&#21516;&#12290;&#20294;&#22312; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#30340;&#29305;&#27530;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#23558;&#33021;&#22815;&#25552;&#20379;&#29305;&#23450;&#30340;&#20540;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">AddMonoid&#8324;</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AddSemigroup&#8323;</span><span class="w"> </span><span class="n">M</span><span class="o">,</span><span class="w"> </span><span class="n">AddZeroClass</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- Multiplication by a natural number. -/</span>
<span class="w">  </span><span class="n">nsmul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">nsmul&#8321;</span>
<span class="w">  </span><span class="sd">/-- Multiplication by `(0 : &#8469;)` gives `0`. -/</span>
<span class="w">  </span><span class="n">nsmul_zero</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">nsmul</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">intros</span><span class="bp">;</span><span class="w"> </span><span class="n">rfl</span>
<span class="w">  </span><span class="sd">/-- Multiplication by `(n + 1 : &#8469;)` behaves as expected. -/</span>
<span class="w">  </span><span class="n">nsmul_succ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="o">),</span><span class="w"> </span><span class="n">nsmul</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">nsmul</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">intros</span><span class="bp">;</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">instance</span><span class="w"> </span><span class="n">mySMul</span><span class="w"> </span><span class="o">{</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid&#8324;</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">SMul</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">AddMonoid&#8324;.nsmul</span><span class="o">&#10217;</span>
</pre></div>
</div>
<p>&#35753;&#25105;&#20204;&#26816;&#26597;&#19968;&#19979;&#65292;&#21363;&#20351;&#19981;&#25552;&#20379;&#19982; <code class="docutils literal notranslate"><span class="pre">nsmul</span></code> &#30456;&#20851;&#30340;&#23383;&#27573;&#65292;&#25105;&#20204;&#26159;&#21542;&#20173;&#33021;&#26500;&#36896;&#19968;&#20010;&#20056;&#31215;&#21333;&#32676;&#23454;&#20363;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid&#8324;</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid&#8324;</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">AddMonoid&#8324;</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">q</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">q</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span>
<span class="w">  </span><span class="n">add_assoc&#8323;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">add_assoc&#8323;</span>
<span class="w">  </span><span class="n">zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span>
<span class="w">  </span><span class="n">zero_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">zero_add</span>
<span class="w">  </span><span class="n">add_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">add_zero</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#35753;&#25105;&#20204;&#22788;&#29702; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#30340;&#29305;&#27530;&#24773;&#20917;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#24076;&#26395;&#20351;&#29992;&#20174; <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> &#21040; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#30340;&#24378;&#21046;&#36716;&#25442;&#20197;&#21450; <code class="docutils literal notranslate"><span class="pre">&#8484;</span></code> &#19978;&#30340;&#20056;&#27861;&#26469;&#26500;&#24314; <code class="docutils literal notranslate"><span class="pre">nsmul</span></code> &#12290;&#35831;&#27880;&#24847;&#65292;&#29305;&#21035;&#26159;&#35777;&#26126;&#23383;&#27573;&#21253;&#21547;&#30340;&#24037;&#20316;&#27604;&#19978;&#38754;&#30340;&#40664;&#35748;&#20540;&#35201;&#22810;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">AddMonoid&#8324;</span><span class="w"> </span><span class="n">&#8484;</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">  </span><span class="n">add_assoc&#8323;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.add_assoc</span>
<span class="w">  </span><span class="n">zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">zero_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.zero_add</span>
<span class="w">  </span><span class="n">add_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.add_zero</span>
<span class="w">  </span><span class="n">nsmul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">m</span>
<span class="w">  </span><span class="n">nsmul_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.zero_mul</span>
<span class="w">  </span><span class="n">nsmul_succ</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">m</span>
<span class="w">    </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">Int.add_mul</span><span class="o">,</span><span class="w"> </span><span class="n">Int.add_comm</span><span class="o">,</span><span class="w"> </span><span class="n">Int.one_mul</span><span class="o">]</span>
</pre></div>
</div>
<p>&#35753;&#25105;&#20204;&#26816;&#26597;&#19968;&#19979;&#25105;&#20204;&#26159;&#21542;&#35299;&#20915;&#20102;&#38382;&#39064;&#12290;&#22240;&#20026; Lean &#24050;&#32463;&#26377;&#19968;&#20010;&#33258;&#28982;&#25968;&#21644;&#25972;&#25968;&#30340;&#26631;&#37327;&#20056;&#27861;&#23450;&#20041;&#65292;&#32780;&#25105;&#20204;&#24076;&#26395;&#30830;&#20445;&#20351;&#29992;&#25105;&#20204;&#30340;&#23454;&#20363;&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#20250;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">&#8226;</span></code> &#31526;&#21495;&#65292;&#32780;&#26159;&#35843;&#29992; <code class="docutils literal notranslate"><span class="pre">SMul.mul</span></code> &#24182;&#26126;&#30830;&#25552;&#20379;&#19978;&#38754;&#23450;&#20041;&#30340;&#23454;&#20363;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">SMul.smul</span><span class="w"> </span><span class="o">(</span><span class="n">self</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">mySMul</span><span class="o">)</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#25509;&#19979;&#26469;&#30340;&#25925;&#20107;&#20013;&#65292;&#20250;&#22312;&#32676;&#30340;&#23450;&#20041;&#20013;&#21152;&#20837;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">zsmul</span></code> &#23383;&#27573;&#65292;&#24182;&#37319;&#29992;&#31867;&#20284;&#30340;&#25216;&#24039;&#12290;&#29616;&#22312;&#24744;&#24050;&#32463;&#20934;&#22791;&#22909;&#38405;&#35835; Mathlib &#20013;&#20851;&#20110;&#24186;&#21322;&#32676;&#12289;&#32676;&#12289;&#29615;&#21644;&#27169;&#30340;&#23450;&#20041;&#20102;&#12290;&#23427;&#20204;&#27604;&#25105;&#20204;&#22312;&#36825;&#37324;&#30475;&#21040;&#30340;&#35201;&#22797;&#26434;&#65292;&#22240;&#20026;&#23427;&#20204;&#23646;&#20110;&#19968;&#20010;&#24222;&#22823;&#30340;&#23618;&#32423;&#32467;&#26500;&#65292;&#20294;&#19978;&#38754;&#24050;&#32463;&#35299;&#37322;&#20102;&#25152;&#26377;&#21407;&#21017;&#12290;</p>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#24744;&#21487;&#20197;&#22238;&#21040;&#19978;&#38754;&#26500;&#24314;&#30340;&#24207;&#20851;&#31995;&#23618;&#27425;&#32467;&#26500;&#65292;&#24182;&#23581;&#35797;&#24341;&#20837;&#19968;&#20010;&#25658;&#24102;&#8220;&#23567;&#20110;&#8221;&#31526;&#21495; <cite>&lt;&#8321;</cite> &#30340;&#31867;&#22411;&#31867; <cite>LT&#8321;</cite>&#65292;&#24182;&#30830;&#20445;&#27599;&#20010;&#39044;&#24207;&#37117;&#24102;&#26377;&#19968;&#20010; <cite>&lt;&#8321;</cite>&#65292;&#20854;&#40664;&#35748;&#20540;&#30001; <cite>&#8804;&#8321;</cite> &#26500;&#24314;&#65292;&#24182;&#19988;&#26377;&#19968;&#20010; <cite>Prop</cite> &#20540;&#23383;&#27573;&#65292;&#26029;&#35328;&#36825;&#20004;&#20010;&#27604;&#36739;&#36816;&#31639;&#31526;&#20043;&#38388;&#30340;&#33258;&#28982;&#20851;&#31995;&#12290;
-/</p>
</section>
<section id="section-hierarchies-morphisms">
<span id="id3"></span><h2><span class="section-number">8.2. </span>&#24577;&#23556;<a class="headerlink" href="#section-hierarchies-morphisms" title="Link to this heading">&#61633;</a></h2>
<p>&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#22312;&#26412;&#31456;&#25105;&#20204;&#35752;&#35770;&#20102;&#22914;&#20309;&#21019;&#24314;&#25968;&#23398;&#32467;&#26500;&#30340;&#23618;&#27425;&#32467;&#26500;&#12290;
&#20294;&#23450;&#20041;&#32467;&#26500;&#30340;&#24037;&#20316;&#23578;&#26410;&#23436;&#25104;&#65292;&#38500;&#38750;&#25105;&#20204;&#26377;&#20102;&#24577;&#23556;&#12290;&#36825;&#37324;&#20027;&#35201;&#26377;&#20004;&#31181;&#26041;&#27861;&#12290;&#26368;&#26174;&#32780;&#26131;&#35265;&#30340;&#26041;&#27861;&#26159;&#22312;&#20989;&#25968;&#19978;&#23450;&#20041;&#19968;&#20010;&#35859;&#35789;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">isMonoidHom&#8321;</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Prop</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">f</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g&#39;</span>
</pre></div>
</div>
<p>&#22312;&#36825;&#20010;&#23450;&#20041;&#20013;&#65292;&#20351;&#29992;&#21512;&#21462;&#26377;&#28857;&#19981;&#33258;&#28982;&#12290;&#29305;&#21035;&#26159;&#29992;&#25143;&#22312;&#24819;&#35201;&#35775;&#38382;&#36825;&#20004;&#20010;&#26465;&#20214;&#26102;&#65292;&#38656;&#35201;&#35760;&#20303;&#25105;&#20204;&#36873;&#25321;&#30340;&#39034;&#24207;&#12290;&#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#32467;&#26500;&#26469;&#26367;&#20195;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">isMonoidHom&#8322;</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Prop</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g&#39;</span>
</pre></div>
</div>
<p>&#19968;&#26086;&#21040;&#20102;&#36825;&#37324;&#65292;&#19981;&#31105;&#35753;&#20154;&#32771;&#34385;&#23558;&#20854;&#35774;&#35745;&#20026;&#19968;&#20010;&#31867;&#65292;&#24182;&#20351;&#29992;&#31867;&#22411;&#31867;&#23454;&#20363;&#35299;&#26512;&#36807;&#31243;&#33258;&#21160;&#25512;&#26029;&#22797;&#26434;&#20989;&#25968;&#30340; <code class="docutils literal notranslate"><span class="pre">isMonoidHom&#8322;</span></code> &#65292;&#22522;&#20110;&#31616;&#21333;&#20989;&#25968;&#30340;&#23454;&#20363;&#12290;&#20363;&#22914;&#65292;&#20004;&#20010;&#24186;&#21322;&#32676;&#24577;&#23556;&#30340;&#22797;&#21512;&#20063;&#26159;&#19968;&#20010;&#24186;&#21322;&#32676;&#24577;&#23556;&#65292;&#36825;&#20284;&#20046;&#26159;&#19968;&#20010;&#26377;&#29992;&#30340;&#23454;&#20363;&#12290;&#28982;&#32780;&#65292;&#36825;&#26679;&#30340;&#23454;&#20363;&#23545;&#20110;&#35299;&#26512;&#36807;&#31243;&#26469;&#35828;&#20250;&#38750;&#24120;&#26840;&#25163;&#65292;&#22240;&#20026;&#23427;&#38656;&#35201;&#22312;&#27599;&#20010;&#22320;&#26041;&#23547;&#25214; <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">&#8728;</span> <span class="pre">f</span></code> &#12290;&#22312; <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">(f</span> <span class="pre">x)</span></code> &#20013;&#25214;&#19981;&#21040;&#23427;&#20250;&#38750;&#24120;&#20196;&#20154;&#27822;&#20007;&#12290;&#26356;&#19968;&#33324;&#22320;&#35828;&#65292;&#24517;&#39035;&#22987;&#32456;&#29282;&#35760;&#65292;&#35782;&#21035;&#32473;&#23450;&#34920;&#36798;&#24335;&#20013;&#24212;&#29992;&#20102;&#21738;&#20010;&#20989;&#25968;&#26159;&#19968;&#20010;&#38750;&#24120;&#22256;&#38590;&#30340;&#38382;&#39064;&#65292;&#31216;&#20026;&#8220;&#39640;&#38454;&#21512;&#19968;&#38382;&#39064;&#8221;&#12290;&#22240;&#27492;&#65292;Mathlib &#24182;&#19981;&#37319;&#29992;&#36825;&#31181;&#31867;&#30340;&#26041;&#27861;&#12290;</p>
<p>&#19968;&#20010;&#26356;&#26681;&#26412;&#30340;&#38382;&#39064;&#22312;&#20110;&#65292;&#25105;&#20204;&#26159;&#20687;&#19978;&#38754;&#37027;&#26679;&#20351;&#29992;&#35859;&#35789;&#65288;&#26080;&#35770;&#26159;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">def</span></code> &#36824;&#26159; <code class="docutils literal notranslate"><span class="pre">structure</span></code> &#65289;&#65292;&#36824;&#26159;&#20351;&#29992;&#23558;&#20989;&#25968;&#21644;&#35859;&#35789;&#25414;&#32465;&#22312;&#19968;&#36215;&#30340;&#32467;&#26500;&#12290;&#36825;&#22312;&#19968;&#23450;&#31243;&#24230;&#19978;&#26159;&#19968;&#20010;&#24515;&#29702;&#38382;&#39064;&#12290;&#32771;&#34385;&#20004;&#20010;&#24186;&#21322;&#32676;&#20043;&#38388;&#30340;&#20989;&#25968;&#65292;&#32780;&#35813;&#20989;&#25968;&#19981;&#26159;&#21516;&#24577;&#30340;&#24773;&#20917;&#26497;&#20026;&#32597;&#35265;&#12290;&#24863;&#35273;&#8220;&#24186;&#21322;&#32676;&#21516;&#24577;&#8221;&#19981;&#26159;&#19968;&#20010;&#21487;&#20197;&#36171;&#20104;&#35064;&#20989;&#25968;&#30340;&#24418;&#23481;&#35789;&#65292;&#32780;&#26159;&#19968;&#20010;&#21517;&#35789;&#12290;&#21478;&#19968;&#26041;&#38754;&#65292;&#26377;&#20154;&#21487;&#33021;&#20250;&#35828;&#65292;&#25299;&#25169;&#31354;&#38388;&#20043;&#38388;&#30340;&#36830;&#32493;&#20989;&#25968;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;&#24688;&#22909;&#36830;&#32493;&#30340;&#20989;&#25968;&#12290;&#36825;&#23601;&#26159;&#20026;&#20160;&#20040; Mathlib &#26377;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Continuous</span></code> &#35859;&#35789;&#30340;&#21407;&#22240;&#12290;&#20363;&#22914;&#65292;&#24744;&#21487;&#20197;&#36825;&#26679;&#20889;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Continuous</span><span class="w"> </span><span class="o">(</span><span class="n">id</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">continuous_id</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20173;&#28982;&#26377;&#36830;&#32493;&#20989;&#25968;&#30340;&#26463;&#65292;&#36825;&#22312;&#20363;&#22914;&#20026;&#36830;&#32493;&#20989;&#25968;&#31354;&#38388;&#36171;&#20104;&#25299;&#25169;&#26102;&#24456;&#26041;&#20415;&#65292;&#20294;&#23427;&#20204;&#19981;&#26159;&#22788;&#29702;&#36830;&#32493;&#24615;&#30340;&#20027;&#35201;&#24037;&#20855;&#12290;</p>
<p>&#30456;&#27604;&#20043;&#19979;&#65292;&#21333;&#23376;&#65288;&#25110;&#20854;&#20182;&#20195;&#25968;&#32467;&#26500;&#65289;&#20043;&#38388;&#30340;&#24577;&#23556;&#26159;&#25414;&#32465;&#22312;&#19968;&#36215;&#30340;&#65292;&#20363;&#22914;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w">  </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">H</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">g&#39;</span>
</pre></div>
</div>
<p>&#24403;&#28982;&#65292;&#25105;&#20204;&#19981;&#24819;&#21040;&#22788;&#37117;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">toFun</span></code> &#65292;&#25152;&#20197;&#25105;&#20204;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">CoeFun</span></code> &#31867;&#22411;&#31867;&#26469;&#27880;&#20876;&#19968;&#20010;&#24378;&#21046;&#36716;&#25442;&#12290;&#23427;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;&#25105;&#20204;&#24819;&#35201;&#24378;&#21046;&#36716;&#25442;&#20026;&#20989;&#25968;&#30340;&#31867;&#22411;&#12290;&#31532;&#20108;&#20010;&#21442;&#25968;&#25551;&#36848;&#30446;&#26631;&#20989;&#25968;&#31867;&#22411;&#12290;&#22312;&#25105;&#20204;&#30340;&#20363;&#23376;&#20013;&#65292;&#23545;&#20110;&#27599;&#20010; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">MonoidHom&#8321;</span> <span class="pre">G</span> <span class="pre">H</span></code> &#65292;&#23427;&#24635;&#26159; <code class="docutils literal notranslate"><span class="pre">G</span> <span class="pre">&#8594;</span> <span class="pre">H</span></code> &#12290;&#25105;&#20204;&#36824;&#29992; <code class="docutils literal notranslate"><span class="pre">coe</span></code> &#23646;&#24615;&#26631;&#35760; <code class="docutils literal notranslate"><span class="pre">MonoidHom&#8321;.toFun</span></code> &#65292;&#20197;&#30830;&#20445;&#23427;&#22312;&#31574;&#30053;&#29366;&#24577;&#20013;&#20960;&#20046;&#19981;&#21487;&#35265;&#65292;&#20165;&#36890;&#36807; <code class="docutils literal notranslate"><span class="pre">&#8593;</span></code> &#21069;&#32512;&#26174;&#31034;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">CoeFun</span><span class="w"> </span><span class="o">(</span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">coe</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHom&#8321;.toFun</span>

<span class="kn">attribute</span><span class="w"> </span><span class="o">[</span><span class="n">coe</span><span class="o">]</span><span class="w"> </span><span class="n">MonoidHom&#8321;.toFun</span>
</pre></div>
</div>
<p>&#35753;&#25105;&#20204;&#26816;&#26597;&#19968;&#19979;&#25105;&#20204;&#26159;&#21542;&#30830;&#23454;&#21487;&#20197;&#23558;&#25414;&#32465;&#30340;&#21333;&#23376;&#24577;&#23556;&#24212;&#29992;&#20110;&#19968;&#20010;&#20803;&#32032;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w">  </span><span class="n">f.map_one</span>
</pre></div>
</div>
<p>&#20110;&#20854;&#20182;&#31867;&#22411;&#30340;&#24577;&#23556;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#20570;&#21516;&#26679;&#30340;&#20107;&#24773;&#65292;&#30452;&#21040;&#25105;&#20204;&#36935;&#21040;&#29615;&#24577;&#23556;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">AddMonoidHom&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">G</span><span class="w"> </span><span class="n">H</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w">  </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">H</span>
<span class="w">  </span><span class="n">map_zero</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">map_add</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">g&#39;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid</span><span class="w"> </span><span class="n">G</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">AddMonoid</span><span class="w"> </span><span class="n">H</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">CoeFun</span><span class="w"> </span><span class="o">(</span><span class="n">AddMonoidHom&#8321;</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">H</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">coe</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">AddMonoidHom&#8321;.toFun</span>

<span class="kn">attribute</span><span class="w"> </span><span class="o">[</span><span class="n">coe</span><span class="o">]</span><span class="w"> </span><span class="n">AddMonoidHom&#8321;.toFun</span>

<span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">RingHom&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Ring</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Ring</span><span class="w"> </span><span class="n">S</span><span class="o">]</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="o">,</span><span class="w"> </span><span class="n">AddMonoidHom&#8321;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span>
</pre></div>
</div>
<p>&#36825;&#31181;&#26041;&#27861;&#23384;&#22312;&#19968;&#20123;&#38382;&#39064;&#12290;&#19968;&#20010;&#23567;&#38382;&#39064;&#26159;&#65292;&#25105;&#20204;&#19981;&#22826;&#28165;&#26970;&#22312;&#21738;&#37324;&#25918;&#32622; <code class="docutils literal notranslate"><span class="pre">coe</span></code> &#23646;&#24615;&#65292;&#22240;&#20026; <code class="docutils literal notranslate"><span class="pre">RingHom&#8321;.toFun</span></code> &#24182;&#19981;&#23384;&#22312;&#65292;&#30456;&#20851;&#20989;&#25968;&#26159; <code class="docutils literal notranslate"><span class="pre">MonoidHom&#8321;.toFun</span> <span class="pre">&#8728;</span> <span class="pre">RingHom&#8321;.toMonoidHom&#8321;</span></code> &#65292;&#36825;&#24182;&#19981;&#26159;&#19968;&#20010;&#21487;&#20197;&#26631;&#35760;&#23646;&#24615;&#30340;&#22768;&#26126;&#65288;&#20294;&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">CoeFun</span>&#160; <span class="pre">(RingHom&#8321;</span> <span class="pre">R</span> <span class="pre">S)</span> <span class="pre">(fun</span> <span class="pre">_</span> <span class="pre">&#8614;</span> <span class="pre">R</span> <span class="pre">&#8594;</span> <span class="pre">S)</span></code> &#23454;&#20363;&#65289;&#12290;&#19968;&#20010;&#26356;&#37325;&#35201;&#30340;&#38382;&#39064;&#26159;&#65292;&#20851;&#20110;&#21333;&#23376;&#24577;&#23556;&#30340;&#24341;&#29702;&#19981;&#33021;&#30452;&#25509;&#24212;&#29992;&#12290;&#36825;&#23558;&#24402;&#32467;&#20026;&#35201;&#20040;&#27599;&#27425;&#24212;&#29992;&#21333;&#32676;&#21516;&#24577;&#24341;&#29702;&#26102;&#37117;&#19982; <code class="docutils literal notranslate"><span class="pre">RingHom&#8321;.toMonoidHom&#8321;</span></code> &#25171;&#20132;&#36947;&#65292;&#35201;&#20040;&#20026;&#29615;&#21516;&#24577;&#37325;&#26032;&#38472;&#36848;&#27599;&#20010;&#36825;&#26679;&#30340;&#24341;&#29702;&#12290;&#36825;&#20004;&#31181;&#36873;&#25321;&#37117;&#19981;&#21560;&#24341;&#20154;&#65292;&#22240;&#27492; Mathlib &#22312;&#36825;&#37324;&#20351;&#29992;&#20102;&#19968;&#20010;&#26032;&#30340;&#23618;&#27425;&#32467;&#26500;&#25216;&#24039;&#12290;&#20854;&#24819;&#27861;&#26159;&#23450;&#20041;&#19968;&#20010;&#33267;&#23569;&#20026;&#21333;&#32676;&#21516;&#24577;&#30340;&#23545;&#35937;&#30340;&#31867;&#22411;&#31867;&#65292;&#29992;&#21333;&#32676;&#21516;&#24577;&#21644;&#29615;&#21516;&#24577;&#23454;&#20363;&#21270;&#35813;&#31867;&#65292;&#24182;&#20351;&#29992;&#23427;&#26469;&#38472;&#36848;&#27599;&#20010;&#24341;&#29702;&#12290;&#22312;&#19979;&#38754;&#30340;&#23450;&#20041;&#20013;&#65292;  <code class="docutils literal notranslate"><span class="pre">F</span></code>  &#21487;&#20197;&#26159;   <code class="docutils literal notranslate"><span class="pre">MonoidHom&#8321;</span> <span class="pre">M</span> <span class="pre">N</span></code>  &#65292;&#25110;&#32773;&#22914;&#26524;   <code class="docutils literal notranslate"><span class="pre">M</span></code>   &#21644;   <code class="docutils literal notranslate"><span class="pre">N</span></code>   &#20855;&#26377;&#29615;&#32467;&#26500;&#65292;&#21017;&#20026;   <code class="docutils literal notranslate"><span class="pre">RingHom&#8321;</span> <span class="pre">M</span> <span class="pre">N</span></code>  &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">MonoidHomClass&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">N</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="o">,</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g&#39;</span>
</pre></div>
</div>
<p>&#28982;&#32780;&#65292;&#19978;&#36848;&#23454;&#29616;&#23384;&#22312;&#19968;&#20010;&#38382;&#39064;&#12290;&#25105;&#20204;&#23578;&#26410;&#27880;&#20876;&#21040;&#20989;&#25968;&#23454;&#20363;&#30340;&#24378;&#21046;&#36716;&#25442;&#12290;&#35753;&#25105;&#20204;&#29616;&#22312;&#23581;&#35797;&#36825;&#26679;&#20570;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">badInst</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">MonoidHomClass&#8321;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">CoeFun</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">coe</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHomClass&#8321;.toFun</span>
</pre></div>
</div>
<dl class="simple">
<dt>&#23558;&#27492;&#35774;&#20026;&#23454;&#20363;&#26159;&#19981;&#22909;&#30340;&#12290;&#24403;&#38754;&#23545;&#31867;&#20284;   <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span></code>   &#30340;&#24773;&#20917;&#65292;&#32780;   <code class="docutils literal notranslate"><span class="pre">f</span></code>   &#30340;&#31867;&#22411;&#19981;&#26159;&#20989;&#25968;&#31867;&#22411;&#26102;&#65292;Lean &#20250;&#23581;&#35797;&#26597;&#25214;&#19968;&#20010;   <code class="docutils literal notranslate"><span class="pre">CoeFun</span></code>   &#23454;&#20363;&#26469;&#23558;   <code class="docutils literal notranslate"><span class="pre">f</span></code>   &#36716;&#25442;&#20026;&#20989;&#25968;&#12290;&#19978;&#36848;&#20989;&#25968;&#30340;&#31867;&#22411;&#20026;&#65306;</dt><dd><p><code class="docutils literal notranslate"><span class="pre">{M</span> <span class="pre">N</span> <span class="pre">F</span> <span class="pre">:</span> <span class="pre">Type}</span> <span class="pre">&#8594;</span> <span class="pre">[Monoid</span> <span class="pre">M]</span> <span class="pre">&#8594;</span> <span class="pre">[Monoid</span> <span class="pre">N]</span> <span class="pre">&#8594;</span> <span class="pre">[MonoidHomClass&#8321;</span> <span class="pre">F</span> <span class="pre">M</span> <span class="pre">N]</span> <span class="pre">&#8594;</span> <span class="pre">CoeFun</span> <span class="pre">F</span> <span class="pre">(fun</span> <span class="pre">x</span> <span class="pre">&#8614;</span> <span class="pre">M</span> <span class="pre">&#8594;</span> <span class="pre">N)</span></code></p>
</dd>
</dl>
<p>&#22240;&#27492;&#65292;&#22312;&#23581;&#35797;&#24212;&#29992;&#23427;&#26102;&#65292;Lean &#26080;&#27861;&#39044;&#20808;&#30830;&#23450;&#26410;&#30693;&#31867;&#22411;   <code class="docutils literal notranslate"><span class="pre">M</span></code>  &#12289;  <code class="docutils literal notranslate"><span class="pre">N</span></code>  &#21644;   <code class="docutils literal notranslate"><span class="pre">F</span></code>   &#24212;&#35813;&#20197;&#20309;&#31181;&#39034;&#24207;&#36827;&#34892;&#25512;&#26029;&#12290;&#36825;&#19982;&#25105;&#20204;&#20043;&#21069;&#30475;&#21040;&#30340;&#24773;&#20917;&#30053;&#26377;&#19981;&#21516;&#65292;&#20294;&#24402;&#26681;&#32467;&#24213;&#26159;&#21516;&#19968;&#20010;&#38382;&#39064;&#65306;&#22312;&#19981;&#30693;&#36947;   <code class="docutils literal notranslate"><span class="pre">M</span></code>   &#30340;&#24773;&#20917;&#19979;&#65292;Lean &#23558;&#19981;&#24471;&#19981;&#22312;&#26410;&#30693;&#31867;&#22411;&#19978;&#25628;&#32034;&#21333;&#23376;&#23454;&#20363;&#65292;&#20174;&#32780;&#26080;&#26395;&#22320;&#23581;&#35797;&#25968;&#25454;&#24211;&#20013;&#30340;&#27599;&#19968;&#20010;&#21333;&#23376;&#23454;&#20363;&#12290;&#22914;&#26524;&#24744;&#24819;&#30475;&#30475;&#36825;&#31181;&#23454;&#20363;&#30340;&#25928;&#26524;&#65292;&#21487;&#20197;&#22312;&#19978;&#36848;&#22768;&#26126;&#30340;&#39030;&#37096;&#36755;&#20837;   <code class="docutils literal notranslate"><span class="pre">set_option</span> <span class="pre">synthInstance.checkSynthOrder</span> <span class="pre">false</span> <span class="pre">in</span></code>  &#65292;&#23558;   <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">badInst</span></code>   &#26367;&#25442;&#20026;   <code class="docutils literal notranslate"><span class="pre">instance</span></code>  &#65292;&#28982;&#21518;&#22312;&#36825;&#20010;&#25991;&#20214;&#20013;&#26597;&#25214;&#38543;&#26426;&#20986;&#29616;&#30340;&#38169;&#35823;&#12290;</p>
<p>&#22312;&#36825;&#37324;&#65292;&#35299;&#20915;&#26041;&#26696;&#24456;&#31616;&#21333;&#65292;&#25105;&#20204;&#38656;&#35201;&#21578;&#35785; Lean &#20808;&#26597;&#25214;&#20160;&#20040;&#26159; <code class="docutils literal notranslate"><span class="pre">F</span></code> &#65292;&#28982;&#21518;&#20877;&#25512;&#23548;&#20986; <code class="docutils literal notranslate"><span class="pre">M</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#12290;&#36825;&#21487;&#20197;&#36890;&#36807;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">outParam</span></code> &#20989;&#25968;&#26469;&#23454;&#29616;&#12290;&#35813;&#20989;&#25968;&#34987;&#23450;&#20041;&#20026;&#24658;&#31561;&#20989;&#25968;&#65292;&#20294;&#20173;&#20250;&#34987;&#31867;&#22411;&#31867;&#26426;&#21046;&#35782;&#21035;&#65292;&#24182;&#35302;&#21457;&#25152;&#38656;&#30340;&#34892;&#20026;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#21487;&#20197;&#37325;&#26032;&#23450;&#20041;&#25105;&#20204;&#30340;&#31867;&#65292;&#27880;&#24847;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">outParam</span></code> &#20989;&#25968;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">outParam</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">N</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="o">,</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g&#39;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">MonoidHomClass&#8322;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">CoeFun</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">coe</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;.toFun</span>

<span class="kn">attribute</span><span class="w"> </span><span class="o">[</span><span class="n">coe</span><span class="o">]</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;.toFun</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#32487;&#32493;&#25191;&#34892;&#25105;&#20204;&#30340;&#35745;&#21010;&#65292;&#23454;&#20363;&#21270;&#36825;&#20010;&#31867;&#20102;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHom&#8321;.toFun</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">f.map_one</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">f.map_mul</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Ring</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Ring</span><span class="w"> </span><span class="n">S</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">RingHom&#8321;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="o">)</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">f.toMonoidHom&#8321;.toFun</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">f.toMonoidHom&#8321;.map_one</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">f.toMonoidHom&#8321;.map_mul</span>
</pre></div>
</div>
<p>&#27491;&#22914;&#25152;&#25215;&#35834;&#30340;&#37027;&#26679;&#65292;&#25105;&#20204;&#23545; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">F</span></code> &#22312;&#20551;&#35774;&#23384;&#22312; <code class="docutils literal notranslate"><span class="pre">MonoidHomClass&#8321;</span> <span class="pre">F</span></code> &#30340;&#23454;&#20363;&#30340;&#24773;&#20917;&#19979;&#25152;&#35777;&#26126;&#30340;&#27599;&#20010;&#24341;&#29702;&#65292;&#37117;&#23558;&#21516;&#26102;&#36866;&#29992;&#20110;&#24186;&#21322;&#32676;&#21516;&#24577;&#21644;&#29615;&#21516;&#24577;&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#31034;&#20363;&#24341;&#29702;&#65292;&#24182;&#26816;&#26597;&#23427;&#26159;&#21542;&#36866;&#29992;&#20110;&#36825;&#20004;&#31181;&#24773;&#20917;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">lemma</span><span class="w"> </span><span class="n">map_inv_of_inv</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">MonoidHomClass&#8322;</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">m</span><span class="w"> </span><span class="n">m&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="bp">*</span><span class="n">m&#39;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">f</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">m&#39;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;.map_mul</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="o">,</span><span class="w"> </span><span class="n">MonoidHomClass&#8322;.map_one</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">m</span><span class="w"> </span><span class="n">m&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="bp">*</span><span class="n">m&#39;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">m&#39;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span>
<span class="n">map_inv_of_inv</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">h</span>

<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Ring</span><span class="w"> </span><span class="n">R</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Ring</span><span class="w"> </span><span class="n">S</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">RingHom&#8321;</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">r</span><span class="w"> </span><span class="n">r&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">r</span><span class="bp">*</span><span class="n">r&#39;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">r&#39;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span>
<span class="n">map_inv_of_inv</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#20045;&#19968;&#30475;&#65292;&#21487;&#33021;&#20250;&#35273;&#24471;&#25105;&#20204;&#21448;&#22238;&#21040;&#20102;&#20043;&#21069;&#37027;&#20010;&#31967;&#31957;&#30340;&#24819;&#27861;&#65292;&#21363;&#25226;   <code class="docutils literal notranslate"><span class="pre">MonoidHom&#8321;</span></code>   &#35774;&#20026;&#19968;&#20010;&#31867;&#12290;
&#20294;&#20854;&#23454;&#24182;&#38750;&#22914;&#27492;&#12290;&#19968;&#20999;&#37117;&#25552;&#21319;&#20102;&#19968;&#20010;&#25277;&#35937;&#23618;&#27425;&#12290;&#31867;&#22411;&#31867;&#35299;&#26512;&#36807;&#31243;&#19981;&#20250;&#23547;&#25214;&#20989;&#25968;&#65292;&#32780;&#26159;&#23547;&#25214;   <code class="docutils literal notranslate"><span class="pre">MonoidHom&#8321;</span></code>   &#25110;&#32773;   <code class="docutils literal notranslate"><span class="pre">RingHom&#8321;</span></code>   &#12290;</p>
<p>&#25105;&#20204;&#26041;&#27861;&#20013;&#20173;&#23384;&#22312;&#30340;&#19968;&#20010;&#38382;&#39064;&#26159;&#22312;&#22260;&#32469;   <code class="docutils literal notranslate"><span class="pre">toFun</span></code>   &#23383;&#27573;&#20197;&#21450;&#30456;&#24212;&#30340;   <code class="docutils literal notranslate"><span class="pre">CoeFun</span></code>   &#23454;&#20363;&#21644;   <code class="docutils literal notranslate"><span class="pre">coe</span></code>   &#23646;&#24615;&#30340;&#22320;&#26041;&#23384;&#22312;&#37325;&#22797;&#20195;&#30721;&#12290;&#21478;&#22806;&#65292;&#26368;&#22909;&#35760;&#24405;&#19979;&#36825;&#31181;&#27169;&#24335;&#20165;&#29992;&#20110;&#20855;&#26377;&#39069;&#22806;&#23646;&#24615;&#30340;&#20989;&#25968;&#65292;&#36825;&#24847;&#21619;&#30528;&#23545;&#20989;&#25968;&#30340;&#24378;&#21046;&#36716;&#25442;&#24212;&#35813;&#26159;&#21333;&#23556;&#30340;&#12290;&#22240;&#27492;&#65292;Mathlib &#22312;&#36825;&#20010;&#22522;&#30784;&#23618;&#20043;&#19978;&#21448;&#22686;&#21152;&#20102;&#19968;&#23618;&#25277;&#35937;&#65292;&#21363;&#22522;&#30784;&#31867;   <code class="docutils literal notranslate"><span class="pre">DFunLike</span></code>  &#65288;&#20854;&#20013;&#8220;DFun&#8221;&#20195;&#34920;&#20381;&#36182;&#20989;&#25968;&#65289;&#12290;&#35753;&#25105;&#20204;&#22522;&#20110;&#36825;&#20010;&#22522;&#30784;&#23618;&#37325;&#26032;&#23450;&#20041;&#25105;&#20204;&#30340;   <code class="docutils literal notranslate"><span class="pre">MonoidHomClass</span></code>  &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">MonoidHomClass&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">outParam</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="kd">extends</span>
<span class="w">    </span><span class="n">DFunLike</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">F</span><span class="o">)</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g&#39;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g&#39;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">MonoidHomClass&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">coe</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHom&#8321;.toFun</span>
<span class="w">  </span><span class="n">coe_injective&#39;</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHom&#8321;.ext</span>
<span class="w">  </span><span class="n">map_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHom&#8321;.map_one</span>
<span class="w">  </span><span class="n">map_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">MonoidHom&#8321;.map_mul</span>
</pre></div>
</div>
<p>&#24403;&#28982;&#65292;&#24577;&#23556;&#30340;&#23618;&#27425;&#32467;&#26500;&#19981;&#27490;&#20110;&#27492;&#12290;&#25105;&#20204;&#36824;&#21487;&#20197;&#32487;&#32493;&#23450;&#20041;&#19968;&#20010;&#31867;   <code class="docutils literal notranslate"><span class="pre">RingHomClass&#8323;</span></code>   &#26469;&#25193;&#23637;   <code class="docutils literal notranslate"><span class="pre">MonoidHomClass&#8323;</span></code>   &#65292;&#28982;&#21518;&#23558;&#20854;&#23454;&#20363;&#21270;&#20026;   <code class="docutils literal notranslate"><span class="pre">RingHom</span></code>   &#65292;&#20043;&#21518;&#20877;&#23454;&#20363;&#21270;&#20026;   <code class="docutils literal notranslate"><span class="pre">AlgebraHom</span></code>   &#65288;&#20195;&#25968;&#26159;&#20855;&#26377;&#26576;&#20123;&#39069;&#22806;&#32467;&#26500;&#30340;&#29615;&#65289;&#12290;&#19981;&#36807;&#65292;&#25105;&#20204;&#24050;&#32463;&#28085;&#30422;&#20102; Mathlib &#20013;&#29992;&#20110;&#24577;&#23556;&#30340;&#20027;&#35201;&#24418;&#24335;&#21270;&#24605;&#24819;&#65292;&#24744;&#24212;&#35813;&#24050;&#32463;&#20934;&#22791;&#22909;&#29702;&#35299; Mathlib &#20013;&#24577;&#23556;&#30340;&#23450;&#20041;&#26041;&#24335;&#20102;&#12290;
&#20316;&#20026;&#32451;&#20064;&#65292;&#24744;&#24212;&#24403;&#23581;&#35797;&#23450;&#20041;&#26377;&#24207;&#31867;&#22411;&#20043;&#38388;&#30340;&#20445;&#24207;&#20989;&#25968;&#31867;&#65292;&#20197;&#21450;&#20445;&#24207;&#24186;&#21322;&#32676;&#21516;&#24577;&#12290;&#36825;&#20165;&#29992;&#20110;&#35757;&#32451;&#30446;&#30340;&#12290;&#19982;&#36830;&#32493;&#20989;&#25968;&#31867;&#20284;&#65292;&#22312; Mathlib &#20013;&#20445;&#24207;&#20989;&#25968;&#20027;&#35201;&#26159;&#26410;&#25171;&#21253;&#30340;&#65292;&#23427;&#20204;&#36890;&#36807;   <code class="docutils literal notranslate"><span class="pre">Monotone</span></code>   &#39044;&#35328;&#26469;&#23450;&#20041;&#12290;&#24403;&#28982;&#65292;&#24744;&#38656;&#35201;&#23436;&#25104;&#19979;&#38754;&#30340;&#31867;&#23450;&#20041;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">OrderPresHom</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">toFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="w">  </span><span class="n">le_of_le</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">a&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">a&#39;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="n">a&#39;</span>

<span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">OrderPresMonoidHom</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">N</span><span class="o">]</span><span class="w"> </span><span class="kd">extends</span>
<span class="n">MonoidHom&#8321;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span><span class="o">,</span><span class="w"> </span><span class="n">OrderPresHom</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">N</span>

<span class="kd">class</span><span class="w"> </span><span class="n">OrderPresHomClass</span><span class="w"> </span><span class="o">(</span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">outParam</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">OrderPresHomClass</span><span class="w"> </span><span class="o">(</span><span class="n">OrderPresHom</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">where</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">OrderPresHomClass</span><span class="w"> </span><span class="o">(</span><span class="n">OrderPresMonoidHom</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">where</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">LE</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">MonoidHomClass&#8323;</span><span class="w"> </span><span class="o">(</span><span class="n">OrderPresMonoidHom</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="w">  </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="section-hierarchies-subobjects">
<span id="id4"></span><h2><span class="section-number">8.3. </span>&#23376;&#23545;&#35937;<a class="headerlink" href="#section-hierarchies-subobjects" title="Link to this heading">&#61633;</a></h2>
<p>&#23450;&#20041;&#20102;&#19968;&#20123;&#20195;&#25968;&#32467;&#26500;&#21450;&#20854;&#24577;&#23556;&#20043;&#21518;&#65292;&#19979;&#19968;&#27493;&#26159;&#32771;&#34385;&#32487;&#25215;&#36825;&#31181;&#20195;&#25968;&#32467;&#26500;&#30340;&#38598;&#21512;&#65292;&#20363;&#22914;&#23376;&#32676;&#25110;&#23376;&#29615;&#12290;
&#36825;&#22312;&#24456;&#22823;&#31243;&#24230;&#19978;&#19982;&#25105;&#20204;&#20043;&#21069;&#30340;&#35805;&#39064;&#37325;&#21472;&#12290;&#23454;&#38469;&#19978;&#65292; <code class="docutils literal notranslate"><span class="pre">X</span></code> &#20013;&#30340;&#19968;&#20010;&#38598;&#21512;&#26159;&#20316;&#20026;&#20174; <code class="docutils literal notranslate"><span class="pre">X</span></code> &#21040; <code class="docutils literal notranslate"><span class="pre">Prop</span></code> &#30340;&#20989;&#25968;&#26469;&#23454;&#29616;&#30340;&#65292;&#22240;&#27492;&#23376;&#23545;&#35937;&#26159;&#28385;&#36275;&#29305;&#23450;&#35859;&#35789;&#30340;&#20989;&#25968;&#12290;
&#22240;&#27492;&#65292;&#25105;&#20204;&#21487;&#20197;&#37325;&#29992;&#35768;&#22810;&#23548;&#33268; <code class="docutils literal notranslate"><span class="pre">DFunLike</span></code> &#31867;&#21450;&#20854;&#21518;&#20195;&#30340;&#24819;&#27861;&#12290;
&#25105;&#20204;&#19981;&#20250;&#37325;&#29992; <code class="docutils literal notranslate"><span class="pre">DFunLike</span></code> &#26412;&#36523;&#65292;&#22240;&#20026;&#36825;&#20250;&#30772;&#22351;&#20174; <code class="docutils literal notranslate"><span class="pre">Set</span> <span class="pre">X</span></code> &#21040; <code class="docutils literal notranslate"><span class="pre">X</span> <span class="pre">&#8594;</span> <span class="pre">Prop</span></code> &#30340;&#25277;&#35937;&#23631;&#38556;&#12290;&#21462;&#32780;&#20195;&#20043;&#30340;&#26159;&#26377;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">SetLike</span></code> &#31867;&#12290;&#35813;&#31867;&#19981;&#26159;&#23558;&#19968;&#20010;&#23884;&#20837;&#21253;&#35013;&#21040;&#20989;&#25968;&#31867;&#22411;&#20013;&#65292;&#32780;&#26159;&#23558;&#20854;&#21253;&#35013;&#21040; <code class="docutils literal notranslate"><span class="pre">Set</span></code> &#31867;&#22411;&#20013;&#65292;&#24182;&#23450;&#20041;&#30456;&#24212;&#30340;&#24378;&#21046;&#36716;&#25442;&#21644; <code class="docutils literal notranslate"><span class="pre">Membership</span></code> &#23454;&#20363;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="sd">/-- &#23376;&#24186;&#21322;&#32676;&#30340;&#36733;&#20307;&#12290; -/</span>
<span class="w">  </span><span class="n">carrier</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set</span><span class="w"> </span><span class="n">M</span>
<span class="w">  </span><span class="sd">/-- &#23376;&#24186;&#21322;&#32676;&#20013;&#20004;&#20010;&#20803;&#32032;&#30340;&#20056;&#31215;&#23646;&#20110;&#35813;&#23376;&#24186;&#21322;&#32676;&#12290; -/</span>
<span class="w">  </span><span class="n">mul_mem</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">carrier</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">carrier</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">carrier</span>
<span class="w">  </span><span class="sd">/-- &#21333;&#20301;&#20803;&#32032;&#23646;&#20110;&#23376;&#24186;&#21322;&#32676;&#12290; -/</span>
<span class="w">  </span><span class="n">one_mem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">carrier</span>

<span class="sd">/-- `M` &#20013;&#30340;&#23376;&#24186;&#21322;&#32676;&#21487;&#20197;&#34987;&#35270;&#20026; `M` &#20013;&#30340;&#38598;&#21512; -/</span>
<span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">SetLike</span><span class="w"> </span><span class="o">(</span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">coe</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submonoid&#8321;.carrier</span>
<span class="w">  </span><span class="n">coe_injective&#39;</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submonoid&#8321;.ext</span>
</pre></div>
</div>
<p>&#20511;&#21161;&#19978;&#36848;&#30340; <code class="docutils literal notranslate"><span class="pre">SetLike</span></code> &#23454;&#20363;&#65292;&#25105;&#20204;&#24050;&#32463;&#21487;&#20197;&#24456;&#33258;&#28982;&#22320;&#34920;&#36848;&#23376;&#24186;&#21322;&#32676; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#21253;&#21547; <code class="docutils literal notranslate"><span class="pre">1</span></code> &#65292;&#32780;&#26080;&#38656;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">N.carrier</span></code> &#12290;
&#25105;&#20204;&#36824;&#21487;&#20197;&#23558; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#20316;&#20026; <code class="docutils literal notranslate"><span class="pre">M</span></code> &#20013;&#30340;&#19968;&#20010;&#38598;&#21512;&#26469;&#22788;&#29702;&#65292;&#25110;&#32773;&#22312;&#26144;&#23556;&#19979;&#21462;&#20854;&#30452;&#25509;&#20687;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">N.one_mem</span>

<span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">&#39;&#39;</span><span class="w"> </span><span class="n">N</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#36824;&#26377;&#19968;&#20010;&#21040; <code class="docutils literal notranslate"><span class="pre">Type</span></code> &#30340;&#24378;&#21046;&#36716;&#25442;&#65292;&#23427;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Subtype</span></code> &#65292;&#22240;&#27492;&#65292;&#32473;&#23450;&#19968;&#20010;&#23376;&#24186;&#21322;&#32676; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#65292;&#25105;&#20204;&#21487;&#20197;&#20889;&#19968;&#20010;&#21442;&#25968; <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">:</span> <span class="pre">N)</span></code> &#65292;&#20854;&#21487;&#20197;&#34987;&#24378;&#21046;&#36716;&#25442;&#20026;&#23646;&#20110; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#30340; <code class="docutils literal notranslate"><span class="pre">M</span></code> &#30340;&#19968;&#20010;&#20803;&#32032;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x.property</span>
</pre></div>
</div>
<p>&#21033;&#29992;&#36825;&#31181;&#21040; <code class="docutils literal notranslate"><span class="pre">Type</span></code> &#30340;&#24378;&#21046;&#36716;&#25442;&#65292;&#25105;&#20204;&#36824;&#21487;&#20197;&#35299;&#20915;&#20026;&#23376;&#24186;&#21322;&#32676;&#37197;&#22791;&#24186;&#21322;&#32676;&#32467;&#26500;&#30340;&#20219;&#21153;&#12290;&#25105;&#20204;&#23558;&#20351;&#29992;&#19978;&#36848;&#19982; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#30456;&#20851;&#32852;&#30340;&#31867;&#22411;&#30340;&#24378;&#21046;&#36716;&#25442;&#65292;&#20197;&#21450;&#26029;&#35328;&#36825;&#31181;&#24378;&#21046;&#36716;&#25442;&#26159;&#21333;&#23556;&#30340;&#24341;&#29702; <code class="docutils literal notranslate"><span class="pre">SetCoe.ext</span></code> &#12290;&#36825;&#20004;&#32773;&#22343;&#30001; <code class="docutils literal notranslate"><span class="pre">SetLike</span></code> &#23454;&#20363;&#25552;&#20379;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="n">SubMonoid&#8321;Monoid</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">N.mul_mem</span><span class="w"> </span><span class="n">x.property</span><span class="w"> </span><span class="n">y.property</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">SetCoe.ext</span><span class="w"> </span><span class="o">(</span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="o">)</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">N.one_mem</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">SetCoe.ext</span><span class="w"> </span><span class="o">(</span><span class="n">one_mul</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">))</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">SetCoe.ext</span><span class="w"> </span><span class="o">(</span><span class="n">mul_one</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">))</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#22312;&#19978;&#36848;&#23454;&#20363;&#20013;&#65292;&#25105;&#20204;&#26412;&#21487;&#20197;&#20351;&#29992;&#35299;&#26500;&#32465;&#23450;&#22120;&#65292;&#32780;&#19981;&#26159;&#20351;&#29992;&#21040; <code class="docutils literal notranslate"><span class="pre">M</span></code> &#30340;&#24378;&#21046;&#36716;&#25442;&#24182;&#35843;&#29992; <code class="docutils literal notranslate"><span class="pre">property</span></code> &#23383;&#27573;&#65292;&#22914;&#19979;&#25152;&#31034;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Monoid</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">hx</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">hy</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="bp">*</span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">N.mul_mem</span><span class="w"> </span><span class="n">hx</span><span class="w"> </span><span class="n">hy</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">SetCoe.ext</span><span class="w"> </span><span class="o">(</span><span class="n">mul_assoc</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="o">)</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">N.one_mem</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">SetCoe.ext</span><span class="w"> </span><span class="o">(</span><span class="n">one_mul</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">SetCoe.ext</span><span class="w"> </span><span class="o">(</span><span class="n">mul_one</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
<p>&#20026;&#20102;&#23558;&#20851;&#20110;&#23376;&#24186;&#21322;&#32676;&#30340;&#24341;&#29702;&#24212;&#29992;&#20110;&#23376;&#32676;&#25110;&#23376;&#29615;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#31867;&#65292;&#23601;&#20687;&#23545;&#20110;&#21516;&#24577;&#19968;&#26679;&#12290;&#35831;&#27880;&#24847;&#65292;&#36825;&#20010;&#31867;&#23558;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">SetLike</span></code> &#23454;&#20363;&#20316;&#20026;&#21442;&#25968;&#65292;&#22240;&#27492;&#23427;&#19981;&#38656;&#35201;&#36733;&#20307;&#23383;&#27573;&#65292;&#24182;&#19988;&#21487;&#20197;&#22312;&#20854;&#23383;&#27573;&#20013;&#20351;&#29992;&#25104;&#21592;&#31526;&#21495;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">SubmonoidClass&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">S</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">SetLike</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Prop</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul_mem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">S</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="o">},</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span>
<span class="w">  </span><span class="n">one_mem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">S</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">SubmonoidClass&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul_mem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submonoid&#8321;.mul_mem</span>
<span class="w">  </span><span class="n">one_mem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Submonoid&#8321;.one_mem</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#32451;&#20064;&#65292;&#24744;&#24212;&#35813;&#23450;&#20041;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Subgroup&#8321;</span></code> &#32467;&#26500;&#65292;&#20026;&#20854;&#36171;&#20104;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">SetLike</span></code> &#23454;&#20363;&#21644;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">SubmonoidClass&#8321;</span></code> &#23454;&#20363;&#65292;&#22312;&#19982; <code class="docutils literal notranslate"><span class="pre">Subgroup&#8321;</span></code> &#30456;&#20851;&#32852;&#30340;&#23376;&#31867;&#22411;&#19978;&#25918;&#32622;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#23454;&#20363;&#65292;&#24182;&#23450;&#20041;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">SubgroupClass&#8321;</span></code> &#31867;&#12290;</p>
<p>&#22312; Mathlib &#20013;&#65292;&#20851;&#20110;&#32473;&#23450;&#20195;&#25968;&#23545;&#35937;&#30340;&#23376;&#23545;&#35937;&#65292;&#36824;&#26377;&#19968;&#28857;&#38750;&#24120;&#37325;&#35201;&#65292;&#37027;&#23601;&#26159;&#23427;&#20204;&#24635;&#26159;&#26500;&#25104;&#19968;&#20010;&#23436;&#22791;&#26684;&#65292;&#36825;&#31181;&#32467;&#26500;&#34987;&#22823;&#37327;&#20351;&#29992;&#12290;&#20363;&#22914;&#65292;&#24744;&#21487;&#33021;&#20250;&#23547;&#25214;&#19968;&#20010;&#20851;&#20110;&#23376;&#24186;&#21322;&#32676;&#20132;&#38598;&#20173;&#26159;&#23376;&#24186;&#21322;&#32676;&#30340;&#24341;&#29702;&#12290;&#20294;&#36825;&#19981;&#20250;&#26159;&#19968;&#20010;&#24341;&#29702;&#65292;&#32780;&#26159;&#19968;&#20010;&#19979;&#30830;&#30028;&#26500;&#36896;&#12290;&#25105;&#20204;&#26469;&#30475;&#20004;&#20010;&#23376;&#24186;&#21322;&#32676;&#30340;&#24773;&#20917;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Inf</span><span class="w"> </span><span class="o">(</span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="n">S&#8321;</span><span class="w"> </span><span class="n">S&#8322;</span><span class="w"> </span><span class="bp">&#8614;</span>
<span class="w">    </span><span class="o">{</span><span class="w"> </span><span class="n">carrier</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">S&#8321;</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">S&#8322;</span>
<span class="w">      </span><span class="n">one_mem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">S&#8321;.one_mem</span><span class="o">,</span><span class="w"> </span><span class="n">S&#8322;.one_mem</span><span class="o">&#10217;</span>
<span class="w">      </span><span class="n">mul_mem</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">hx</span><span class="o">,</span><span class="w"> </span><span class="n">hx&#39;</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">hy</span><span class="o">,</span><span class="w"> </span><span class="n">hy&#39;</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">S&#8321;.mul_mem</span><span class="w"> </span><span class="n">hx</span><span class="w"> </span><span class="n">hy</span><span class="o">,</span><span class="w"> </span><span class="n">S&#8322;.mul_mem</span><span class="w"> </span><span class="n">hx&#39;</span><span class="w"> </span><span class="n">hy&#39;</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">}&#10217;</span>
</pre></div>
</div>
<p>&#36825;&#20351;&#24471;&#20004;&#20010;&#23376;&#24186;&#21322;&#32676;&#30340;&#20132;&#38598;&#33021;&#22815;&#20316;&#20026;&#19968;&#20010;&#23376;&#24186;&#21322;&#32676;&#24471;&#21040;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">[</span><span class="n">Monoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid&#8321;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="bp">&#8851;</span><span class="w"> </span><span class="n">P</span>
</pre></div>
</div>
<p>&#24744;&#21487;&#33021;&#20250;&#35273;&#24471;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#20351;&#29992;&#19979;&#30830;&#30028;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">&#8851;</span></code> &#32780;&#19981;&#26159;&#20132;&#38598;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">&#8745;</span></code> &#24456;&#36951;&#25022;&#12290;&#20294;&#24819;&#24819;&#19978;&#30830;&#30028;&#12290;&#20004;&#20010;&#23376;&#24186;&#21322;&#32676;&#30340;&#24182;&#38598;&#19981;&#26159;&#23376;&#24186;&#21322;&#32676;&#12290;&#28982;&#32780;&#65292;&#23376;&#24186;&#21322;&#32676;&#20173;&#28982;&#26500;&#25104;&#19968;&#20010;&#26684;&#65288;&#29978;&#33267;&#26159;&#23436;&#22791;&#26684;&#65289;&#12290;&#23454;&#38469;&#19978;&#65292; <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">&#8852;</span> <span class="pre">P</span></code> &#26159;&#30001; <code class="docutils literal notranslate"><span class="pre">N</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">P</span></code> &#30340;&#24182;&#38598;&#29983;&#25104;&#30340;&#23376;&#24186;&#21322;&#32676;&#65292;&#24403;&#28982;&#29992; <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">&#8746;</span> <span class="pre">P</span></code> &#26469;&#34920;&#31034;&#20250;&#38750;&#24120;&#20196;&#20154;&#22256;&#24785;&#12290;&#25152;&#20197;&#24744;&#21487;&#20197;&#30475;&#21040;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">&#8851;</span> <span class="pre">P</span></code> &#35201;&#19968;&#33268;&#24471;&#22810;&#12290;&#22312;&#21508;&#31181;&#20195;&#25968;&#32467;&#26500;&#20013;&#65292;&#36825;&#31181;&#34920;&#31034;&#27861;&#20063;&#26356;&#21152;&#19968;&#33268;&#12290;&#19968;&#24320;&#22987;&#30475;&#21040;&#20004;&#20010;&#23376;&#31354;&#38388; <code class="docutils literal notranslate"><span class="pre">E</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">F</span></code> &#30340;&#21644;&#29992; <code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">&#8852;</span> <span class="pre">F</span></code> &#32780;&#19981;&#26159; <code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">+</span> <span class="pre">F</span></code> &#34920;&#31034;&#21487;&#33021;&#20250;&#35273;&#24471;&#26377;&#28857;&#22855;&#24618;&#12290;&#20294;&#24744;&#20250;&#20064;&#24815;&#30340;&#12290;&#24456;&#24555;&#20320;&#23601;&#20250;&#35273;&#24471; <code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">+</span> <span class="pre">F</span></code> &#36825;&#31181;&#34920;&#31034;&#27861;&#26159;&#19968;&#31181;&#24178;&#25200;&#65292;&#23427;&#24378;&#35843;&#30340;&#26159;&#19968;&#20010;&#20598;&#28982;&#30340;&#20107;&#23454;&#65292;&#21363; <code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">&#8852;</span> <span class="pre">F</span></code> &#30340;&#20803;&#32032;&#21487;&#20197;&#20889;&#25104; <code class="docutils literal notranslate"><span class="pre">E</span></code> &#30340;&#19968;&#20010;&#20803;&#32032;&#19982; <code class="docutils literal notranslate"><span class="pre">F</span></code> &#30340;&#19968;&#20010;&#20803;&#32032;&#20043;&#21644;&#65292;&#32780;&#19981;&#26159;&#24378;&#35843; <code class="docutils literal notranslate"><span class="pre">E</span> <span class="pre">&#8852;</span> <span class="pre">F</span></code> &#26159;&#21253;&#21547; <code class="docutils literal notranslate"><span class="pre">E</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">F</span></code> &#30340;&#26368;&#23567;&#21521;&#37327;&#23376;&#31354;&#38388;&#36825;&#19968;&#26681;&#26412;&#20107;&#23454;&#12290;</p>
<p>&#26412;&#31456;&#30340;&#26368;&#21518;&#19968;&#20010;&#20027;&#39064;&#26159;&#21830;&#30340;&#27010;&#24565;&#12290;&#21516;&#26679;&#65292;&#25105;&#20204;&#24819;&#35201;&#35299;&#37322;&#22312; Mathlib &#20013;&#22914;&#20309;&#26500;&#24314;&#26041;&#20415;&#30340;&#31526;&#21495;&#34920;&#31034;&#27861;&#20197;&#21450;&#22914;&#20309;&#36991;&#20813;&#20195;&#30721;&#37325;&#22797;&#12290;&#36825;&#37324;&#30340;&#20027;&#35201;&#25163;&#27573;&#26159; <code class="docutils literal notranslate"><span class="pre">HasQuotient</span></code> &#31867;&#65292;&#23427;&#20801;&#35768;&#20351;&#29992;&#35832;&#22914; <code class="docutils literal notranslate"><span class="pre">M</span> <span class="pre">&#10744;</span> <span class="pre">N</span></code> &#36825;&#26679;&#30340;&#31526;&#21495;&#34920;&#31034;&#27861;&#12290;&#35831;&#27880;&#24847;&#65292;&#21830;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">&#10744;</span></code> &#26159;&#19968;&#20010;&#29305;&#27530;&#30340; Unicode &#23383;&#31526;&#65292;&#32780;&#19981;&#26159;&#26222;&#36890;&#30340; ASCII &#38500;&#27861;&#31526;&#21495;&#12290;</p>
<p>&#20363;&#22914;&#65292;&#25105;&#20204;&#23558;&#36890;&#36807;&#19968;&#20010;&#23376;&#24186;&#21322;&#32676;&#26469;&#26500;&#24314;&#19968;&#20010;&#20132;&#25442;&#24186;&#21322;&#32676;&#30340;&#21830;&#65292;&#35777;&#26126;&#30041;&#32473;&#20320;&#12290;&#22312;&#26368;&#21518;&#19968;&#20010;&#31034;&#20363;&#20013;&#65292;&#24744;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Setoid.refl</span></code> &#65292;&#20294;&#23427;&#19981;&#20250;&#33258;&#21160;&#33719;&#21462;&#30456;&#20851;&#30340; <code class="docutils literal notranslate"><span class="pre">Setoid</span></code> &#32467;&#26500;&#12290;&#24744;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> &#35821;&#27861;&#25552;&#20379;&#25152;&#26377;&#21442;&#25968;&#26469;&#35299;&#20915;&#27492;&#38382;&#39064;&#65292;&#20363;&#22914; <code class="docutils literal notranslate"><span class="pre">&#64;Setoid.refl</span> <span class="pre">M</span> <span class="pre">N.Setoid</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">Submonoid.Setoid</span><span class="w"> </span><span class="o">[</span><span class="n">CommMonoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Setoid</span><span class="w"> </span><span class="n">M</span><span class="w">  </span><span class="n">where</span>
<span class="w">  </span><span class="n">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">w</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">N</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">N</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="bp">*</span><span class="n">w</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">y</span><span class="bp">*</span><span class="n">z</span>
<span class="w">  </span><span class="n">iseqv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">refl</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">N.one_mem</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">N.one_mem</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">symm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">hw</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">hz</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">hz</span><span class="o">,</span><span class="w"> </span><span class="n">w</span><span class="o">,</span><span class="w"> </span><span class="n">hw</span><span class="o">,</span><span class="w"> </span><span class="n">h.symm</span><span class="o">&#10217;</span>
<span class="w">    </span><span class="n">trans</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">  </span><span class="o">}</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">CommMonoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">HasQuotient</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="o">(</span><span class="n">Submonoid</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">quotient&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">Quotient</span><span class="w"> </span><span class="n">N.Setoid</span>

<span class="kd">def</span><span class="w"> </span><span class="n">QuotientMonoid.mk</span><span class="w"> </span><span class="o">[</span><span class="n">CommMonoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Quotient.mk</span><span class="w"> </span><span class="n">N.Setoid</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">[</span><span class="n">CommMonoid</span><span class="w"> </span><span class="n">M</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">N</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Submonoid</span><span class="w"> </span><span class="n">M</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Monoid</span><span class="w"> </span><span class="o">(</span><span class="n">M</span><span class="w"> </span><span class="bp">&#10744;</span><span class="w"> </span><span class="n">N</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Quotient.map&#8322;&#39;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="kd">by</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">        </span><span class="o">)</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">QuotientMonoid.mk</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C07_Structures.html" class="btn btn-neutral float-left" title="7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C09_Groups_and_Rings.html" class="btn btn-neutral float-right" title="9. &#32676;&#19982;&#29615;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>