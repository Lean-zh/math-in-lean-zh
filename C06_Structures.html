

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. &#32467;&#26500;&#20307;&#65288;Structures&#65289; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7. &#23618;&#27425;&#32467;&#26500;" href="C07_Hierarchies.html" />
    <link rel="prev" title="5. &#21021;&#31561;&#25968;&#35770;" href="C05_Elementary_Number_Theory.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. &#21021;&#31561;&#25968;&#35770;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. &#32467;&#26500;&#20307;&#65288;Structures&#65289;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#section-structures">6.1. &#23450;&#20041;&#32467;&#26500;&#20307;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#section-algebraic-structures">6.2. &#20195;&#25968;&#32467;&#26500;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#section-building-the-gaussian-integers">6.3. &#26500;&#24314;&#39640;&#26031;&#25972;&#25968;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C07_Hierarchies.html">7. &#23618;&#27425;&#32467;&#26500;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Groups_and_Rings.html">8. &#32676;&#19982;&#29615;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Linear_Algebra.html">9. &#32447;&#24615;&#20195;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Topology.html">10. &#25299;&#25169;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Differential_Calculus.html">11. &#24494;&#20998;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Integration_and_Measure_Theory.html">12. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">6. </span>&#32467;&#26500;&#20307;&#65288;Structures&#65289;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C06_Structures.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="structures">
<span id="id1"></span><h1><span class="section-number">6. </span>&#32467;&#26500;&#20307;&#65288;Structures&#65289;<a class="headerlink" href="#structures" title="Link to this heading">&#61633;</a></h1>
<p>&#29616;&#20195;&#25968;&#23398;&#24191;&#27867;&#20351;&#29992;&#20102;&#20195;&#25968;&#32467;&#26500;&#65292;&#36825;&#20123;&#20195;&#25968;&#32467;&#26500;&#23553;&#35013;&#20102;&#21487;&#22312;&#19981;&#21516;&#29615;&#22659;&#20013;&#23454;&#20363;&#21270;&#30340;&#27169;&#24335;&#65292;&#32780;&#19988;&#24448;&#24448;&#26377;&#22810;&#31181;&#26041;&#27861;&#26469;&#23545;&#23427;&#20204;&#36827;&#34892;&#23450;&#20041;&#21644;&#23454;&#20363;&#21270;&#12290;</p>
<p>&#22240;&#27492;&#65292;Lean &#25552;&#20379;&#20102;&#30456;&#24212;&#30340;&#26041;&#27861;&#26469;&#24418;&#24335;&#21270;&#23450;&#20041;&#36825;&#20123;&#32467;&#26500;&#24182;&#23545;&#20854;&#36827;&#34892;&#25805;&#20316;&#12290;
&#27492;&#21069;&#20320;&#24050;&#32463;&#25509;&#35302;&#36807;&#19968;&#20123;&#20195;&#25968;&#32467;&#26500;&#30340;&#31034;&#20363;&#65292;&#27604;&#22914;&#22312;
<a class="reference internal" href="C02_Basics.html#basics"><span class="std std-numref">Chapter 2</span></a>
&#20013;&#30340;&#29615;&#65288;rings&#65289;&#21644;&#26684;&#65288;lattices&#65289;&#12290;
&#26412;&#31456;&#23558;&#35299;&#37322;&#20043;&#21069;&#20986;&#29616;&#36807;&#30340;&#26041;&#25324;&#21495;&#35821;&#27861;&#65292;&#27604;&#22914; <code class="docutils literal notranslate"><span class="pre">[Ring</span> <span class="pre">&#945;]</span></code>&#12289; <code class="docutils literal notranslate"><span class="pre">[Lattice</span> <span class="pre">&#945;]</span></code>&#65292;&#24182;&#20171;&#32461;&#22914;&#20309;&#21019;&#24314;&#21644;&#20351;&#29992;&#33258;&#23450;&#20041;&#30340;&#20195;&#25968;&#32467;&#26500;&#12290;</p>
<p>&#22914;&#38656;&#20102;&#35299;&#26356;&#22810;&#25216;&#26415;&#32454;&#33410;&#65292;&#21487;&#20197;&#21442;&#32771;
<a class="reference external" href="https://leanprover.github.io/theorem_proving_in_lean/">Theorem Proving in Lean</a>&#65292;
&#20197;&#21450; Anne Baanen &#30340;&#36825;&#31687;&#35770;&#25991; <a class="reference external" href="https://arxiv.org/abs/2202.01629">Use and abuse of instance parameters in the Lean mathematical library</a>&#12290;</p>
<section id="section-structures">
<span id="id2"></span><h2><span class="section-number">6.1. </span>&#23450;&#20041;&#32467;&#26500;&#20307;<a class="headerlink" href="#section-structures" title="Link to this heading">&#61633;</a></h2>
<p>&#24191;&#20041;&#19978;&#26469;&#35828;&#65292;&#32467;&#26500;&#20307;&#26159;&#23545;&#29305;&#23450;&#24418;&#24335;&#25968;&#25454;&#38598;&#21512;&#30340;&#32422;&#23450;&#65292;&#21253;&#25324;&#21253;&#21547;&#25968;&#25454;&#30340;&#24418;&#24335;&#20197;&#21450;&#36825;&#20123;&#25968;&#25454;&#35201;&#28385;&#36275;&#30340;&#19968;&#20123;&#32422;&#26463;&#26465;&#20214;&#12290;
&#32780;&#32467;&#26500;&#20307;&#30340;&#23454;&#20363;&#21017;&#26159;&#26576;&#19968;&#32452;&#28385;&#36275;&#32422;&#26463;&#30340;&#20855;&#20307;&#25968;&#25454;&#12290;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#35268;&#23450;&#19968;&#20010;&#28857;&#26159;&#30001;&#19977;&#20010;&#23454;&#25968;&#32452;&#25104;&#30340;&#19977;&#20803;&#32452;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
</pre></div>
</div>
<p>&#19978;&#38754;&#29992;&#21040;&#30340; <code class="docutils literal notranslate"><span class="pre">&#64;[ext]</span></code> &#27880;&#35299;&#35753; Lean &#33258;&#21160;&#29983;&#25104;&#19968;&#20010;&#23450;&#29702;&#65292;&#20869;&#23481;&#26159;&#24403;&#35813;&#32467;&#26500;&#20307;&#30340;&#20004;&#20010;&#23454;&#20363;&#21508;&#32452;&#25104;&#37096;&#20998;&#23545;&#24212;&#30456;&#21516;&#26102;&#65292;&#36825;&#20004;&#20010;&#23454;&#20363;&#30456;&#31561;&#12290;&#35813;&#23646;&#24615;&#20063;&#31216;&#20026;&#22806;&#24310;&#24615;&#65288;extensionality&#65289;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Point.ext</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hx</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a.x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b.x</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hy</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a.y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b.y</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hz</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a.z</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b.z</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span>
<span class="w">  </span><span class="n">repeat&#39;</span><span class="w"> </span><span class="n">assumption</span>
</pre></div>
</div>
<p>&#25509;&#30528;&#25105;&#20204;&#23450;&#20041;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#32467;&#26500;&#20307;&#30340;&#23454;&#20363;&#12290;
Lean &#25552;&#20379;&#22810;&#31181;&#23454;&#20363;&#21270;&#26041;&#24335;&#26469;&#36798;&#25104;&#30446;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">myPoint1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">-</span><span class="mi">1</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">4</span>

<span class="kd">def</span><span class="w"> </span><span class="n">myPoint2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">&#10217;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">myPoint3</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Point.mk</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="mi">4</span>
</pre></div>
</div>
<p>&#31532;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#26126;&#30830;&#22320;&#25351;&#26126;&#20102;&#32467;&#26500;&#20307;&#30340;&#21508;&#20010;&#23383;&#27573;&#12290;
&#22312;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">myPoint3</span></code> &#26102;&#29992;&#21040;&#30340;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Point.mk</span></code> &#21483;&#20570; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#32467;&#26500;&#20307;&#30340;&#26500;&#36896;&#20989;&#25968;&#65288;constructor&#65289;&#65292;&#29992;&#20110;&#26500;&#36896;&#32467;&#26500;&#20307;&#25104;&#21592;&#12290;
&#20320;&#20063;&#21487;&#20197;&#20026;&#26500;&#36896;&#20989;&#25968;&#25351;&#23450;&#19968;&#20010;&#19981;&#21516;&#30340;&#21517;&#23383;&#65292;&#27604;&#22914; <code class="docutils literal notranslate"><span class="pre">build</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">Point&#39;</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">::</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">Point&#39;.build</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="mi">4</span>
</pre></div>
</div>
<p>&#25509;&#19979;&#26469;&#30340;&#20004;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#23450;&#20041;&#32467;&#26500;&#20307;&#30340;&#20989;&#25968;&#12290;
&#31532;&#20108;&#20010;&#20363;&#23376;&#20013;&#26126;&#30830;&#25351;&#20986;&#20102;&#26500;&#36896;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Point.mk</span></code> &#20013;&#30340;&#23383;&#27573;&#21517;&#65292;&#32780;&#31532;&#19968;&#20010;&#20363;&#23376;&#21017;&#20351;&#29992;&#26356;&#20026;&#31616;&#27905;&#30340;&#21311;&#21517;&#26500;&#36896;&#20989;&#25968;&#12290;
Lean &#33021;&#26681;&#25454; <code class="docutils literal notranslate"><span class="pre">add</span></code> &#30340;&#30446;&#26631;&#31867;&#22411;&#25512;&#26029;&#20986;&#25152;&#38656;&#30340;&#26500;&#36896;&#20989;&#25968;&#12290;
&#36890;&#24120;&#65292;&#25105;&#20204;&#20250;&#23558;&#19982;&#32467;&#26500;&#20307;&#65288;&#20363;&#22914;&#36825;&#37324;&#30340; <code class="docutils literal notranslate"><span class="pre">Point</span></code>&#65289;&#30456;&#20851;&#30340;&#23450;&#20041;&#21644;&#23450;&#29702;&#25918;&#22312;&#19968;&#20010;&#21516;&#21517;&#30340;&#21629;&#21517;&#31354;&#38388;&#65288;namespace&#65289;&#20013;&#12290;
&#22312;&#19979;&#38754;&#30340;&#31034;&#20363;&#20013;&#65292;&#30001;&#20110;&#25105;&#20204;&#21551;&#29992;&#20102; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#21629;&#21517;&#31354;&#38388;&#65292;&#25152;&#20197; <code class="docutils literal notranslate"><span class="pre">add</span></code> &#30340;&#23436;&#25972;&#21517;&#31216;&#23454;&#38469;&#26159; <code class="docutils literal notranslate"><span class="pre">Point.add</span></code>&#12290;
&#24403;&#21629;&#21517;&#31354;&#38388;&#27809;&#34987;&#21551;&#29992;&#26102;&#65292;&#23601;&#24471;&#20351;&#29992;&#23436;&#25972;&#21517;&#31216;&#12290;
&#19981;&#36807;&#36825;&#26102;&#20063;&#21487;&#20197;&#20351;&#29992;&#21311;&#21517;&#25237;&#24433;&#35760;&#21495;&#65288;anonymous projection notation&#65289;&#65292;&#23427;&#20801;&#35768;&#25105;&#20204;&#29992; <code class="docutils literal notranslate"><span class="pre">a.add</span> <span class="pre">b</span></code> &#20195;&#26367; <code class="docutils literal notranslate"><span class="pre">Point.add</span> <span class="pre">a</span> <span class="pre">b</span></code>&#12290;
&#22240;&#20026; a &#30340;&#31867;&#22411;&#26159; <code class="docutils literal notranslate"><span class="pre">Point</span></code>&#65292;Lean &#33021;&#22312;&#27809;&#26377;&#24320;&#21551;&#23545;&#24212;&#21629;&#21517;&#31354;&#38388;&#30340;&#26102;&#20505;&#23558; <code class="docutils literal notranslate"><span class="pre">a.add</span> <span class="pre">b</span></code> &#25512;&#26029;&#20026; <code class="docutils literal notranslate"><span class="pre">Point.add</span> <span class="pre">a</span> <span class="pre">b</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">Point</span>

<span class="kd">def</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">a.x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.x</span><span class="o">,</span><span class="w"> </span><span class="n">a.y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.y</span><span class="o">,</span><span class="w"> </span><span class="n">a.z</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.z</span><span class="o">&#10217;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">add&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.x</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.y</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.z</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.z</span>

<span class="k">#check</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">myPoint1</span><span class="w"> </span><span class="n">myPoint2</span>
<span class="k">#check</span><span class="w"> </span><span class="n">myPoint1.add</span><span class="w"> </span><span class="n">myPoint2</span>

<span class="kd">end</span><span class="w"> </span><span class="n">Point</span>

<span class="k">#check</span><span class="w"> </span><span class="n">Point.add</span><span class="w"> </span><span class="n">myPoint1</span><span class="w"> </span><span class="n">myPoint2</span>
<span class="k">#check</span><span class="w"> </span><span class="n">myPoint1.add</span><span class="w"> </span><span class="n">myPoint2</span>
</pre></div>
</div>
<p>&#25509;&#19979;&#26469;&#25105;&#20204;&#32487;&#32493;&#22312;&#30456;&#20851;&#21629;&#21517;&#31354;&#38388;&#20013;&#28155;&#21152;&#23450;&#20041;&#65292;&#20294;&#22312;&#24341;&#29992;&#30340;&#20195;&#30721;&#29255;&#27573;&#20013;&#20250;&#30465;&#30053;&#24320;&#20851;&#21629;&#21517;&#31354;&#38388;&#30456;&#20851;&#30340;&#25351;&#20196;&#12290;
&#22312;&#35777;&#26126;&#21152;&#27861;&#20989;&#25968;&#24615;&#36136;&#26102;&#65292;&#21487;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">rw</span></code> &#26469;&#23637;&#24320;&#23450;&#20041;&#65292;&#24182;&#29992; <code class="docutils literal notranslate"><span class="pre">ext</span></code> &#23558;&#32467;&#26500;&#20307;&#20004;&#20010;&#23454;&#20363;&#20043;&#38388;&#30340;&#31561;&#21495;&#36716;&#21270;&#20026;&#23427;&#20204;&#21508;&#20010;&#32452;&#25104;&#37096;&#20998;&#20043;&#38388;&#30340;&#31561;&#21495;&#12290;
&#19979;&#38754;&#30340;&#20195;&#30721;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">protected</span></code> &#20851;&#38190;&#23383;&#65292;&#20351;&#24471;&#22312;&#21629;&#21517;&#31354;&#38388;&#25171;&#24320;&#30340;&#24773;&#20917;&#19979;&#23450;&#29702;&#30340;&#21517;&#23383;&#20381;&#28982;&#26159; <code class="docutils literal notranslate"><span class="pre">Point.add_comm</span></code>&#12290;
&#24403;&#25105;&#20204;&#24076;&#26395;&#36991;&#20813;&#19982;&#27867;&#22411;&#23450;&#29702;&#22914; <code class="docutils literal notranslate"><span class="pre">add_comm</span></code> &#20135;&#29983;&#27495;&#20041;&#26102;&#65292;&#36825;&#26679;&#20570;&#26159;&#26377;&#24110;&#21161;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">protected</span><span class="w"> </span><span class="kd">theorem</span><span class="w"> </span><span class="n">add_comm</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">add</span><span class="o">,</span><span class="w"> </span><span class="n">add</span><span class="o">]</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">dsimp</span>
<span class="w">  </span><span class="n">repeat&#39;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">add_comm</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">add</span><span class="o">,</span><span class="w"> </span><span class="n">add_comm</span><span class="o">]</span>
</pre></div>
</div>
<p>&#22240;&#20026; Lean &#33021;&#22312;&#20869;&#37096;&#33258;&#21160;&#23637;&#24320;&#23450;&#20041;&#24182;&#31616;&#21270;&#25237;&#24433;&#65292;&#25152;&#20197;&#26377;&#26102;&#25105;&#20204;&#38656;&#35201;&#30340;&#31561;&#24335;&#22312;&#23450;&#20041;&#19978;&#23601;&#33258;&#21160;&#25104;&#31435;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">add_x</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">a.add</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a.x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.x</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#19982;&#22312;
<a class="reference internal" href="C05_Elementary_Number_Theory.html#section-induction-and-recursion"><span class="std std-numref">Section 5.2</span></a>
&#20013;&#23450;&#20041;&#36882;&#24402;&#20989;&#25968;&#31867;&#20284;&#65292;&#25105;&#20204;&#23450;&#20041;&#20989;&#25968;&#26102;&#20063;&#21487;&#20197;&#20351;&#29992;&#27169;&#24335;&#21305;&#37197;&#12290;
&#19979;&#38754;&#23450;&#20041;&#30340; <code class="docutils literal notranslate"><span class="pre">addAlt</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">addAlt'</span></code> &#26412;&#36136;&#19978;&#26159;&#30456;&#21516;&#30340;&#65292;&#24418;&#24335;&#19978;&#30340;&#30340;&#21306;&#21035;&#22312;&#20110;&#25105;&#20204;&#22312;&#21518;&#32773;&#30340;&#23450;&#20041;&#20013;&#20351;&#29992;&#20102;&#21311;&#21517;&#26500;&#36896;&#20989;&#25968;&#12290;
&#34429;&#28982;&#20197;&#27492;&#26041;&#24335;&#23450;&#20041;&#20989;&#25968;&#26377;&#26102;&#20250;&#26174;&#24471;&#26356;&#21152;&#31616;&#27905;&#65292;&#24182;&#19988;&#32467;&#26500;&#21270; &#951;-&#35268;&#32422;&#65288;structural eta-reduction&#65289;&#20063;&#30830;&#20445;&#20102;&#36825;&#31181;&#31616;&#20889;&#22312;&#23450;&#20041;&#19978;&#30340;&#31561;&#20215;&#24615;&#65292;&#20294;&#36825;&#20040;&#20570;&#21487;&#33021;&#20250;&#20026;&#21518;&#32493;&#30340;&#35777;&#26126;&#24102;&#26469;&#19981;&#20415;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">addAlt</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Point</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">Point.mk</span><span class="w"> </span><span class="n">x&#8321;</span><span class="w"> </span><span class="n">y&#8321;</span><span class="w"> </span><span class="n">z&#8321;</span><span class="o">,</span><span class="w"> </span><span class="n">Point.mk</span><span class="w"> </span><span class="n">x&#8322;</span><span class="w"> </span><span class="n">y&#8322;</span><span class="w"> </span><span class="n">z&#8322;</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x&#8322;</span><span class="o">,</span><span class="w"> </span><span class="n">y&#8321;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y&#8322;</span><span class="o">,</span><span class="w"> </span><span class="n">z&#8321;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">z&#8322;</span><span class="o">&#10217;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">addAlt&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Point</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x&#8321;</span><span class="o">,</span><span class="w"> </span><span class="n">y&#8321;</span><span class="o">,</span><span class="w"> </span><span class="n">z&#8321;</span><span class="o">&#10217;,</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x&#8322;</span><span class="o">,</span><span class="w"> </span><span class="n">y&#8322;</span><span class="o">,</span><span class="w"> </span><span class="n">z&#8322;</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x&#8321;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x&#8322;</span><span class="o">,</span><span class="w"> </span><span class="n">y&#8321;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y&#8322;</span><span class="o">,</span><span class="w"> </span><span class="n">z&#8321;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">z&#8322;</span><span class="o">&#10217;</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">addAlt_x</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">a.addAlt</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a.x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">addAlt_comm</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">addAlt</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">addAlt</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">addAlt</span><span class="o">,</span><span class="w"> </span><span class="n">addAlt</span><span class="o">]</span>
<span class="w">  </span><span class="c1">-- the same proof still works, but the goal view here is harder to read</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">dsimp</span>
<span class="w">  </span><span class="n">repeat&#39;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">add_comm</span>
</pre></div>
</div>
<p>&#25968;&#23398;&#26500;&#36896;&#36890;&#24120;&#28041;&#21450;&#23558;&#25414;&#32465;&#30340;&#20449;&#24687;&#25286;&#20998;&#24320;&#26469;&#65292;&#24182;&#20197;&#19981;&#21516;&#30340;&#26041;&#24335;&#37325;&#26032;&#32452;&#21512;&#12290;
&#36825;&#20063;&#26159; Lean &#21644; Mathlib &#25552;&#20379;&#22914;&#27492;&#22810;&#26041;&#27861;&#26469;&#39640;&#25928;&#22788;&#29702;&#36825;&#20123;&#25805;&#20316;&#30340;&#21407;&#22240;&#12290;
&#20316;&#20026;&#32451;&#20064;&#65292;&#35831;&#23581;&#35797;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">Point.add</span></code> &#26159;&#28385;&#36275;&#32467;&#21512;&#24459;&#30340;&#12290;
&#28982;&#21518;&#35831;&#23450;&#20041;&#28857;&#30340;&#26631;&#37327;&#20056;&#27861;&#24182;&#35777;&#26126;&#20854;&#28385;&#36275;&#23545;&#21152;&#27861;&#30340;&#20998;&#37197;&#24459;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">protected</span><span class="w"> </span><span class="kd">theorem</span><span class="w"> </span><span class="n">add_assoc</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">a.add</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a.add</span><span class="w"> </span><span class="o">(</span><span class="n">b.add</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">def</span><span class="w"> </span><span class="n">smul</span><span class="w"> </span><span class="o">(</span><span class="n">r</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">smul_distrib</span><span class="w"> </span><span class="o">(</span><span class="n">r</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">(</span><span class="n">smul</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">smul</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">smul</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">(</span><span class="n">a.add</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#20351;&#29992;&#32467;&#26500;&#20307;&#26159;&#36208;&#21521;&#20195;&#25968;&#25277;&#35937;&#30340;&#31532;&#19968;&#27493;&#12290;
&#25105;&#20204;&#30446;&#21069;&#36824;&#27809;&#26377;&#26041;&#27861;&#23558; <code class="docutils literal notranslate"><span class="pre">Point.add</span></code> &#19982;&#27867;&#22411;&#30340; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#31526;&#21495;&#32852;&#31995;&#36215;&#26469;&#65292;
&#25233;&#25110;&#26159;&#23558; <code class="docutils literal notranslate"><span class="pre">Point.add_comm</span></code>&#12289;<code class="docutils literal notranslate"><span class="pre">Point.add_assoc</span></code> &#19982;&#27867;&#22411;&#30340; <code class="docutils literal notranslate"><span class="pre">add_comm</span></code>&#12289;<code class="docutils literal notranslate"><span class="pre">add_assoc</span></code> &#23450;&#29702;&#32852;&#31995;&#36215;&#26469;&#12290;
&#36825;&#20123;&#20219;&#21153;&#23646;&#20110;&#32467;&#26500;&#20307;&#22312;&#20195;&#25968;&#23618;&#38754;&#30340;&#24212;&#29992;&#65292;&#25105;&#20204;&#23558;&#22312;&#19979;&#19968;&#33410;&#20171;&#32461;&#22914;&#20309;&#20855;&#20307;&#23454;&#29616;&#12290;
&#23545;&#29616;&#22312;&#26469;&#35828;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#25226;&#32467;&#26500;&#20307;&#35270;&#20316;&#19968;&#31181;&#25414;&#32465;&#23545;&#35937;&#21644;&#20449;&#24687;&#30340;&#26041;&#27861;&#12290;</p>
<p>&#22312;&#32467;&#26500;&#20307;&#20013;&#25105;&#20204;&#19981;&#20165;&#21487;&#20197;&#25351;&#23450;&#25968;&#25454;&#31867;&#22411;&#65292;&#36824;&#21487;&#20197;&#25351;&#23450;&#25968;&#25454;&#38656;&#35201;&#28385;&#36275;&#30340;&#32422;&#26463;&#12290;
&#22312; Lean &#20013;&#65292;&#21518;&#32773;&#34987;&#34920;&#31034;&#20026;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Prop</span></code> &#30340;&#23383;&#27573;&#12290;
&#20363;&#22914;&#65292;&#26631;&#20934;2-&#21333;&#32431;&#24418;&#65288;standard 2-simplex&#65289;&#23450;&#20041;&#20026;&#28385;&#36275; <span class="math notranslate nohighlight">\(x &#8805; 0\)</span>&#65292;<span class="math notranslate nohighlight">\(y &#8805; 0\)</span>&#65292;<span class="math notranslate nohighlight">\(z &#8805; 0\)</span>&#65292;<span class="math notranslate nohighlight">\(x + y + z = 1\)</span> &#30340;&#28857; <span class="math notranslate nohighlight">\((x, y, z)\)</span> &#30340;&#38598;&#21512;&#12290;
&#22914;&#26524;&#20320;&#19981;&#29087;&#24713;&#36825;&#20010;&#27010;&#24565;&#65292;&#21487;&#20197;&#30011;&#20010;&#22270;&#65292;&#20854;&#23454;&#36825;&#20010;&#38598;&#21512;&#23601;&#26159;&#19977;&#32500;&#31354;&#38388;&#20013;&#20197; <span class="math notranslate nohighlight">\((1, 0, 0)\)</span>&#65292;<span class="math notranslate nohighlight">\((0, 1, 0)\)</span>&#65292;&#21644; <span class="math notranslate nohighlight">\((0, 0, 1)\)</span> &#20026;&#39030;&#28857;&#30340;&#31561;&#36793;&#19977;&#35282;&#24418;&#20197;&#21450;&#20854;&#20869;&#37096;&#12290;
&#22312; Lean &#20013;&#21487;&#20197;&#36825;&#26679;&#24418;&#24335;&#21270;&#34920;&#31034;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">StandardTwoSimplex</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">x_nonneg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">y_nonneg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">y</span>
<span class="w">  </span><span class="n">z_nonneg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">z</span>
<span class="w">  </span><span class="n">sum_eq</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#26368;&#21518;&#22235;&#20010;&#23383;&#27573;&#29992;&#21040;&#30340; <code class="docutils literal notranslate"><span class="pre">x</span></code>&#65292;<code class="docutils literal notranslate"><span class="pre">y</span></code>&#65292;<code class="docutils literal notranslate"><span class="pre">z</span></code> &#25351;&#30340;&#23601;&#26159;&#21069;&#19977;&#20010;&#23383;&#27573;&#12290;
&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#20174;2-&#21333;&#32431;&#24418;&#21040;&#20854;&#33258;&#36523;&#30340;&#26144;&#23556;&#65292;&#35813;&#26144;&#23556;&#20132;&#25442; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">y</span></code>&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">swapXy</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardTwoSimplex</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardTwoSimplex</span>
<span class="w">    </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.y</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.x</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.z</span>
<span class="w">  </span><span class="n">x_nonneg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.y_nonneg</span>
<span class="w">  </span><span class="n">y_nonneg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.x_nonneg</span>
<span class="w">  </span><span class="n">z_nonneg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">a.z_nonneg</span>
<span class="w">  </span><span class="n">sum_eq</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">add_comm</span><span class="w"> </span><span class="n">a.y</span><span class="w"> </span><span class="n">a.x</span><span class="o">,</span><span class="w"> </span><span class="n">a.sum_eq</span><span class="o">]</span>
</pre></div>
</div>
<p>&#26377;&#36259;&#30340;&#26469;&#20102;&#65292;&#25105;&#20204;&#21487;&#20197;&#35745;&#31639;&#21333;&#32431;&#24418;&#20869;&#20004;&#20010;&#28857;&#30340;&#20013;&#28857;&#12290;
&#20026;&#27492;&#38656;&#35201;&#20808;&#22312;&#25991;&#20214;&#24320;&#22836;&#21152;&#19978; <code class="docutils literal notranslate"><span class="pre">noncomputable</span> <span class="pre">section</span></code> &#35821;&#21477;&#20197;&#20415;&#20351;&#29992;&#23454;&#25968;&#19978;&#30340;&#38500;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kn">section</span>

<span class="kd">def</span><span class="w"> </span><span class="n">midpoint</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardTwoSimplex</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardTwoSimplex</span>
<span class="w">    </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">a.x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.x</span><span class="o">)</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">a.y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.y</span><span class="o">)</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">a.z</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.z</span><span class="o">)</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="n">x_nonneg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">div_nonneg</span><span class="w"> </span><span class="o">(</span><span class="n">add_nonneg</span><span class="w"> </span><span class="n">a.x_nonneg</span><span class="w"> </span><span class="n">b.x_nonneg</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="kd">by</span><span class="w"> </span><span class="n">norm_num</span><span class="o">)</span>
<span class="w">  </span><span class="n">y_nonneg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">div_nonneg</span><span class="w"> </span><span class="o">(</span><span class="n">add_nonneg</span><span class="w"> </span><span class="n">a.y_nonneg</span><span class="w"> </span><span class="n">b.y_nonneg</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="kd">by</span><span class="w"> </span><span class="n">norm_num</span><span class="o">)</span>
<span class="w">  </span><span class="n">z_nonneg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">div_nonneg</span><span class="w"> </span><span class="o">(</span><span class="n">add_nonneg</span><span class="w"> </span><span class="n">a.z_nonneg</span><span class="w"> </span><span class="n">b.z_nonneg</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="kd">by</span><span class="w"> </span><span class="n">norm_num</span><span class="o">)</span>
<span class="w">  </span><span class="n">sum_eq</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">field_simp</span><span class="bp">;</span><span class="w"> </span><span class="n">linarith</span><span class="w"> </span><span class="o">[</span><span class="n">a.sum_eq</span><span class="o">,</span><span class="w"> </span><span class="n">b.sum_eq</span><span class="o">]</span>
</pre></div>
</div>
<p>&#19978;&#38754;&#30340;&#20195;&#30721;&#20013;&#65292;&#23545;&#20110; <code class="docutils literal notranslate"><span class="pre">x_nonneg</span></code>&#65292;<code class="docutils literal notranslate"><span class="pre">y_nonneg</span></code>&#65292;<code class="docutils literal notranslate"><span class="pre">z_nonneg</span></code>&#65292;&#25105;&#20204;&#29992;&#31616;&#27905;&#30340;&#35777;&#26126;&#39033;&#21363;&#21487;&#24314;&#31435;&#12290;
&#32780;&#23545;&#20110; <code class="docutils literal notranslate"><span class="pre">sum_eq</span></code> &#65292;&#25105;&#20204;&#36873;&#25321;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">by</span></code> &#22312;&#31574;&#30053;&#27169;&#24335;&#19979;&#36827;&#34892;&#35777;&#26126;&#12290;</p>
<p>&#32473;&#23450;&#21442;&#25968; <span class="math notranslate nohighlight">\(\lambda\)</span> &#28385;&#36275; <span class="math notranslate nohighlight">\(0 \le \lambda \le 1\)</span>&#65292;
&#21487;&#23450;&#20041;&#26631;&#20934;2-&#21333;&#32431;&#24418;&#20013; <span class="math notranslate nohighlight">\(a\)</span> &#21644; <span class="math notranslate nohighlight">\(b\)</span> &#20004;&#28857;&#30340;&#21152;&#26435;&#24179;&#22343;&#20026; <span class="math notranslate nohighlight">\(\lambda a + (1 - \lambda) b\)</span>&#12290;
&#35831;&#23581;&#35797;&#21442;&#32771;&#21069;&#38754;&#30340; <code class="docutils literal notranslate"><span class="pre">midpoint</span></code> &#24418;&#24335;&#21270;&#23450;&#20041;&#35813;&#21152;&#26435;&#24179;&#22343;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">weightedAverage</span><span class="w"> </span><span class="o">(</span><span class="n">lambda</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Real</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">lambda_nonneg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">lambda</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">lambda_le</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">lambda</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardTwoSimplex</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardTwoSimplex</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#32467;&#26500;&#20307;&#36824;&#21487;&#20197;&#20381;&#36182;&#20110;&#21442;&#25968;&#12290;
&#20363;&#22914;&#65292;&#21487;&#20197;&#23558;&#26631;&#20934;2-&#21333;&#32431;&#24418;&#25512;&#24191;&#21040;&#20219;&#24847;&#32500;&#25968; <span class="math notranslate nohighlight">\(n\)</span> &#19979;&#30340; <span class="math notranslate nohighlight">\(n\)</span> -&#21333;&#32431;&#24418;&#12290;
&#30446;&#21069;&#38454;&#27573;&#65292;&#20320;&#19981;&#38656;&#35201;&#23545; <code class="docutils literal notranslate"><span class="pre">Fin</span> <span class="pre">n</span></code> &#20102;&#35299;&#22826;&#22810;&#65292;&#21482;&#38656;&#30693;&#36947;&#23427;&#26377; <span class="math notranslate nohighlight">\(n\)</span> &#20010;&#20803;&#32032;&#65292;&#24182;&#19988; Lean &#30452;&#21040;&#22914;&#20309;&#22312;&#20854;&#19978;&#36827;&#34892;&#23601;&#21644;&#25805;&#20316;&#21363;&#21487;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">BigOperators</span>

<span class="kd">structure</span><span class="w"> </span><span class="n">StandardSimplex</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">NonNeg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span>
<span class="w">  </span><span class="n">sum_eq_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">StandardSimplex</span>

<span class="kd">def</span><span class="w"> </span><span class="n">midpoint</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardSimplex</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StandardSimplex</span><span class="w"> </span><span class="n">n</span>
<span class="w">    </span><span class="n">where</span>
<span class="w">  </span><span class="n">V</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">a.V</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.V</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="n">NonNeg</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span><span class="w"> </span><span class="n">i</span>
<span class="w">    </span><span class="n">apply</span><span class="w"> </span><span class="n">div_nonneg</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">linarith</span><span class="w"> </span><span class="o">[</span><span class="n">a.NonNeg</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">b.NonNeg</span><span class="w"> </span><span class="n">i</span><span class="o">]</span>
<span class="w">    </span><span class="n">norm_num</span>
<span class="w">  </span><span class="n">sum_eq_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">div_eq_mul_inv</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8592;</span><span class="w"> </span><span class="n">Finset.sum_mul</span><span class="o">,</span><span class="w"> </span><span class="n">Finset.sum_add_distrib</span><span class="o">,</span>
<span class="w">      </span><span class="n">a.sum_eq_one</span><span class="o">,</span><span class="w"> </span><span class="n">b.sum_eq_one</span><span class="o">]</span>
<span class="w">    </span><span class="n">field_simp</span>

<span class="kd">end</span><span class="w"> </span><span class="n">StandardSimplex</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#39069;&#22806;&#32451;&#20064;&#65292;&#35831;&#23581;&#35797;&#23450;&#20041;&#19968;&#19979;&#26631;&#20934; <span class="math notranslate nohighlight">\(n\)</span> -&#21333;&#32431;&#24418;&#20013;&#20004;&#28857;&#30340;&#21152;&#26435;&#24179;&#22343;&#12290;
&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Finset.sum_add_distrib</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.mul_sum</span></code> &#26469;&#23454;&#29616;&#30456;&#20851;&#30340;&#27714;&#21644;&#25805;&#20316;&#12290;</p>
<p>&#21069;&#38754;&#25105;&#20204;&#24050;&#32463;&#20102;&#35299;&#21040;&#32467;&#26500;&#20307;&#21487;&#20197;&#29992;&#26469;&#23558;&#25968;&#25454;&#21644;&#23646;&#24615;&#25171;&#21253;&#22312;&#19968;&#36215;&#12290;
&#26377;&#36259;&#30340;&#26159;&#65292;&#32467;&#26500;&#20307;&#20063;&#21487;&#20197;&#29992;&#26469;&#25171;&#21253;&#33073;&#31163;&#20855;&#20307;&#25968;&#25454;&#30340;&#25277;&#35937;&#23646;&#24615;&#12290;
&#20363;&#22914;&#65292;&#19979;&#38754;&#30340;&#32467;&#26500;&#20307; <code class="docutils literal notranslate"><span class="pre">IsLinear</span></code>&#65292;&#23558;&#32447;&#24615;&#24615;&#65288;linearity&#65289;&#30340;&#20004;&#20010;&#20027;&#35201;&#32452;&#25104;&#37096;&#20998;&#25171;&#21253;&#22312;&#20102;&#19968;&#36215;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">IsLinear</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">is_additive</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">y</span>
<span class="w">  </span><span class="n">preserves_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">c</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span>

<span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">linf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">IsLinear</span><span class="w"> </span><span class="n">f</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">linf.is_additive</span>
<span class="k">#check</span><span class="w"> </span><span class="n">linf.preserves_mul</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#20540;&#24471;&#19968;&#25552;&#30340;&#26159;&#65292;&#32467;&#26500;&#20307;&#24182;&#19981;&#26159;&#25171;&#21253;&#25968;&#25454;&#30340;&#21807;&#19968;&#26041;&#27861;&#12290;
&#21069;&#38754;&#25552;&#21040;&#30340; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#25968;&#25454;&#32467;&#26500;&#20063;&#21487;&#20197;&#29992;&#27867;&#22411;&#20056;&#31215;&#31867;&#22411;&#26469;&#23450;&#20041;&#65292;&#32780; <code class="docutils literal notranslate"><span class="pre">IsLinear</span></code> &#21487;&#20197;&#20351;&#29992;&#31616;&#21333;&#30340; <code class="docutils literal notranslate"><span class="pre">and</span></code> &#26469;&#23450;&#20041;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">Point&#39;&#39;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8477;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">IsLinear&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">(</span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">c</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">c</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span>
</pre></div>
</div>
<p>&#27867;&#22411;&#31867;&#22411;&#26500;&#36896;&#29978;&#33267;&#21487;&#20197;&#26367;&#20195;&#21253;&#21547;&#20381;&#36182;&#20851;&#31995;&#30340;&#32467;&#26500;&#20307;&#12290;
&#20363;&#22914;&#65292;&#23376;&#31867;&#22411;&#65288;subtype&#65289;&#26500;&#36896;&#32467;&#21512;&#20102;&#19968;&#27573;&#25968;&#25454;&#20197;&#21450;&#19968;&#26465;&#23646;&#24615;&#12290;
&#20320;&#21487;&#20197;&#23558;&#19979;&#38754;&#20363;&#23376;&#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">PReal</span></code> &#30475;&#20316;&#27491;&#23454;&#25968;&#31867;&#22411;&#12290;
&#27599;&#20010; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">PReal</span></code> &#37117;&#26377;&#20004;&#20010;&#20998;&#37327;&#65306;&#23427;&#30340;&#20540;&#65292;&#20197;&#21450;&#8220;&#23427;&#26159;&#27491;&#30340;&#8221;&#36825;&#19968;&#23646;&#24615;&#12290;
&#20320;&#21487;&#20197;&#20998;&#21035;&#29992; <code class="docutils literal notranslate"><span class="pre">x.val</span></code> &#19982; <code class="docutils literal notranslate"><span class="pre">x.property</span></code> &#26469;&#35775;&#38382;&#36825;&#20004;&#20010;&#20998;&#37327;&#65292;&#20854;&#20013;&#21069;&#32773;&#30340;&#31867;&#22411;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code>&#65292;&#21518;&#32773;&#26159;&#19968;&#20010;&#23646;&#24615; <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;</span> <span class="pre">x.val</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">PReal</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">}</span>

<span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PReal</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">x.val</span>
<span class="k">#check</span><span class="w"> </span><span class="n">x.property</span>
<span class="k">#check</span><span class="w"> </span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">x</span><span class="bp">.</span><span class="mi">2</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20063;&#21487;&#20197;&#29992;&#23376;&#31867;&#22411;&#26469;&#23450;&#20041;&#21069;&#38754;&#30340;&#26631;&#20934;2-&#21333;&#32431;&#24418;&#65292;&#20197;&#21450;&#20219;&#24847;&#32500;&#25968; <span class="math notranslate nohighlight">\(n\)</span> &#19979;&#30340;&#26631;&#20934; <span class="math notranslate nohighlight">\(n\)</span> -&#21333;&#32431;&#24418;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">StandardTwoSimplex&#39;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">}</span>

<span class="kd">def</span><span class="w"> </span><span class="n">StandardSimplex&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8477;</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>&#31867;&#20284;&#22320;&#65292;Sigma &#31867;&#22411;&#26159;&#26377;&#24207;&#23545;&#30340;&#25512;&#24191;&#65292;&#20854;&#20013;&#31532;&#20108;&#20010;&#20998;&#37327;&#30340;&#31867;&#22411;&#20381;&#36182;&#20110;&#31532;&#19968;&#20010;&#20998;&#37327;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">StdSimplex</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">&#931;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">,</span><span class="w"> </span><span class="n">StandardSimplex</span><span class="w"> </span><span class="n">n</span>

<span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">StdSimplex</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">s.fst</span>
<span class="k">#check</span><span class="w"> </span><span class="n">s.snd</span>

<span class="k">#check</span><span class="w"> </span><span class="n">s</span><span class="bp">.</span><span class="mi">1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">s</span><span class="bp">.</span><span class="mi">2</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#32473;&#23450; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">StdSimplex</span></code>&#65292;&#23427;&#30340;&#31532;&#19968;&#20010;&#20998;&#37327; <code class="docutils literal notranslate"><span class="pre">s.fst</span></code> &#26159;&#20010;&#33258;&#28982;&#25968;&#65292;&#31532;&#20108;&#20010;&#20998;&#37327;&#26159;&#23545;&#24212;&#32500;&#25968;&#19979;&#26631;&#20934;&#21333;&#32431;&#24418;&#20013;&#30340;&#19968;&#20010;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">StandardSimplex</span> <span class="pre">s.fst</span></code>&#12290;
Sigma &#31867;&#22411;&#19982;&#23376;&#31867;&#22411;&#30340;&#21306;&#21035;&#22312;&#20110; Sigma &#31867;&#22411;&#30340;&#31532;&#20108;&#20010;&#20998;&#37327;&#26159;&#25968;&#25454;&#32780;&#38750;&#23646;&#24615;&#12290;</p>
<p>&#23613;&#31649;&#21487;&#20197;&#20351;&#29992;&#20056;&#31215;&#31867;&#22411;&#12289;&#23376;&#31867;&#22411;&#12289; Sigma &#31867;&#22411;&#31561;&#26367;&#20195;&#32467;&#26500;&#20307;&#65292;&#20294;&#20351;&#29992;&#32467;&#26500;&#20307;&#20854;&#23454;&#26377;&#35768;&#22810;&#22909;&#22788;&#12290;
&#23450;&#20041;&#32467;&#26500;&#20307;&#21487;&#20197;&#25277;&#35937;&#20986;&#24213;&#23618;&#30340;&#34920;&#36798;&#65292;&#19988;&#33021;&#20026;&#25104;&#21592;&#25552;&#20379;&#33258;&#23450;&#20041;&#30340;&#21517;&#31216;&#20197;&#20379;&#35775;&#38382;&#12290;
&#36825;&#20351;&#24471;&#35777;&#26126;&#26356;&#21152;&#20581;&#22766;&#65306;
&#23545;&#20110;&#37027;&#20123;&#20165;&#20381;&#36182;&#32467;&#26500;&#20307;&#25509;&#21475;&#30340;&#35777;&#26126;&#65292;&#36890;&#24120;&#21482;&#38656;&#29992;&#26032;&#25509;&#21475;&#26367;&#25442;&#26087;&#25509;&#21475;&#65292;&#23601;&#33021;&#35753;&#35777;&#26126;&#20195;&#30721;&#22312;&#32467;&#26500;&#20307;&#23450;&#20041;&#21464;&#26356;&#21518;&#20381;&#28982;&#26377;&#25928;&#12290;
&#27492;&#22806;&#65292;&#27491;&#22914;&#25105;&#20204;&#21363;&#23558;&#30475;&#21040;&#30340;&#65292;Lean &#25903;&#25345;&#23558;&#21508;&#31181;&#32467;&#26500;&#20307;&#32534;&#32455;&#25104;&#19968;&#20010;&#20016;&#23500;&#30340;&#12289;&#30456;&#20114;&#20851;&#32852;&#30340;&#23618;&#27425;&#20307;&#31995;&#65292;&#20197;&#31649;&#29702;&#23427;&#20204;&#20043;&#38388;&#30340;&#20132;&#20114;&#20851;&#31995;&#12290;</p>
</section>
<section id="section-algebraic-structures">
<span id="id3"></span><h2><span class="section-number">6.2. </span>&#20195;&#25968;&#32467;&#26500;<a class="headerlink" href="#section-algebraic-structures" title="Link to this heading">&#61633;</a></h2>
<p>&#20026;&#20102;&#38416;&#26126;&#25105;&#20204;&#25152;&#35828;&#30340; <strong>&#20195;&#25968;&#32467;&#26500;</strong> &#36825;&#19968;&#30701;&#35821;&#30340;&#21547;&#20041;&#65292;&#32771;&#34385;&#19968;&#20123;&#20363;&#23376;&#20250;&#26377;&#25152;&#24110;&#21161;&#12290;</p>
<ol class="arabic simple">
<li><p><strong>&#20559;&#24207;&#38598;</strong> &#30001;&#38598;&#21512; <span class="math notranslate nohighlight">\(P\)</span> &#20197;&#21450;&#23450;&#20041;&#22312; <span class="math notranslate nohighlight">\(P\)</span> &#19978;&#30340;&#20108;&#20803;&#20851;&#31995; <span class="math notranslate nohighlight">\(\le\)</span> &#32452;&#25104;&#65292;&#35813;&#20851;&#31995;&#20855;&#26377;&#20256;&#36882;&#24615;&#21644;&#33258;&#21453;&#24615;&#12290;</p></li>
<li><p><strong>&#32676;</strong> &#30001;&#38598;&#21512; <span class="math notranslate nohighlight">\(G\)</span> &#20197;&#21450;&#20854;&#19978;&#30340;&#19968;&#20010;&#32467;&#21512;&#20108;&#20803;&#36816;&#31639;&#12289;&#19968;&#20010;&#21333;&#20301;&#20803; <span class="math notranslate nohighlight">\(1\)</span> &#21644;&#19968;&#20010;&#23558; <span class="math notranslate nohighlight">\(G\)</span> &#20013;&#27599;&#20010;&#20803;&#32032; <span class="math notranslate nohighlight">\(g\)</span> &#26144;&#23556;&#20026;&#20854;&#36870;&#20803; <span class="math notranslate nohighlight">\(g^{-1}\)</span> &#30340;&#20989;&#25968; <span class="math notranslate nohighlight">\(g \mapsto g^{-1}\)</span> &#26500;&#25104;&#12290;&#33509;&#36816;&#31639;&#28385;&#36275;&#20132;&#25442;&#24459;&#65292;&#21017;&#31216;&#35813;&#32676;&#20026;&#38463;&#36125;&#23572;&#32676;&#25110;&#20132;&#25442;&#32676;&#12290;</p></li>
<li><p><strong>&#26684;</strong> &#26159;&#19968;&#31181;&#20855;&#26377;&#20132;&#21644;&#24182;&#36816;&#31639;&#30340;&#37096;&#20998;&#26377;&#24207;&#38598;&#12290;</p></li>
<li><p><strong>&#29615;</strong> &#30001;&#19968;&#20010;&#65288;&#21152;&#27861;&#34920;&#31034;&#30340;&#65289;&#38463;&#36125;&#23572;&#32676; <span class="math notranslate nohighlight">\((R, +, 0, x \mapsto -x)\)</span> &#20197;&#21450;&#19968;&#20010;&#32467;&#21512;&#30340;&#20056;&#27861;&#36816;&#31639; <span class="math notranslate nohighlight">\(\cdot\)</span> &#21644;&#19968;&#20010;&#21333;&#20301;&#20803; <span class="math notranslate nohighlight">\(1\)</span> &#32452;&#25104;&#65292;&#24182;&#19988;&#20056;&#27861;&#23545;&#21152;&#27861;&#28385;&#36275;&#20998;&#37197;&#24459;&#12290;&#22914;&#26524;&#20056;&#27861;&#26159;&#21487;&#20132;&#25442;&#30340;&#65292;&#21017;&#31216;&#29615;&#20026; <strong>&#20132;&#25442;&#29615;</strong> &#12290;</p></li>
<li><p>&#19968;&#20010; <strong>&#26377;&#24207;&#29615;</strong> <span class="math notranslate nohighlight">\((R, +, 0, -, \cdot, 1, \le)\)</span> &#30001;&#19968;&#20010;&#29615;&#20197;&#21450;&#20854;&#20803;&#32032;&#19978;&#30340;&#19968;&#20010;&#20559;&#24207;&#20851;&#31995;&#32452;&#25104;&#65292;&#28385;&#36275;&#20197;&#19979;&#26465;&#20214;&#65306;&#23545;&#20110; <span class="math notranslate nohighlight">\(R\)</span> &#20013;&#30340;&#20219;&#24847; <span class="math notranslate nohighlight">\(a\)</span>&#12289;<span class="math notranslate nohighlight">\(b\)</span> &#21644; <span class="math notranslate nohighlight">\(c\)</span>&#65292;&#33509; <span class="math notranslate nohighlight">\(a \le b\)</span>&#65292;&#21017; <span class="math notranslate nohighlight">\(a + c \le b + c\)</span>&#65307;&#23545;&#20110; <span class="math notranslate nohighlight">\(R\)</span> &#20013;&#30340;&#20219;&#24847; <span class="math notranslate nohighlight">\(a\)</span> &#21644; <span class="math notranslate nohighlight">\(b\)</span>&#65292;&#33509; <span class="math notranslate nohighlight">\(0 \le a\)</span> &#19988; <span class="math notranslate nohighlight">\(0 \le b\)</span>&#65292;&#21017; <span class="math notranslate nohighlight">\(0 \le a b\)</span>&#12290;</p></li>
</ol>
<p>#. <strong>&#24230;&#37327;&#31354;&#38388;</strong> &#30001;&#19968;&#20010;&#38598;&#21512; <span class="math notranslate nohighlight">\(X\)</span> &#21644;&#19968;&#20010;&#20989;&#25968; <span class="math notranslate nohighlight">\(d : X \times X \to \mathbb{R}\)</span> &#32452;&#25104;&#65292;&#28385;&#36275;&#20197;&#19979;&#26465;&#20214;&#65306;
- &#23545;&#20110;&#38598;&#21512; X &#20013;&#30340;&#20219;&#24847; x &#21644; y&#65292;&#26377; <span class="math notranslate nohighlight">\(d(x, y) \ge 0\)</span> &#12290;
- &#24403;&#19988;&#20165;&#24403; x = y &#26102;&#65292;<span class="math notranslate nohighlight">\(d(x&#65292; y) = 0\)</span> &#12290;
- &#23545;&#20110;&#38598;&#21512; X &#20013;&#30340;&#20219;&#24847; x &#21644; y&#65292;&#26377; <span class="math notranslate nohighlight">\(d(x&#65292; y) = d(y&#65292; x)\)</span> &#12290;
- &#23545;&#20110;&#38598;&#21512; X &#20013;&#30340;&#20219;&#24847; x&#12289;y &#21644; z&#65292;&#26377; <span class="math notranslate nohighlight">\(d(x, z) \le d(x, y) + d(y&#65292; z)\)</span> &#12290;</p>
<p>#. <strong>&#25299;&#25169;&#31354;&#38388;</strong> &#30001;&#38598;&#21512; <span class="math notranslate nohighlight">\(X\)</span> &#20197;&#21450; <span class="math notranslate nohighlight">\(X\)</span> &#30340;&#23376;&#38598;&#25152;&#26500;&#25104;&#30340;&#38598;&#21512; <span class="math notranslate nohighlight">\(\mathcal T\)</span> &#32452;&#25104;&#65292;&#36825;&#20123;&#23376;&#38598;&#34987;&#31216;&#20026; <span class="math notranslate nohighlight">\(X\)</span> &#30340;&#24320;&#23376;&#38598;&#65292;&#19988;&#28385;&#36275;&#20197;&#19979;&#26465;&#20214;&#65306;
- &#31354;&#38598;&#21644; <span class="math notranslate nohighlight">\(X\)</span> &#26159;&#24320;&#38598;&#12290;
- &#20004;&#20010;&#24320;&#38598;&#30340;&#20132;&#38598;&#26159;&#24320;&#38598;&#12290;
- &#20219;&#24847;&#22810;&#20010;&#24320;&#38598;&#30340;&#24182;&#38598;&#26159;&#24320;&#38598;&#12290;</p>
<p>&#22312;&#19978;&#36848;&#27599;&#20010;&#20363;&#23376;&#20013;&#65292;&#32467;&#26500;&#30340;&#20803;&#32032;&#37117;&#23646;&#20110;&#19968;&#20010;&#38598;&#21512;&#65292;&#21363; <strong>&#36733;&#20307;&#38598;</strong> &#65292;&#26377;&#26102;&#23427;&#21487;&#20195;&#34920;&#25972;&#20010;&#32467;&#26500;&#12290;&#20363;&#22914;&#65292;&#24403;&#25105;&#20204;&#35828;&#8220;&#35774; <span class="math notranslate nohighlight">\(G\)</span> &#26159;&#19968;&#20010;&#32676;&#8221;&#65292;&#28982;&#21518;&#35828;&#8220;&#35774; <span class="math notranslate nohighlight">\(g \in G\)</span>&#8221;&#65292;&#36825;&#37324; <span class="math notranslate nohighlight">\(G\)</span> &#26082;&#20195;&#34920;&#32467;&#26500;&#26412;&#36523;&#65292;&#20063;&#20195;&#34920;&#20854;&#36733;&#20307;&#12290;&#24182;&#38750;&#27599;&#20010;&#20195;&#25968;&#32467;&#26500;&#37117;&#20197;&#36825;&#31181;&#26041;&#24335;&#19982;&#21333;&#20010;&#36733;&#20307;&#38598;&#30456;&#20851;&#32852;&#12290;&#20363;&#22914;&#65292; <strong>&#20108;&#37096;&#22270;</strong> &#28041;&#21450;&#20004;&#20010;&#38598;&#21512;&#20043;&#38388;&#30340;&#20851;&#31995;&#65292;<strong>&#20285;&#32599;&#29926;&#36830;&#25509;</strong> &#20063;&#26159;&#22914;&#27492;&#12290; <strong>&#33539;&#30068;</strong> &#20063;&#28041;&#21450;&#20004;&#20010;&#24863;&#20852;&#36259;&#30340;&#38598;&#21512;&#65292;&#36890;&#24120;&#31216;&#20026; <strong>&#23545;&#35937;</strong> &#21644; <strong>&#24577;&#23556;</strong> &#12290;
&#36825;&#20123;&#31034;&#20363;&#34920;&#26126;&#20102;&#35777;&#26126;&#21161;&#25163;&#20026;&#20102;&#25903;&#25345;&#20195;&#25968;&#25512;&#29702;&#38656;&#35201;&#23436;&#25104;&#30340;&#19968;&#20123;&#24037;&#20316;&#12290;
&#39318;&#20808;&#65292;&#23427;&#38656;&#35201;&#35782;&#21035;&#32467;&#26500;&#30340;&#20855;&#20307;&#23454;&#20363;&#12290;
&#25968;&#31995; <span class="math notranslate nohighlight">\(\mathbb{Z}\)</span>&#12289;<span class="math notranslate nohighlight">\(\mathbb{Q}\)</span> &#21644; <span class="math notranslate nohighlight">\(\mathbb{R}\)</span> &#37117;&#26159;&#26377;&#24207;&#29615;&#65292;
&#25105;&#20204;&#24212;&#24403;&#33021;&#22815;&#22312;&#36825;&#20123;&#23454;&#20363;&#20013;&#30340;&#20219;&#20309;&#19968;&#20010;&#19978;&#24212;&#29992;&#20851;&#20110;&#26377;&#24207;&#29615;&#30340;&#19968;&#33324;&#23450;&#29702;&#12290;
&#26377;&#26102;&#65292;&#19968;&#20010;&#20855;&#20307;&#30340;&#38598;&#21512;&#21487;&#33021;&#20197;&#19981;&#27490;&#19968;&#31181;&#26041;&#24335;&#25104;&#20026;&#26576;&#20010;&#32467;&#26500;&#30340;&#23454;&#20363;&#12290;
&#20363;&#22914;&#65292;&#38500;&#20102;&#26500;&#25104;&#23454;&#20998;&#26512;&#22522;&#30784;&#30340;&#36890;&#24120;&#30340; <span class="math notranslate nohighlight">\(\mathbb{R}\)</span> &#19978;&#30340;&#25299;&#25169;&#22806;&#65292;
&#25105;&#20204;&#36824;&#21487;&#20197;&#32771;&#34385; <span class="math notranslate nohighlight">\(\mathbb{R}\)</span> &#19978;&#30340; <strong>&#31163;&#25955;</strong> &#25299;&#25169;&#65292;&#22312;&#36825;&#31181;&#25299;&#25169;&#20013;&#65292;&#27599;&#20010;&#38598;&#21512;&#37117;&#26159;&#24320;&#38598;&#12290;
&#20854;&#27425;&#65292;&#35777;&#26126;&#21161;&#25163;&#38656;&#35201;&#25903;&#25345;&#32467;&#26500;&#19978;&#30340;&#36890;&#29992;&#31526;&#21495;&#34920;&#31034;&#12290;&#22312; Lean &#20013;&#65292;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">*</span></code> &#29992;&#20110;&#25152;&#26377;&#24120;&#35265;&#25968;&#31995;&#20013;&#30340;&#20056;&#27861;&#65292;&#20063;&#29992;&#20110;&#27867;&#25351;&#32676;&#21644;&#29615;&#20013;&#30340;&#20056;&#27861;&#12290;&#24403;&#25105;&#20204;&#20351;&#29992;&#20687; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code> &#36825;&#26679;&#30340;&#34920;&#36798;&#24335;&#26102;&#65292;Lean &#24517;&#39035;&#21033;&#29992;&#20851;&#20110; <code class="docutils literal notranslate"><span class="pre">f</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#30340;&#31867;&#22411;&#20449;&#24687;&#26469;&#30830;&#23450;&#25105;&#20204;&#25152;&#25351;&#30340;&#20056;&#27861;&#36816;&#31639;&#12290;
&#31532;&#19977;&#65292;&#23427;&#38656;&#35201;&#22788;&#29702;&#36825;&#26679;&#19968;&#20010;&#20107;&#23454;&#65292;&#21363;&#32467;&#26500;&#21487;&#20197;&#36890;&#36807;&#22810;&#31181;&#26041;&#24335;&#20174;&#20854;&#20182;&#32467;&#26500;&#32487;&#25215;&#23450;&#20041;&#12289;&#23450;&#29702;&#21644;&#31526;&#21495;&#12290;&#26377;&#20123;&#32467;&#26500;&#36890;&#36807;&#28155;&#21152;&#26356;&#22810;&#20844;&#29702;&#26469;&#25193;&#23637;&#20854;&#20182;&#32467;&#26500;&#12290;&#20132;&#25442;&#29615;&#20173;&#28982;&#26159;&#29615;&#65292;&#22240;&#27492;&#22312;&#29615;&#20013;&#26377;&#24847;&#20041;&#30340;&#20219;&#20309;&#23450;&#20041;&#22312;&#20132;&#25442;&#29615;&#20013;&#20063;&#26377;&#24847;&#20041;&#65292;&#20219;&#20309;&#22312;&#29615;&#20013;&#25104;&#31435;&#30340;&#23450;&#29702;&#22312;&#20132;&#25442;&#29615;&#20013;&#20063;&#25104;&#31435;&#12290;&#26377;&#20123;&#32467;&#26500;&#36890;&#36807;&#28155;&#21152;&#26356;&#22810;&#25968;&#25454;&#26469;&#25193;&#23637;&#20854;&#20182;&#32467;&#26500;&#12290;&#20363;&#22914;&#65292;&#20219;&#20309;&#29615;&#30340;&#21152;&#27861;&#37096;&#20998;&#37117;&#26159;&#21152;&#27861;&#32676;&#12290;&#29615;&#32467;&#26500;&#28155;&#21152;&#20102;&#20056;&#27861;&#21644;&#21333;&#20301;&#20803;&#65292;&#20197;&#21450;&#31649;&#29702;&#23427;&#20204;&#24182;&#23558;&#20854;&#19982;&#21152;&#27861;&#37096;&#20998;&#30456;&#20851;&#32852;&#30340;&#20844;&#29702;&#12290;&#26377;&#26102;&#25105;&#20204;&#21487;&#20197;&#29992;&#21478;&#19968;&#31181;&#32467;&#26500;&#26469;&#23450;&#20041;&#19968;&#31181;&#32467;&#26500;&#12290;&#20219;&#20309;&#24230;&#37327;&#31354;&#38388;&#37117;&#26377;&#19968;&#20010;&#19982;&#20043;&#30456;&#20851;&#30340;&#26631;&#20934;&#25299;&#25169;&#65292;&#21363;&#8220;&#24230;&#37327;&#31354;&#38388;&#25299;&#25169;&#8221;&#65292;&#24182;&#19988;&#20219;&#20309;&#32447;&#24615;&#24207;&#37117;&#21487;&#20197;&#20851;&#32852;&#22810;&#31181;&#25299;&#25169;&#12290;
&#26368;&#21518;&#65292;&#37325;&#35201;&#30340;&#26159;&#35201;&#35760;&#20303;&#65292;&#25968;&#23398;&#20351;&#25105;&#20204;&#33021;&#22815;&#20687;&#20351;&#29992;&#20989;&#25968;&#21644;&#36816;&#31639;&#26469;&#23450;&#20041;&#25968;&#23383;&#19968;&#26679;&#65292;&#20351;&#29992;&#20989;&#25968;&#21644;&#36816;&#31639;&#26469;&#23450;&#20041;&#32467;&#26500;&#12290;&#32676;&#30340;&#20056;&#31215;&#21644;&#24130;&#27425;&#20173;&#28982;&#26159;&#32676;&#12290;&#23545;&#20110;&#27599;&#20010; <span class="math notranslate nohighlight">\(n\)</span>&#65292;&#27169; <span class="math notranslate nohighlight">\(n\)</span> &#30340;&#25972;&#25968;&#26500;&#25104;&#19968;&#20010;&#29615;&#65292;&#23545;&#20110;&#27599;&#20010; <span class="math notranslate nohighlight">\(k &gt; 0\)</span>&#65292;&#35813;&#29615;&#20013;&#31995;&#25968;&#30340; <span class="math notranslate nohighlight">\(k \times k\)</span> &#22810;&#39033;&#24335;&#30697;&#38453;&#20877;&#27425;&#26500;&#25104;&#19968;&#20010;&#29615;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#33021;&#22815;&#20687;&#35745;&#31639;&#20854;&#20803;&#32032;&#19968;&#26679;&#36731;&#26494;&#22320;&#35745;&#31639;&#32467;&#26500;&#12290;&#36825;&#24847;&#21619;&#30528;&#20195;&#25968;&#32467;&#26500;&#22312;&#25968;&#23398;&#20013;&#26377;&#30528;&#21452;&#37325;&#36523;&#20221;&#65292;&#26082;&#26159;&#23545;&#35937;&#38598;&#21512;&#30340;&#23481;&#22120;&#65292;&#21448;&#26159;&#29420;&#31435;&#30340;&#23545;&#35937;&#12290;&#35777;&#26126;&#21161;&#25163;&#24517;&#39035;&#36866;&#24212;&#36825;&#31181;&#21452;&#37325;&#35282;&#33394;&#12290;
&#22312;&#22788;&#29702;&#20855;&#26377;&#20195;&#25968;&#32467;&#26500;&#30456;&#20851;&#32852;&#30340;&#31867;&#22411;&#30340;&#20803;&#32032;&#26102;&#65292;&#35777;&#26126;&#21161;&#25163;&#38656;&#35201;&#35782;&#21035;&#35813;&#32467;&#26500;&#24182;&#25214;&#21040;&#30456;&#20851;&#30340;&#23450;&#20041;&#12289;&#23450;&#29702;&#21644;&#31526;&#21495;&#12290;&#36825;&#19968;&#20999;&#21548;&#36215;&#26469;&#20284;&#20046;&#24037;&#20316;&#37327;&#24456;&#22823;&#65292;&#30830;&#23454;&#22914;&#27492;&#12290;&#20294; Lean &#20351;&#29992;&#19968;&#23567;&#37096;&#20998;&#22522;&#26412;&#26426;&#21046;&#26469;&#23436;&#25104;&#36825;&#20123;&#20219;&#21153;&#12290;&#26412;&#33410;&#30340;&#30446;&#26631;&#26159;&#35299;&#37322;&#36825;&#20123;&#26426;&#21046;&#24182;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;&#23427;&#20204;&#12290;
&#31532;&#19968;&#20010;&#35201;&#32032;&#20960;&#20046;&#26080;&#38656;&#25552;&#21450;&#65292;&#22240;&#20026;&#23427;&#22826;&#36807;&#26174;&#32780;&#26131;&#35265;&#65306;&#20174;&#24418;&#24335;&#19978;&#35762;&#65292;&#20195;&#25968;&#32467;&#26500;&#26159; <a class="reference internal" href="#section-structures"><span class="std std-numref">Section 6.1</span></a> &#20013;&#25152;&#23450;&#20041;&#30340;&#37027;&#31181;&#32467;&#26500;&#12290;&#20195;&#25968;&#32467;&#26500;&#26159;&#23545;&#28385;&#36275;&#26576;&#20123;&#20844;&#29702;&#20551;&#35774;&#30340;&#25968;&#25454;&#26463;&#30340;&#35268;&#33539;&#65292;&#25105;&#20204;&#22312; <a class="reference internal" href="#section-structures"><span class="std std-numref">Section 6.1</span></a> &#20013;&#30475;&#21040;&#65292;&#36825;&#27491;&#26159; <code class="docutils literal notranslate"><span class="pre">structure</span></code> &#21629;&#20196;&#25152;&#35774;&#35745;&#35201;&#23481;&#32435;&#30340;&#20869;&#23481;&#12290;&#36825;&#31616;&#30452;&#26159;&#22825;&#20316;&#20043;&#21512;&#65281;
&#32473;&#23450;&#19968;&#31181;&#25968;&#25454;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#65292;&#25105;&#20204;&#21487;&#20197;&#25353;&#22914;&#19979;&#26041;&#24335;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#30340;&#32676;&#32467;&#26500;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">Group&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">inv</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="o">(</span><span class="n">mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">(</span><span class="n">mul</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="o">)</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">inv_mul_cancel</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="o">(</span><span class="n">inv</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">one</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#22312; <code class="docutils literal notranslate"><span class="pre">group&#8321;</span></code> &#30340;&#23450;&#20041;&#20013;&#65292;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#26159;&#19968;&#20010; <strong>&#21442;&#25968;</strong> &#12290;&#22240;&#27492;&#65292;&#24744;&#24212;&#24403;&#23558;&#23545;&#35937; <code class="docutils literal notranslate"><span class="pre">struc</span> <span class="pre">:</span> <span class="pre">Group&#8321;</span> <span class="pre">&#945;</span></code> &#35270;&#20026;&#26159;&#22312; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#30340;&#19968;&#20010;&#32676;&#32467;&#26500;&#12290;&#25105;&#20204;&#22312; <a class="reference internal" href="C02_Basics.html#proving-identities-in-algebraic-structures"><span class="std std-numref">Section 2.2</span></a> &#20013;&#30475;&#21040;&#65292;&#19982; <code class="docutils literal notranslate"><span class="pre">inv_mul_cancel</span></code> &#30456;&#23545;&#24212;&#30340; <code class="docutils literal notranslate"><span class="pre">mul_inv_cancel</span></code> &#21487;&#20197;&#20174;&#20854;&#20182;&#32676;&#20844;&#29702;&#25512;&#23548;&#20986;&#26469;&#65292;&#25152;&#20197;&#26080;&#38656;&#23558;&#20854;&#28155;&#21152;&#21040;&#23450;&#20041;&#20013;&#12290;</p>
<p>&#36825;&#20010;&#32676;&#30340;&#23450;&#20041;&#19982; Mathlib &#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#23450;&#20041;&#31867;&#20284;&#65292;&#25105;&#20204;&#36873;&#25321;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Group&#8321;</span></code> &#36825;&#20010;&#21517;&#31216;&#26469;&#21306;&#20998;&#25105;&#20204;&#30340;&#29256;&#26412;&#12290;&#22914;&#26524;&#24744;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">Group</span></code> &#24182;&#28857;&#20987;&#23450;&#20041;&#65292;&#24744;&#20250;&#30475;&#21040; Mathlib &#29256;&#26412;&#30340; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#34987;&#23450;&#20041;&#20026;&#25193;&#23637;&#20102;&#21478;&#19968;&#20010;&#32467;&#26500;&#65307;&#25105;&#20204;&#31245;&#21518;&#20250;&#35299;&#37322;&#22914;&#20309;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;&#22914;&#26524;&#24744;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">#print</span> <span class="pre">Group</span></code> &#65292;&#24744;&#36824;&#20250;&#30475;&#21040; Mathlib &#29256;&#26412;&#30340; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#20855;&#26377;&#35768;&#22810;&#39069;&#22806;&#30340;&#23383;&#27573;&#12290;&#20986;&#20110;&#31245;&#21518;&#20250;&#35299;&#37322;&#30340;&#21407;&#22240;&#65292;&#26377;&#26102;&#22312;&#32467;&#26500;&#20013;&#28155;&#21152;&#20887;&#20313;&#20449;&#24687;&#26159;&#26377;&#29992;&#30340;&#65292;&#36825;&#26679;&#23601;&#26377;&#39069;&#22806;&#30340;&#23383;&#27573;&#29992;&#20110;&#20174;&#26680;&#24515;&#25968;&#25454;&#23450;&#20041;&#30340;&#23545;&#35937;&#21644;&#20989;&#25968;&#12290;&#29616;&#22312;&#20808;&#21035;&#25285;&#24515;&#36825;&#20010;&#38382;&#39064;&#12290;&#35831;&#25918;&#24515;&#65292;&#25105;&#20204;&#30340;&#31616;&#21270;&#29256;&#26412; <code class="docutils literal notranslate"><span class="pre">Group&#8321;</span></code> &#22312;&#26412;&#36136;&#19978;&#19982; Mathlib &#20351;&#29992;&#30340;&#32676;&#23450;&#20041;&#30456;&#21516;&#12290;</p>
<p>&#26377;&#26102;&#23558;&#31867;&#22411;&#19982;&#32467;&#26500;&#25414;&#32465;&#22312;&#19968;&#36215;&#26159;&#26377;&#29992;&#30340;&#65292;Mathlib &#20013;&#20063;&#21253;&#21547;&#19968;&#20010;&#19982;&#20197;&#19979;&#23450;&#20041;&#31561;&#20215;&#30340; <code class="docutils literal notranslate"><span class="pre">GroupCat</span></code> &#32467;&#26500;&#23450;&#20041;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">Group&#8321;Cat</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span>
<span class="w">  </span><span class="n">str</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Group&#8321;</span><span class="w"> </span><span class="n">&#945;</span>
</pre></div>
</div>
<p>Mathlib &#29256;&#26412;&#20301;&#20110; <code class="docutils literal notranslate"><span class="pre">Mathlib.Algebra.Category.GroupCat.Basic</span></code> &#20013;&#65292;&#22914;&#26524;&#24744;&#22312;&#31034;&#20363;&#25991;&#20214;&#24320;&#22836;&#30340;&#23548;&#20837;&#20013;&#28155;&#21152;&#27492;&#20869;&#23481;&#65292;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">#check</span></code> &#26597;&#30475;&#23427;&#12290;</p>
<p>&#20986;&#20110;&#19979;&#25991;&#20250;&#26356;&#28165;&#26970;&#35828;&#26126;&#30340;&#21407;&#22240;&#65292;&#36890;&#24120;&#26356;&#26377;&#29992;&#30340;&#20570;&#27861;&#26159;&#23558;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19982;&#32467;&#26500; <code class="docutils literal notranslate"><span class="pre">Group</span> <span class="pre">&#945;</span></code> &#20998;&#24320;&#12290;&#25105;&#20204;&#23558;&#36825;&#20004;&#20010;&#23545;&#35937;&#19968;&#36215;&#31216;&#20026; <strong>&#37096;&#20998;&#25414;&#32465;&#32467;&#26500;</strong> &#65292;&#22240;&#20026;&#20854;&#34920;&#31034;&#23558;&#22823;&#37096;&#20998;&#20294;&#24182;&#38750;&#20840;&#37096;&#30340;&#32452;&#20214;&#32452;&#21512;&#25104;&#19968;&#20010;&#32467;&#26500;&#12290;&#22312; Mathlib &#20013;&#65292;&#24403;&#26576;&#20010;&#31867;&#22411;&#34987;&#29992;&#20316;&#32676;&#30340;&#36733;&#20307;&#31867;&#22411;&#26102;&#65292;&#36890;&#24120;&#20250;&#20351;&#29992;&#22823;&#20889;&#32599;&#39532;&#23383;&#27597;&#22914; <code class="docutils literal notranslate"><span class="pre">G</span></code> &#26469;&#34920;&#31034;&#35813;&#31867;&#22411;&#12290;</p>
<p>&#35753;&#25105;&#20204;&#26500;&#24314;&#19968;&#20010;&#32676;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Group&#8321;</span></code> &#31867;&#22411;&#30340;&#20803;&#32032;&#12290;&#23545;&#20110;&#20219;&#24847;&#30340;&#31867;&#22411;&#945;&#21644;&#946;&#65292;Mathlib &#23450;&#20041;&#20102;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Equiv</span> <span class="pre">&#945;</span> <span class="pre">&#946;</span></code> &#65292;&#34920;&#31034;&#945;&#21644;&#946;&#20043;&#38388;&#30340; <strong>&#31561;&#20215;&#20851;&#31995;</strong> &#12290;
Mathlib &#36824;&#20026;&#36825;&#20010;&#31867;&#22411;&#23450;&#20041;&#20102;&#20855;&#26377;&#25552;&#31034;&#24615;&#30340;&#35760;&#21495; <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8771;</span> <span class="pre">&#946;</span></code> &#12290;
&#19968;&#20010;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8771;</span> <span class="pre">&#946;</span></code> &#26159;&#945;&#21644;&#946;&#20043;&#38388;&#30340;&#21452;&#23556;&#65292;&#30001;&#22235;&#20010;&#37096;&#20998;&#34920;&#31034;&#65306;
&#20174;&#945;&#21040;&#946;&#30340;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">f.toFun</span></code> &#65292;
&#20174;&#946;&#21040;&#945;&#30340;&#36870;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">f.invFun</span></code> &#65292;
&#20197;&#21450;&#20004;&#20010;&#25351;&#23450;&#36825;&#20123;&#20989;&#25968;&#30830;&#23454;&#26159;&#24444;&#27492;&#36870;&#20989;&#25968;&#30340;&#24615;&#36136;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">Equiv</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">f.toFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">f.invFun</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">f.right_inv</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f.invFun</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">f.left_inv</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">f.invFun</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">Equiv.refl</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">f.symm</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">f.trans</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#26368;&#21518;&#19977;&#20010;&#26500;&#36896;&#30340;&#21019;&#36896;&#24615;&#21629;&#21517;&#12290;&#25105;&#20204;&#23558;&#24658;&#31561;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Equiv.refl</span></code> &#12289;&#36870;&#36816;&#31639; <code class="docutils literal notranslate"><span class="pre">Equiv.symm</span></code> &#21644;&#22797;&#21512;&#36816;&#31639; <code class="docutils literal notranslate"><span class="pre">Equiv.trans</span></code> &#35270;&#20026;&#26126;&#30830;&#30340;&#35777;&#25454;&#65292;&#34920;&#26126;&#22788;&#20110;&#21452;&#23556;&#23545;&#24212;&#20851;&#31995;&#30340;&#24615;&#36136;&#26159;&#19968;&#20010;&#31561;&#20215;&#20851;&#31995;&#12290;</p>
<p>&#36824;&#35201;&#27880;&#24847;&#65292; <code class="docutils literal notranslate"><span class="pre">f.trans</span> <span class="pre">g</span></code> &#35201;&#27714;&#23558;&#21069;&#21521;&#20989;&#25968;&#25353;&#30456;&#21453;&#30340;&#39034;&#24207;&#32452;&#21512;&#12290;Mathlib &#24050;&#32463;&#22768;&#26126;&#20102;&#20174; <code class="docutils literal notranslate"><span class="pre">Equiv</span> <span class="pre">&#945;</span> <span class="pre">&#946;</span></code> &#21040;&#20989;&#25968;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> &#30340;&#19968;&#20010; <strong>&#24378;&#21046;&#36716;&#25442;</strong> &#65292;&#22240;&#27492;&#25105;&#20204;&#21487;&#20197;&#30465;&#30053;&#20070;&#20889; <code class="docutils literal notranslate"><span class="pre">.toFun</span></code> &#65292;&#35753; Lean &#20026;&#25105;&#20204;&#25554;&#20837;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f.trans</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="bp">.</span><span class="n">toFun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">g.toFun</span><span class="w"> </span><span class="o">(</span><span class="n">f.toFun</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f.trans</span><span class="w"> </span><span class="n">g</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">f.trans</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">&#8728;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>Mathlib &#36824;&#23450;&#20041;&#20102; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19982;&#20854;&#33258;&#36523;&#30340;&#31561;&#20215;&#20851;&#31995;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">perm</span> <span class="pre">&#945;</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#26174;&#28982;&#65292; <code class="docutils literal notranslate"><span class="pre">Equiv.Perm</span> <span class="pre">&#945;</span></code> &#22312;&#31561;&#20215;&#20851;&#31995;&#30340;&#32452;&#21512;&#19979;&#24418;&#25104;&#20102;&#19968;&#20010;&#32676;&#12290;&#25105;&#20204;&#23558;&#20056;&#27861;&#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">mul</span> <span class="pre">f</span> <span class="pre">g</span></code> &#31561;&#20110; <code class="docutils literal notranslate"><span class="pre">g.trans</span> <span class="pre">f</span></code> &#65292;&#20854;&#21069;&#21521;&#20989;&#25968;&#20026; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">&#8728;</span> <span class="pre">g</span></code> &#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#20056;&#27861;&#23601;&#26159;&#25105;&#20204;&#36890;&#24120;&#25152;&#35748;&#20026;&#30340;&#21452;&#23556;&#30340;&#32452;&#21512;&#12290;&#36825;&#37324;&#25105;&#20204;&#23450;&#20041;&#36825;&#20010;&#32676;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">permGroup</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Group&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="w">    </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.trans</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">f</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.refl</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">inv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.symm</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">Equiv.trans_assoc</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.trans_refl</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.refl_trans</span>
<span class="w">  </span><span class="n">inv_mul_cancel</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.self_trans_symm</span>
</pre></div>
</div>
<p>&#23454;&#38469;&#19978;&#65292;Mathlib &#22312;&#25991;&#20214; <code class="docutils literal notranslate"><span class="pre">GroupTheory.Perm.Basic</span></code> &#20013;&#20026; <code class="docutils literal notranslate"><span class="pre">Equiv.Perm</span> <span class="pre">&#945;</span></code> &#31934;&#30830;&#22320;&#23450;&#20041;&#20102;&#36825;&#20010; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#32467;&#26500;&#12290;
&#21644;&#24448;&#24120;&#19968;&#26679;&#65292;&#24744;&#21487;&#20197;&#23558;&#40736;&#26631;&#24748;&#20572;&#22312; <code class="docutils literal notranslate"><span class="pre">permGroup</span></code> &#23450;&#20041;&#20013;&#20351;&#29992;&#30340;&#23450;&#29702;&#19978;&#20197;&#26597;&#30475;&#20854;&#38472;&#36848;&#65292;&#24182;&#19988;&#21487;&#20197;&#36339;&#36716;&#21040;&#21407;&#22987;&#25991;&#20214;&#20013;&#30340;&#23450;&#20041;&#20197;&#20102;&#35299;&#23427;&#20204;&#26159;&#22914;&#20309;&#23454;&#29616;&#30340;&#12290;</p>
<p>&#22312;&#26222;&#36890;&#25968;&#23398;&#20013;&#65292;&#25105;&#20204;&#36890;&#24120;&#35748;&#20026;&#31526;&#21495;&#34920;&#31034;&#19982;&#32467;&#26500;&#26159;&#30456;&#20114;&#29420;&#31435;&#30340;&#12290;
&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#32771;&#34385;&#32676; <span class="math notranslate nohighlight">\((G_1, \cdot, 1, \cdot^{-1})\)</span>&#12289;<span class="math notranslate nohighlight">\((G_2&#65292; \circ&#65292; e&#65292; i(\cdot))\)</span> &#21644; <span class="math notranslate nohighlight">\((G_3&#65292; +&#65292; 0, -)\)</span>&#12290;
&#22312;&#31532;&#19968;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#23558;&#20108;&#20803;&#36816;&#31639;&#20889;&#20026; <span class="math notranslate nohighlight">\(\cdot\)</span>&#65292;&#21333;&#20301;&#20803;&#20026; <span class="math notranslate nohighlight">\(1\)</span>&#65292;&#36870;&#20989;&#25968;&#20026; <span class="math notranslate nohighlight">\(x \mapsto x^{-1}\)</span>&#12290;
&#22312;&#31532;&#20108;&#31181;&#21644;&#31532;&#19977;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#20351;&#29992;&#25152;&#31034;&#30340;&#31526;&#21495;&#26367;&#20195;&#24418;&#24335;&#12290;
&#28982;&#32780;&#65292;&#22312; Lean &#20013;&#23545;&#32676;&#30340;&#27010;&#24565;&#36827;&#34892;&#24418;&#24335;&#21270;&#26102;&#65292;&#31526;&#21495;&#34920;&#31034;&#19982;&#32467;&#26500;&#30340;&#32852;&#31995;&#26356;&#20026;&#32039;&#23494;&#12290;
&#22312; Lean &#20013;&#65292;&#20219;&#20309; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#30340;&#32452;&#25104;&#37096;&#20998;&#37117;&#21629;&#21517;&#20026; <code class="docutils literal notranslate"><span class="pre">mul</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">one</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">inv</span></code> &#65292;&#31245;&#21518;&#25105;&#20204;&#23558;&#30475;&#21040;&#20056;&#27861;&#31526;&#21495;&#26159;&#22914;&#20309;&#19982;&#23427;&#20204;&#20851;&#32852;&#30340;&#12290;
&#22914;&#26524;&#25105;&#20204;&#24819;&#20351;&#29992;&#21152;&#27861;&#31526;&#21495;&#65292;&#21017;&#20351;&#29992;&#21516;&#26500;&#32467;&#26500; <code class="docutils literal notranslate"><span class="pre">AddGroup</span></code> &#65288;&#21152;&#27861;&#32676;&#30340;&#22522;&#30784;&#32467;&#26500;&#65289;&#12290;&#20854;&#32452;&#25104;&#37096;&#20998;&#21629;&#21517;&#20026; <code class="docutils literal notranslate"><span class="pre">add</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">zero</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">neg</span></code> &#65292;&#30456;&#20851;&#31526;&#21495;&#20063;&#26159;&#24744;&#25152;&#26399;&#26395;&#30340;&#37027;&#26679;&#12290;</p>
<p>&#22238;&#24819;&#19968;&#19979;&#25105;&#20204;&#22312; <a class="reference internal" href="#section-structures"><span class="std std-numref">Section 6.1</span></a> &#20013;&#23450;&#20041;&#30340;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#65292;&#20197;&#21450;&#22312;&#37027;&#37324;&#23450;&#20041;&#30340;&#21152;&#27861;&#20989;&#25968;&#12290;&#36825;&#20123;&#23450;&#20041;&#22312;&#26412;&#33410;&#38468;&#24102;&#30340;&#31034;&#20363;&#25991;&#20214;&#20013;&#26377;&#25152;&#37325;&#29616;&#12290;&#20316;&#20026;&#32451;&#20064;&#65292;&#35831;&#23450;&#20041;&#19968;&#20010;&#31867;&#20284;&#20110;&#25105;&#20204;&#19978;&#38754;&#23450;&#20041;&#30340; <code class="docutils literal notranslate"><span class="pre">Group&#8321;</span></code> &#32467;&#26500;&#30340; <code class="docutils literal notranslate"><span class="pre">AddGroup&#8321;</span></code> &#32467;&#26500;&#65292;&#20294;&#20351;&#29992;&#21018;&#21018;&#25551;&#36848;&#30340;&#21152;&#27861;&#21629;&#21517;&#26041;&#26696;&#12290;&#22312; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#25968;&#25454;&#31867;&#22411;&#19978;&#23450;&#20041;&#21542;&#23450;&#21644;&#38646;&#65292;&#24182;&#22312; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#19978;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">AddGroup&#8321;</span></code> &#32467;&#26500;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">structure</span><span class="w"> </span><span class="n">AddGroup&#8321;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="o">(</span><span class="n">add</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="w">  </span><span class="c1">-- fill in the rest</span>
<span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8477;</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">Point</span>

<span class="kd">def</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">a.x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.x</span><span class="o">,</span><span class="w"> </span><span class="n">a.y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.y</span><span class="o">,</span><span class="w"> </span><span class="n">a.z</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b.z</span><span class="o">&#10217;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">neg</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>

<span class="kd">def</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>

<span class="kd">def</span><span class="w"> </span><span class="n">addGroupPoint</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">AddGroup&#8321;</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>

<span class="kd">end</span><span class="w"> </span><span class="n">Point</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#27491;&#22312;&#21462;&#24471;&#36827;&#23637;&#12290;
&#29616;&#22312;&#25105;&#20204;&#30693;&#36947;&#20102;&#22914;&#20309;&#22312; Lean &#20013;&#23450;&#20041;&#20195;&#25968;&#32467;&#26500;&#65292;&#20063;&#30693;&#36947;&#22914;&#20309;&#23450;&#20041;&#36825;&#20123;&#32467;&#26500;&#30340;&#23454;&#20363;&#12290;
&#20294;&#25105;&#20204;&#36824;&#24076;&#26395;&#23558;&#31526;&#21495;&#19982;&#32467;&#26500;&#30456;&#20851;&#32852;&#65292;&#20197;&#20415;&#22312;&#27599;&#20010;&#23454;&#20363;&#20013;&#20351;&#29992;&#23427;&#12290;
&#27492;&#22806;&#65292;&#25105;&#20204;&#24076;&#26395;&#23433;&#25490;&#22909;&#65292;&#20197;&#20415;&#21487;&#20197;&#22312;&#32467;&#26500;&#19978;&#23450;&#20041;&#19968;&#20010;&#25805;&#20316;&#65292;&#24182;&#22312;&#20219;&#20309;&#29305;&#23450;&#23454;&#20363;&#20013;&#20351;&#29992;&#23427;&#65292;&#36824;&#24076;&#26395;&#23433;&#25490;&#22909;&#65292;&#20197;&#20415;&#21487;&#20197;&#22312;&#32467;&#26500;&#19978;&#35777;&#26126;&#19968;&#20010;&#23450;&#29702;&#65292;&#24182;&#22312;&#20219;&#20309;&#23454;&#20363;&#20013;&#20351;&#29992;&#23427;&#12290;</p>
<p>&#23454;&#38469;&#19978;&#65292;Mathlib &#24050;&#32463;&#35774;&#32622;&#22909;&#20351;&#29992;&#36890;&#29992;&#32676;&#34920;&#31034;&#27861;&#12289;&#23450;&#20041;&#21644;&#23450;&#29702;&#26469;&#22788;&#29702; <code class="docutils literal notranslate"><span class="pre">Equiv.Perm</span> <span class="pre">&#945;</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span>
<span class="k">#check</span><span class="w"> </span><span class="n">mul_assoc</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">g</span><span class="bp">&#8315;&#185;</span>

<span class="c1">-- &#32676;&#24130;&#65292;&#23450;&#20041;&#36866;&#29992;&#20110;&#20219;&#20309;&#32676;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="n">n</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">mul_assoc</span><span class="o">,</span><span class="w"> </span><span class="n">mul_inv_cancel</span><span class="o">,</span><span class="w"> </span><span class="n">mul_one</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">mul_inv_cancel_right</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">g.symm.trans</span><span class="w"> </span><span class="o">(</span><span class="n">g.trans</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">mul_inv_cancel_right</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span>
</pre></div>
</div>
<p>&#24744;&#21487;&#20197;&#26816;&#26597;&#19968;&#19979;&#65292;&#23545;&#20110;&#19978;&#38754;&#35201;&#27714;&#24744;&#23450;&#20041;&#30340; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#19978;&#30340;&#21152;&#27861;&#32676;&#32467;&#26500;&#65292;&#24773;&#20917;&#24182;&#38750;&#22914;&#27492;&#12290;
&#25105;&#20204;&#29616;&#22312;&#35201;&#20570;&#30340;&#23601;&#26159;&#29702;&#35299;&#24149;&#21518;&#21457;&#29983;&#30340;&#31070;&#22855;&#25805;&#20316;&#65292;&#20197;&#20415;&#35753; <code class="docutils literal notranslate"><span class="pre">Equiv.Perm</span> <span class="pre">&#945;</span></code> &#30340;&#31034;&#20363;&#33021;&#22815;&#20687;&#39044;&#26399;&#37027;&#26679;&#36816;&#34892;&#12290;</p>
<p>&#38382;&#39064;&#22312;&#20110;&#65292;Lean &#38656;&#35201;&#33021;&#22815;&#26681;&#25454;&#25105;&#20204;&#36755;&#20837;&#30340;&#34920;&#36798;&#24335;&#20013;&#25152;&#21253;&#21547;&#30340;&#20449;&#24687;&#26469; <strong>&#25214;&#21040;</strong> &#30456;&#20851;&#30340;&#31526;&#21495;&#34920;&#31034;&#21644;&#38544;&#21547;&#30340;&#32676;&#32467;&#26500;&#12290;&#21516;&#26679;&#22320;&#65292;&#24403;&#25105;&#20204;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code> &#19988;&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#30340;&#31867;&#22411;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code> &#26102;&#65292;Lean &#38656;&#35201;&#23558; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#31526;&#21495;&#35299;&#37322;&#20026;&#23454;&#25968;&#19978;&#30340;&#30456;&#20851;&#21152;&#27861;&#20989;&#25968;&#12290;&#23427;&#36824;&#24517;&#39035;&#35782;&#21035;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code> &#26159;&#20132;&#25442;&#29615;&#30340;&#19968;&#20010;&#23454;&#20363;&#65292;&#36825;&#26679;&#25152;&#26377;&#20851;&#20110;&#20132;&#25442;&#29615;&#30340;&#23450;&#20041;&#21644;&#23450;&#29702;&#25165;&#33021;&#34987;&#20351;&#29992;&#12290;&#20877;&#20030;&#20010;&#20363;&#23376;&#65292;&#36830;&#32493;&#24615;&#22312; Lean &#20013;&#26159;&#30456;&#23545;&#20110;&#20219;&#24847;&#20004;&#20010;&#25299;&#25169;&#31354;&#38388;&#26469;&#23450;&#20041;&#30340;&#12290;&#24403;&#25105;&#20204;&#26377; <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">&#65306;</span> <span class="pre">&#8477;</span> <span class="pre">&#8594;</span> <span class="pre">&#8450;</span></code> &#24182;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">Continuous</span> <span class="pre">f</span></code> &#26102;&#65292;Lean &#24517;&#39035;&#25214;&#21040; <code class="docutils literal notranslate"><span class="pre">&#8477;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">&#8450;</span></code> &#19978;&#30340;&#30456;&#20851;&#25299;&#25169;&#12290;</p>
<p>&#36825;&#31181;&#39764;&#21147;&#26159;&#36890;&#36807;&#19977;&#32773;&#30340;&#32467;&#21512;&#23454;&#29616;&#30340;&#12290;</p>
<ol class="arabic simple">
<li><p><strong>&#36923;&#36753;</strong> &#12290;&#22312;&#20219;&#20309;&#32676;&#32452;&#20013;&#37117;&#24212;&#22914;&#27492;&#35299;&#37322;&#30340;&#23450;&#20041;&#65292;&#20854;&#21442;&#25968;&#24212;&#21253;&#21547;&#32676;&#32452;&#30340;&#31867;&#22411;&#21644;&#32676;&#32452;&#32467;&#26500;&#12290;&#21516;&#26679;&#65292;&#20851;&#20110;&#20219;&#24847;&#32676;&#32452;&#20803;&#32032;&#30340;&#23450;&#29702;&#65292;&#20854;&#24320;&#22836;&#24212;&#21253;&#21547;&#23545;&#32676;&#32452;&#31867;&#22411;&#21644;&#32676;&#32452;&#32467;&#26500;&#30340;&#20840;&#31216;&#37327;&#35789;&#12290;</p></li>
<li><p><strong>&#38544;&#24335;&#21442;&#25968;</strong> &#12290;&#31867;&#22411;&#21644;&#32467;&#26500;&#30340;&#21442;&#25968;&#36890;&#24120;&#34987;&#38544;&#24335;&#30465;&#30053;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#19981;&#24517;&#20070;&#20889;&#23427;&#20204;&#65292;&#20063;&#19981;&#24517;&#22312; Lean &#30340;&#20449;&#24687;&#31383;&#21475;&#20013;&#30475;&#21040;&#23427;&#20204;&#12290;Lean &#20250;&#40664;&#40664;&#22320;&#20026;&#25105;&#20204;&#34917;&#20805;&#36825;&#20123;&#20449;&#24687;&#12290;</p></li>
<li><p><strong>&#31867;&#22411;&#31867;&#25512;&#26029;</strong> &#12290;&#20063;&#31216;&#20026; <strong>&#31867;&#25512;&#26029;</strong> &#65292;&#36825;&#26159;&#19968;&#31181;&#31616;&#21333;&#20294;&#24378;&#22823;&#30340;&#26426;&#21046;&#65292;&#20351;&#25105;&#20204;&#33021;&#22815;&#20026; Lean &#27880;&#20876;&#20449;&#24687;&#20197;&#20379;&#26085;&#21518;&#20351;&#29992;&#12290;&#24403; Lean &#34987;&#35201;&#27714;&#20026;&#23450;&#20041;&#12289;&#23450;&#29702;&#25110;&#31526;&#21495;&#22635;&#20889;&#38544;&#24335;&#21442;&#25968;&#26102;&#65292;&#23427;&#21487;&#20197;&#21033;&#29992;&#24050;&#27880;&#20876;&#30340;&#20449;&#24687;&#12290;</p></li>
</ol>
<p>&#32780;&#27880;&#37322; <code class="docutils literal notranslate"><span class="pre">(grp</span> <span class="pre">:</span> <span class="pre">Group</span> <span class="pre">G)</span></code> &#21578;&#35785; Lean &#23427;&#24212;&#35813;&#26399;&#26395;&#26126;&#30830;&#32473;&#20986;&#35813;&#21442;&#25968;&#65292;&#27880;&#37322; <code class="docutils literal notranslate"><span class="pre">{grp</span> <span class="pre">:</span> <span class="pre">Group</span> <span class="pre">G}</span></code> &#21578;&#35785; Lean &#23427;&#24212;&#35813;&#23581;&#35797;&#20174;&#34920;&#36798;&#24335;&#20013;&#30340;&#19978;&#19979;&#25991;&#32447;&#32034;&#20013;&#25512;&#26029;&#20986;&#26469;&#65292;&#27880;&#37322; <code class="docutils literal notranslate"><span class="pre">[grp</span> <span class="pre">&#65306;</span> <span class="pre">Group</span> <span class="pre">G]</span></code> &#21017;&#21578;&#35785; Lean &#24212;&#35813;&#20351;&#29992;&#31867;&#22411;&#31867;&#25512;&#26029;&#26469;&#21512;&#25104;&#30456;&#24212;&#30340;&#21442;&#25968;&#12290;&#30001;&#20110;&#20351;&#29992;&#27492;&#31867;&#21442;&#25968;&#30340;&#20840;&#37096;&#24847;&#20041;&#22312;&#20110;&#25105;&#20204;&#36890;&#24120;&#26080;&#38656;&#26126;&#30830;&#24341;&#29992;&#23427;&#20204;&#65292;Lean &#20801;&#35768;&#25105;&#20204;&#20889;&#25104; <code class="docutils literal notranslate"><span class="pre">[Group</span> <span class="pre">G]</span></code> &#24182;&#23558;&#21517;&#31216;&#21311;&#21517;&#21270;&#12290;&#24744;&#21487;&#33021;&#24050;&#32463;&#27880;&#24847;&#21040;&#65292;Lean &#20250;&#36873;&#25321;&#35832;&#22914; <code class="docutils literal notranslate"><span class="pre">_inst_1</span></code> &#36825;&#26679;&#30340;&#21517;&#31216;&#12290;&#33258;&#21160;&#22320;&#12290;
&#24403;&#25105;&#20204;&#20351;&#29992;&#24102;&#26377; <code class="docutils literal notranslate"><span class="pre">variables</span></code> &#21629;&#20196;&#30340;&#21311;&#21517;&#26041;&#25324;&#21495;&#27880;&#37322;&#26102;&#65292;&#21482;&#35201;&#21464;&#37327;&#20173;&#22312;&#20316;&#29992;&#22495;&#20869;&#65292;Lean &#23601;&#20250;&#33258;&#21160;&#20026;&#25552;&#21450; <code class="docutils literal notranslate"><span class="pre">G</span></code> &#30340;&#20219;&#20309;&#23450;&#20041;&#25110;&#23450;&#29702;&#28155;&#21152;&#21442;&#25968; <code class="docutils literal notranslate"><span class="pre">[Group</span> <span class="pre">G]</span></code> &#12290;</p>
<p>&#25105;&#20204;&#22914;&#20309;&#27880;&#20876; Lean &#36827;&#34892;&#25628;&#32034;&#25152;&#38656;&#30340;&#20449;&#24687;&#65311;
&#22238;&#21040;&#25105;&#20204;&#30340;&#32676;&#31034;&#20363;&#65292;&#25105;&#20204;&#21482;&#38656;&#20570;&#20004;&#20010;&#25913;&#21160;&#12290;
&#39318;&#20808;&#65292;&#25105;&#20204;&#19981;&#29992; <code class="docutils literal notranslate"><span class="pre">structure</span></code> &#21629;&#20196;&#26469;&#23450;&#20041;&#32676;&#32467;&#26500;&#65292;&#32780;&#26159;&#20351;&#29992;&#20851;&#38190;&#23383; <code class="docutils literal notranslate"><span class="pre">class</span></code> &#26469;&#34920;&#26126;&#23427;&#26159;&#19968;&#20010;&#31867;&#25512;&#26029;&#30340;&#20505;&#36873;&#23545;&#35937;&#12290;
&#20854;&#27425;&#65292;&#25105;&#20204;&#19981;&#29992; <code class="docutils literal notranslate"><span class="pre">def</span></code> &#26469;&#23450;&#20041;&#29305;&#23450;&#23454;&#20363;&#65292;&#32780;&#26159;&#20351;&#29992;&#20851;&#38190;&#23383; <code class="docutils literal notranslate"><span class="pre">instance</span></code> &#26469;&#32473;Lean&#27880;&#20876;&#29305;&#23450;&#23454;&#20363;&#12290;&#19982;&#31867;&#21464;&#37327;&#30340;&#21517;&#31216;&#19968;&#26679;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#35753;&#23454;&#20363;&#23450;&#20041;&#30340;&#21517;&#31216;&#20445;&#25345;&#21311;&#21517;&#65292;&#22240;&#20026;&#36890;&#24120;&#25105;&#20204;&#24076;&#26395; Lean &#33021;&#22815;&#25214;&#21040;&#23427;&#24182;&#21152;&#20197;&#21033;&#29992;&#65292;&#32780;&#19981;&#24517;&#35753;&#25105;&#20204;&#25805;&#24515;&#20854;&#20013;&#30340;&#32454;&#33410;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">Group&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">inv</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="o">(</span><span class="n">mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">(</span><span class="n">mul</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="o">)</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span>
<span class="w">  </span><span class="n">inv_mul_cancel</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">mul</span><span class="w"> </span><span class="o">(</span><span class="n">inv</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">one</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Group&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.trans</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">f</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.refl</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="n">inv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.symm</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">Equiv.trans_assoc</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.trans_refl</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.refl_trans</span>
<span class="w">  </span><span class="n">inv_mul_cancel</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Equiv.self_trans_symm</span>
</pre></div>
</div>
<p>&#20197;&#19979;&#35828;&#26126;&#20102;&#23427;&#20204;&#30340;&#29992;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="k">#check</span><span class="w"> </span><span class="n">Group&#8322;.mul</span>

<span class="w"> </span><span class="kd">def</span><span class="w"> </span><span class="n">mySquare</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">   </span><span class="n">Group&#8322;.mul</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">x</span>

<span class="w"> </span><span class="k">#check</span><span class="w"> </span><span class="n">mySquare</span>

<span class="w"> </span><span class="kn">section</span>
<span class="w"> </span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Group&#8322;.mul</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">g.trans</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">   </span><span class="n">rfl</span>

<span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">mySquare</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f.trans</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:=</span>
<span class="w">   </span><span class="n">rfl</span>

<span class="w"> </span><span class="kd">end</span>

<span class="bp">``</span><span class="k">#check</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#21629;&#20196;&#26174;&#31034;&#65292;</span><span class="w"> </span><span class="ss">``Group&#8322;.mul</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26377;&#19968;&#20010;&#38544;&#24335;&#21442;&#25968;</span><span class="w"> </span><span class="bp">``</span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#65292;&#25105;&#20204;&#26399;&#26395;&#23427;&#36890;&#36807;&#31867;&#25512;&#26029;&#25214;&#21040;&#65292;&#20854;&#20013;</span><span class="w"> </span><span class="ss">``&#945;</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26159;</span><span class="w"> </span><span class="ss">``Group&#8322;.mul</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#21442;&#25968;&#30340;&#31867;&#22411;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;</span><span class="w"> </span><span class="bp">``</span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#65306;</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26159;&#32676;&#20803;&#32032;&#31867;&#22411;&#30340;&#38544;&#24335;&#21442;&#25968;&#65292;&#32780;</span><span class="w"> </span><span class="bp">``</span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26159;</span><span class="w"> </span><span class="ss">``&#945;</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#19978;&#30340;&#32676;&#32467;&#26500;&#30340;&#38544;&#24335;&#21442;&#25968;&#12290;&#21516;&#26679;&#22320;&#65292;&#24403;&#25105;&#20204;&#20026;</span><span class="w"> </span><span class="ss">``Group&#8322;</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#23450;&#20041;&#19968;&#20010;&#36890;&#29992;&#30340;&#24179;&#26041;&#20989;&#25968;</span><span class="w"> </span><span class="ss">``my_square</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26102;&#65292;&#25105;&#20204;&#20351;&#29992;&#38544;&#24335;&#21442;&#25968;</span><span class="w"> </span><span class="bp">``</span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#65306;</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26469;&#34920;&#31034;&#20803;&#32032;&#30340;&#31867;&#22411;&#65292;&#20351;&#29992;&#38544;&#24335;&#21442;&#25968;</span><span class="w"> </span><span class="bp">``</span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#26469;&#34920;&#31034;</span><span class="w"> </span><span class="ss">``&#945;</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#19978;&#30340;</span><span class="w"> </span><span class="ss">``Group&#8322;</span><span class="bp">``</span><span class="w"> </span><span class="bp">&#32467;&#26500;&#12290;</span>
</pre></div>
</div>
<p>&#22312;&#31532;&#19968;&#20010;&#31034;&#20363;&#20013;&#65292;&#24403;&#25105;&#20204;&#32534;&#20889; <code class="docutils literal notranslate"><span class="pre">Group&#8322;.mul</span> <span class="pre">f</span> <span class="pre">g</span></code> &#26102;&#65292;f &#21644; g &#30340;&#31867;&#22411;&#21578;&#35785; Lean &#22312; <code class="docutils literal notranslate"><span class="pre">Group&#8322;.mul</span></code> &#30340;&#21442;&#25968; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20013;&#24517;&#39035;&#23454;&#20363;&#21270;&#20026; <code class="docutils literal notranslate"><span class="pre">Equiv.Perm</span> <span class="pre">&#946;</span></code> &#12290;&#36825;&#24847;&#21619;&#30528; Lean &#24517;&#39035;&#25214;&#21040; <code class="docutils literal notranslate"><span class="pre">Group&#8322;</span> <span class="pre">(Equiv.Perm</span> <span class="pre">&#946;)</span></code> &#20013;&#30340;&#19968;&#20010;&#20803;&#32032;&#12290;&#21069;&#38754;&#30340; <code class="docutils literal notranslate"><span class="pre">instance</span></code> &#22768;&#26126;&#30830;&#20999;&#22320;&#21578;&#35785; Lean &#22914;&#20309;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;&#38382;&#39064;&#35299;&#20915;&#20102;&#65281;</p>
<p>&#36825;&#31181;&#29992;&#20110;&#27880;&#20876;&#20449;&#24687;&#20197;&#20415; Lean &#22312;&#38656;&#35201;&#26102;&#33021;&#22815;&#25214;&#21040;&#23427;&#30340;&#31616;&#21333;&#26426;&#21046;&#38750;&#24120;&#26377;&#29992;&#12290;
&#36825;&#37324;&#26377;&#19968;&#20010;&#20363;&#23376;&#12290;
&#22312; Lean &#30340;&#22522;&#30784;&#20013;&#65292;&#25968;&#25454;&#31867;&#22411;&#8220;&#945;&#8221;&#21487;&#33021;&#26159;&#31354;&#30340;&#12290;
&#28982;&#32780;&#65292;&#22312;&#35768;&#22810;&#24212;&#29992;&#20013;&#65292;&#30693;&#36947;&#19968;&#20010;&#31867;&#22411;&#33267;&#23569;&#26377;&#19968;&#20010;&#20803;&#32032;&#26159;&#26377;&#29992;&#30340;&#12290;
&#20363;&#22914;&#65292;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">List.headI</span></code> &#65292;&#23427;&#36820;&#22238;&#21015;&#34920;&#30340;&#31532;&#19968;&#20010;&#20803;&#32032;&#65292;&#21487;&#20197;&#22312;&#21015;&#34920;&#20026;&#31354;&#26102;&#36820;&#22238;&#40664;&#35748;&#20540;&#12290;
&#20026;&#20102;&#23454;&#29616;&#36825;&#19968;&#28857;&#65292;Lean &#24211;&#23450;&#20041;&#20102;&#19968;&#20010;&#31867; <code class="docutils literal notranslate"><span class="pre">Inhabited</span> <span class="pre">&#945;</span></code> &#65292;&#23427;&#25152;&#20570;&#30340;&#21482;&#26159;&#23384;&#20648;&#19968;&#20010;&#40664;&#35748;&#20540;&#12290;
&#25105;&#20204;&#21487;&#20197;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#31867;&#22411;&#26159;&#20854;&#19968;&#20010;&#23454;&#20363;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Inhabited</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">&#10217;</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">default</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">([]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span><span class="bp">.</span><span class="n">headI</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#31867;&#25512;&#26029;&#26426;&#21046;&#20063;&#29992;&#20110;&#27867;&#22411;&#34920;&#31034;&#27861;&#12290;
&#34920;&#36798;&#24335; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">Add.add</span> <span class="pre">x</span> <span class="pre">y</span></code> &#30340;&#32553;&#20889;&#65292;&#20320;&#29468;&#23545;&#20102;&#8212;&#8212;&#8212;&#8212;&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">&#945;</span></code> &#26159;&#19968;&#20010;&#23384;&#20648; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#19978;&#20108;&#20803;&#20989;&#25968;&#30340;&#31867;&#12290;
&#20070;&#20889; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code> &#20250;&#21578;&#35785; Lean &#26597;&#25214;&#24050;&#27880;&#20876;&#30340; <code class="docutils literal notranslate"><span class="pre">[Add.add</span> <span class="pre">&#945;]</span></code> &#23454;&#20363;&#24182;&#20351;&#29992;&#30456;&#24212;&#30340;&#20989;&#25968;&#12290;
&#19979;&#38754;&#65292;&#25105;&#20204;&#20026; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#27880;&#20876;&#21152;&#27861;&#20989;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Point.add</span>

<span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Point</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">Point.add</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#36890;&#36807;&#36825;&#31181;&#26041;&#24335;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#23558;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#29992;&#20110;&#20854;&#20182;&#31867;&#22411;&#30340;&#20108;&#20803;&#36816;&#31639;&#12290;
&#20294;&#25105;&#20204;&#36824;&#33021;&#20570;&#24471;&#26356;&#22909;&#12290;&#25105;&#20204;&#24050;&#32463;&#30475;&#21040;&#65292; <code class="docutils literal notranslate"><span class="pre">*</span></code> &#21487;&#20197;&#29992;&#20110;&#20219;&#20309;&#32676;&#65292; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#21487;&#20197;&#29992;&#20110;&#20219;&#20309;&#21152;&#27861;&#32676;&#65292;&#32780;&#20004;&#32773;&#37117;&#21487;&#20197;&#29992;&#20110;&#20219;&#20309;&#29615;&#12290;
&#24403;&#25105;&#20204;&#22312; Lean &#20013;&#23450;&#20041;&#19968;&#20010;&#26032;&#30340;&#29615;&#23454;&#20363;&#26102;&#65292;&#25105;&#20204;&#19981;&#24517;&#20026;&#35813;&#23454;&#20363;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">*</span></code> &#65292;&#22240;&#20026; Lean &#30693;&#36947;&#36825;&#20123;&#36816;&#31639;&#31526;&#23545;&#20110;&#27599;&#20010;&#29615;&#37117;&#26159;&#24050;&#23450;&#20041;&#30340;&#12290;
&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#36825;&#31181;&#26041;&#27861;&#20026;&#25105;&#20204;&#30340; <cite>Group&#8322;</cite> &#31867;&#25351;&#23450;&#31526;&#21495;&#34920;&#31034;&#27861;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="n">hasMulGroup&#8322;</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Mul</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">Group&#8322;.mul</span><span class="o">&#10217;</span>

<span class="kd">instance</span><span class="w"> </span><span class="n">hasOneGroup&#8322;</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">One</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">Group&#8322;.one</span><span class="o">&#10217;</span>

<span class="kd">instance</span><span class="w"> </span><span class="n">hasInvGroup&#8322;</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Group&#8322;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Inv</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">Group&#8322;.inv</span><span class="o">&#10217;</span>

<span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Equiv.Perm</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="bp">&#8315;&#185;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">g</span><span class="bp">&#8315;&#185;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">g.symm.trans</span><span class="w"> </span><span class="o">((</span><span class="n">Equiv.refl</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#24517;&#39035;&#20026;&#23454;&#20363;&#25552;&#20379;&#21517;&#31216;&#65292;&#22240;&#20026;Lean &#24456;&#38590;&#24819;&#20986;&#22909;&#30340;&#40664;&#35748;&#20540;&#12290;
&#20351;&#36825;&#31181;&#26041;&#27861;&#22863;&#25928;&#30340;&#26159; Lean &#36827;&#34892;&#36882;&#24402;&#25628;&#32034;&#30340;&#33021;&#21147;&#12290;
&#26681;&#25454;&#25105;&#20204;&#22768;&#26126;&#30340;&#23454;&#20363;&#65292;Lean &#21487;&#20197;&#36890;&#36807;&#25214;&#21040; <code class="docutils literal notranslate"><span class="pre">Group&#8322;</span> <span class="pre">(Equiv.Perm</span> <span class="pre">&#945;)</span></code> &#30340;&#23454;&#20363;&#26469;&#25214;&#21040; <code class="docutils literal notranslate"><span class="pre">Mul</span> <span class="pre">(Equiv.Perm</span> <span class="pre">&#945;)</span></code> &#30340;&#23454;&#20363;&#65292;&#32780;&#23427;&#33021;&#22815;&#25214;&#21040; <code class="docutils literal notranslate"><span class="pre">Group&#8322;</span> <span class="pre">(Equiv.Perm</span> <span class="pre">&#945;)</span></code> &#30340;&#23454;&#20363;&#26159;&#22240;&#20026;&#25105;&#20204;&#24050;&#32463;&#25552;&#20379;&#20102;&#19968;&#20010;&#12290;
Lean &#33021;&#22815;&#25214;&#21040;&#36825;&#20004;&#20010;&#20107;&#23454;&#24182;&#23558;&#23427;&#20204;&#20018;&#32852;&#36215;&#26469;&#12290;</p>
<p>&#25105;&#20204;&#21018;&#21018;&#32473;&#20986;&#30340;&#20363;&#23376;&#26159;&#21361;&#38505;&#30340;&#65292;&#22240;&#20026; Lean &#30340;&#24211;&#20013;&#20063;&#26377;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">Group</span> <span class="pre">(Equiv.Perm</span> <span class="pre">&#945;)</span></code> &#30340;&#23454;&#20363;&#65292;&#24182;&#19988;&#20056;&#27861;&#22312;&#20219;&#20309;&#32676;&#19978;&#37117;&#26377;&#23450;&#20041;&#12290;&#25152;&#20197;&#65292;&#25214;&#21040;&#30340;&#26159;&#21738;&#20010;&#23454;&#20363;&#26159;&#19981;&#26126;&#30830;&#30340;&#12290;&#23454;&#38469;&#19978;&#65292;&#38500;&#38750;&#24744;&#26126;&#30830;&#25351;&#23450;&#19981;&#21516;&#30340;&#20248;&#20808;&#32423;&#65292;&#21542;&#21017; Lean &#20250;&#20542;&#21521;&#20110;&#26356;&#36817;&#30340;&#22768;&#26126;&#12290;&#27492;&#22806;&#65292;&#36824;&#26377;&#21478;&#19968;&#31181;&#26041;&#27861;&#21487;&#20197;&#21578;&#35785; Lean &#19968;&#20010;&#32467;&#26500;&#26159;&#21478;&#19968;&#20010;&#32467;&#26500;&#30340;&#23454;&#20363;&#65292;&#21363;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">extends</span></code> &#20851;&#38190;&#23383;&#12290;&#36825;&#23601;&#26159; Mathlib &#25351;&#23450;&#20363;&#22914;&#27599;&#20010;&#20132;&#25442;&#29615;&#37117;&#26159;&#29615;&#30340;&#26041;&#24335;&#12290;
&#24744;&#21487;&#20197;&#22312; <a class="reference internal" href="C07_Hierarchies.html#hierarchies"><span class="std std-numref">Section 7</span></a> &#20197;&#21450; <em>Theorem Proving in Lean</em> &#20013;&#30340; <a class="reference external" href="https://leanprover.github.io/theorem_proving_in_lean4/type_classes.html#managing-type-class-inference">&#20851;&#20110;&#31867;&#25512;&#26029;&#30340;&#31456;&#33410;</a> &#20013;&#25214;&#21040;&#26356;&#22810;&#20449;&#24687;&#12290;</p>
<p>&#19968;&#33324;&#26469;&#35828;&#65292;&#23545;&#20110;&#24050;&#32463;&#23450;&#20041;&#20102;&#35760;&#21495;&#30340;&#20195;&#25968;&#32467;&#26500;&#30340;&#23454;&#20363;&#65292;&#25351;&#23450;&#20540;&#20026; <code class="docutils literal notranslate"><span class="pre">*</span></code> &#26159;&#19968;&#20010;&#19981;&#22909;&#30340;&#20027;&#24847;&#12290;
&#22312; Lean &#20013;&#37325;&#26032;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">Group</span></code> &#30340;&#27010;&#24565;&#26159;&#19968;&#20010;&#20154;&#20026;&#30340;&#20363;&#23376;&#12290;
&#28982;&#32780;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#32676;&#35760;&#21495;&#30340;&#20004;&#31181;&#35299;&#37322;&#37117;&#20197;&#30456;&#21516;&#30340;&#26041;&#24335;&#23637;&#24320;&#20026; <code class="docutils literal notranslate"><span class="pre">Equiv.trans</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">Equiv.refl</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Equiv.symm</span></code> &#12290;</p>
<p>&#20316;&#20026;&#19968;&#39033;&#31867;&#20284;&#30340;&#26500;&#36896;&#24615;&#32451;&#20064;&#65292;&#20223;&#29031; <code class="docutils literal notranslate"><span class="pre">Group&#8322;</span></code> &#23450;&#20041;&#19968;&#20010;&#21517;&#20026; <code class="docutils literal notranslate"><span class="pre">AddGroup&#8322;</span></code> &#30340;&#31867;&#12290;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Add</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">Neg</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Zero</span></code> &#31867;&#20026;&#20219;&#20309; <code class="docutils literal notranslate"><span class="pre">AddGroup&#8322;</span></code> &#23450;&#20041;&#21152;&#27861;&#12289;&#21462;&#21453;&#21644;&#38646;&#30340;&#24120;&#35268;&#34920;&#31034;&#27861;&#12290;&#28982;&#21518;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">AddGroup&#8322;</span></code> &#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#23581;&#35797;&#19968;&#19979;&#24182;&#30830;&#20445;&#21152;&#27861;&#32676;&#30340;&#34920;&#31034;&#27861;&#23545; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#30340;&#20803;&#32032;&#26377;&#25928;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span><span class="w"> </span><span class="n">AddGroup&#8322;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">add</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="c1">-- &#35831;&#23558;&#21097;&#20313;&#37096;&#20998;&#22635;&#20889;&#23436;&#25972;</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#19978;&#38754;&#24050;&#32463;&#20026; <code class="docutils literal notranslate"><span class="pre">Point</span></code> &#22768;&#26126;&#20102;&#23454;&#20363; <code class="docutils literal notranslate"><span class="pre">Add</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">Neg</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Zero</span></code> &#65292;&#36825;&#24182;&#19981;&#26159;&#20160;&#20040;&#22823;&#38382;&#39064;&#12290;&#20877;&#27425;&#24378;&#35843;&#65292;&#36825;&#20004;&#31181;&#31526;&#21495;&#21512;&#25104;&#26041;&#24335;&#24212;&#35813;&#24471;&#20986;&#30456;&#21516;&#30340;&#31572;&#26696;&#12290;
&#31867;&#25512;&#26029;&#26159;&#24494;&#22937;&#30340;&#65292;&#22312;&#20351;&#29992;&#26102;&#24517;&#39035;&#23567;&#24515;&#35880;&#24910;&#65292;&#22240;&#20026;&#23427;&#37197;&#32622;&#20102;&#26080;&#24418;&#20013;&#25511;&#21046;&#25105;&#20204;&#25152;&#36755;&#20837;&#34920;&#36798;&#24335;&#35299;&#37322;&#30340;&#33258;&#21160;&#21270;&#26426;&#21046;&#12290;&#28982;&#32780;&#65292;&#22914;&#26524;&#26126;&#26234;&#22320;&#20351;&#29992;&#65292;&#31867;&#25512;&#26029;&#21017;&#26159;&#19968;&#20010;&#24378;&#22823;&#30340;&#24037;&#20855;&#12290;&#27491;&#26159;&#23427;&#20351;&#24471;&#22312; Lean &#20013;&#36827;&#34892;&#20195;&#25968;&#25512;&#29702;&#25104;&#20026;&#21487;&#33021;&#12290;</p>
</section>
<section id="section-building-the-gaussian-integers">
<span id="id5"></span><h2><span class="section-number">6.3. </span>&#26500;&#24314;&#39640;&#26031;&#25972;&#25968;<a class="headerlink" href="#section-building-the-gaussian-integers" title="Link to this heading">&#61633;</a></h2>
<p>&#29616;&#22312;&#25105;&#20204;&#23558;&#36890;&#36807;&#26500;&#24314;&#19968;&#20010;&#37325;&#35201;&#30340;&#25968;&#23398;&#23545;&#35937;&#8212;&#8212; <strong>&#39640;&#26031;&#25972;&#25968;</strong> &#65292;&#26469;&#35828;&#26126;&#22312; Lean &#20013;&#20195;&#25968;&#23618;&#27425;&#32467;&#26500;&#30340;&#20351;&#29992;&#65292;&#24182;&#35777;&#26126;&#23427;&#26159;&#27431;&#20960;&#37324;&#24471;&#22495;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#25353;&#29031;&#25105;&#20204;&#19968;&#30452;&#22312;&#20351;&#29992;&#30340;&#26415;&#35821;&#65292;&#25105;&#20204;&#23558;&#23450;&#20041;&#39640;&#26031;&#25972;&#25968;&#65292;&#24182;&#35777;&#26126;&#23427;&#20204;&#26159;&#27431;&#20960;&#37324;&#24471;&#22495;&#32467;&#26500;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;</p>
<p>&#22312;&#26222;&#36890;&#30340;&#25968;&#23398;&#26415;&#35821;&#20013;&#65292;&#39640;&#26031;&#25972;&#25968;&#38598; <span class="math notranslate nohighlight">\(\Bbb{Z}[i]\)</span> &#26159;&#22797;&#25968;&#38598; <span class="math notranslate nohighlight">\(\{ a + b i \mid a, b \in \Bbb{Z}\}\)</span>&#12290;&#20294;&#25105;&#20204;&#30340;&#30446;&#26631;&#19981;&#26159;&#23558;&#20854;&#23450;&#20041;&#20026;&#22797;&#25968;&#38598;&#30340;&#19968;&#20010;&#23376;&#38598;&#65292;&#32780;&#26159;&#23558;&#20854;&#23450;&#20041;&#20026;&#19968;&#31181;&#29420;&#31435;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;&#20026;&#27492;&#65292;&#25105;&#20204;&#23558;&#39640;&#26031;&#25972;&#25968;&#34920;&#31034;&#20026;&#19968;&#23545;&#25972;&#25968;&#65292;&#20998;&#21035;&#35270;&#20026;&#20854; <strong>&#23454;&#37096;</strong> &#21644; <strong>&#34394;&#37096;</strong> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">ext</span><span class="kd">]</span>
<span class="kd">structure</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">re</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span>
<span class="w">  </span><span class="n">im</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#39318;&#20808;&#35777;&#26126;&#39640;&#26031;&#25972;&#25968;&#20855;&#26377;&#29615;&#30340;&#32467;&#26500;&#65292;&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">0</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">&#10216;0,</span> <span class="pre">0&#10217;</span></code> &#65292; <code class="docutils literal notranslate"><span class="pre">1</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">&#10216;1,</span> <span class="pre">0&#10217;</span></code> &#65292;&#21152;&#27861;&#25353;&#28857;&#23450;&#20041;&#12290;&#20026;&#20102;&#30830;&#23450;&#20056;&#27861;&#30340;&#23450;&#20041;&#65292;&#35760;&#20303;&#25105;&#20204;&#24076;&#26395;&#30001; <code class="docutils literal notranslate"><span class="pre">&#10216;0,</span> <span class="pre">1&#10217;</span></code> &#34920;&#31034;&#30340;&#20803;&#32032; <span class="math notranslate nohighlight">\(i\)</span> &#26159; <span class="math notranslate nohighlight">\(-1\)</span> &#30340;&#24179;&#26041;&#26681;&#12290;&#22240;&#27492;&#65292;&#25105;&#20204;&#24076;&#26395;</p>
<div class="math notranslate nohighlight">
\[\begin{split}(a + bi) (c + di) &amp; = ac + bci + adi + bd i^2 \\
  &amp; = (ac - bd) + (bc + ad)i.\end{split}\]</div>
<p>&#36825;&#35299;&#37322;&#20102;&#19979;&#38754;&#23545; <code class="docutils literal notranslate"><span class="pre">Mul</span></code> &#30340;&#23450;&#20041;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Zero</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;&#10216;</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">&#10217;&#10217;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">One</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;&#10216;</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">&#10217;&#10217;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x.re</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y.re</span><span class="o">,</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y.im</span><span class="o">&#10217;&#10217;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Neg</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="bp">-</span><span class="n">x.re</span><span class="o">,</span><span class="w"> </span><span class="bp">-</span><span class="n">x.im</span><span class="o">&#10217;&#10217;</span>

<span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Mul</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="o">,</span><span class="w"> </span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="o">&#10217;&#10217;</span>
</pre></div>
</div>
<p>&#27491;&#22914;&#22312; <a class="reference internal" href="#section-structures"><span class="std std-numref">Section 6.1</span></a> &#20013;&#25152;&#25552;&#21040;&#30340;&#65292;&#23558;&#19982;&#26576;&#31181;&#25968;&#25454;&#31867;&#22411;&#30456;&#20851;&#30340;&#25152;&#26377;&#23450;&#20041;&#25918;&#22312;&#21516;&#21517;&#30340;&#21629;&#21517;&#31354;&#38388;&#20013;&#26159;&#20010;&#22909;&#20027;&#24847;&#12290;&#22240;&#27492;&#65292;&#22312;&#19982;&#26412;&#31456;&#30456;&#20851;&#30340; Lean &#25991;&#20214;&#20013;&#65292;&#36825;&#20123;&#23450;&#20041;&#26159;&#22312; <code class="docutils literal notranslate"><span class="pre">GaussInt</span></code> &#21629;&#21517;&#31354;&#38388;&#20013;&#36827;&#34892;&#30340;&#12290;
&#35831;&#27880;&#24847;&#65292;&#36825;&#37324;&#25105;&#20204;&#30452;&#25509;&#23450;&#20041;&#20102;&#31526;&#21495; <code class="docutils literal notranslate"><span class="pre">0</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">1</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">+</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">-</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">*</span></code> &#30340;&#35299;&#37322;&#65292;&#32780;&#19981;&#26159;&#23558;&#23427;&#20204;&#21629;&#21517;&#20026; <code class="docutils literal notranslate"><span class="pre">GaussInt.zero</span></code> &#20043;&#31867;&#30340;&#21517;&#31216;&#24182;&#23558;&#20854;&#20998;&#37197;&#32473;&#36825;&#20123;&#21517;&#31216;&#12290;&#36890;&#24120;&#65292;&#20026;&#23450;&#20041;&#25552;&#20379;&#19968;&#20010;&#26126;&#30830;&#30340;&#21517;&#31216;&#24456;&#26377;&#29992;&#65292;&#20363;&#22914;&#65292;&#29992;&#20110;&#19982; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">rewrite</span></code> &#19968;&#36215;&#20351;&#29992;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">zero_def</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">one_def</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">add_def</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x.re</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y.re</span><span class="o">,</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y.im</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">neg_def</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">-</span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="bp">-</span><span class="n">x.re</span><span class="o">,</span><span class="w"> </span><span class="bp">-</span><span class="n">x.im</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">mul_def</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="o">,</span><span class="w"> </span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="o">&#10217;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#23545;&#35745;&#31639;&#23454;&#37096;&#21644;&#34394;&#37096;&#30340;&#35268;&#21017;&#36827;&#34892;&#21629;&#21517;&#65292;&#24182;&#23558;&#20854;&#22768;&#26126;&#32473;&#31616;&#21270;&#22120;&#65292;&#36825;&#20063;&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">zero_re</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">zero_im</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">one_re</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">one_im</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">add_re</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x.re</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y.re</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">add_im</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y.im</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">neg_re</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">-</span><span class="n">x.re</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">neg_im</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">-</span><span class="n">x.im</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">mul_re</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">mul_im</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#20196;&#20154;&#24778;&#35766;&#22320;&#23481;&#26131;&#35777;&#26126;&#39640;&#26031;&#25972;&#25968;&#26159;&#20132;&#25442;&#29615;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#25105;&#20204;&#27491;&#22312;&#24456;&#22909;&#22320;&#21033;&#29992;&#32467;&#26500;&#27010;&#24565;&#12290;&#27599;&#20010;&#29305;&#23450;&#30340;&#39640;&#26031;&#25972;&#25968;&#37117;&#26159; <code class="docutils literal notranslate"><span class="pre">GaussInt</span></code> &#32467;&#26500;&#30340;&#19968;&#20010;&#23454;&#20363;&#65292;&#32780; <code class="docutils literal notranslate"><span class="pre">GaussInt</span></code> &#31867;&#22411;&#26412;&#36523;&#65292;&#36830;&#21516;&#30456;&#20851;&#25805;&#20316;&#65292;&#21017;&#26159; <code class="docutils literal notranslate"><span class="pre">CommRing</span></code> &#32467;&#26500;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290; <code class="docutils literal notranslate"><span class="pre">CommRing</span></code> &#32467;&#26500;&#21453;&#36807;&#26469;&#21448;&#25193;&#23637;&#20102;&#31526;&#21495;&#32467;&#26500; <code class="docutils literal notranslate"><span class="pre">Zero</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">One</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">Add</span></code> &#12289; <code class="docutils literal notranslate"><span class="pre">Neg</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Mul</span></code> &#12290;</p>
<p>&#22914;&#26524;&#24744;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">instance</span> <span class="pre">:</span> <span class="pre">CommRing</span> <span class="pre">GaussInt</span> <span class="pre">:=</span> <span class="pre">_</span></code> &#65292;&#28857;&#20987; VS Code &#20013;&#20986;&#29616;&#30340;&#28783;&#27873;&#22270;&#26631;&#65292;&#28982;&#21518;&#35753; Lean &#33258;&#21160;&#22635;&#20805;&#32467;&#26500;&#23450;&#20041;&#30340;&#26694;&#26550;&#65292;&#24744;&#20250;&#30475;&#21040;&#22823;&#37327;&#30340;&#26465;&#30446;&#12290;&#28982;&#32780;&#65292;&#36339;&#36716;&#21040;&#32467;&#26500;&#30340;&#23450;&#20041;&#20250;&#21457;&#29616;&#65292;&#20854;&#20013;&#35768;&#22810;&#23383;&#27573;&#37117;&#26377;&#40664;&#35748;&#23450;&#20041;&#65292;Lean &#20250;&#33258;&#21160;&#20026;&#24744;&#22635;&#20805;&#12290;&#19979;&#38754;&#30340;&#23450;&#20041;&#20013;&#21015;&#20986;&#20102;&#20851;&#38190;&#30340;&#20960;&#20010;&#12290;</p>
<p>&#22914;&#26524;&#24744;&#36755;&#20837; <code class="docutils literal notranslate"><span class="pre">instance</span> <span class="pre">:</span> <span class="pre">CommRing</span> <span class="pre">GaussInt</span> <span class="pre">:=</span> <span class="pre">_</span></code> &#65292;&#28857;&#20987; VS Code &#20013;&#20986;&#29616;&#30340;&#28783;&#27873;&#22270;&#26631;&#65292;&#28982;&#21518;&#35753; Lean &#22635;&#20805;&#32467;&#26500;&#23450;&#20041;&#30340;&#39592;&#26550;&#65292;&#24744;&#20250;&#30475;&#21040;&#20196;&#20154;&#26395;&#32780;&#29983;&#30031;&#30340;&#26465;&#30446;&#25968;&#37327;&#12290;&#28982;&#32780;&#65292;&#36339;&#36716;&#21040;&#35813;&#32467;&#26500;&#30340;&#23450;&#20041;&#21518;&#20250;&#21457;&#29616;&#65292;&#35768;&#22810;&#23383;&#27573;&#37117;&#26377;&#40664;&#35748;&#23450;&#20041;&#65292;Lean &#20250;&#33258;&#21160;&#20026;&#24744;&#22635;&#20805;&#12290;&#20197;&#19979;&#23450;&#20041;&#20013;&#23637;&#31034;&#30340;&#26159;&#20854;&#20013;&#20851;&#38190;&#30340;&#37096;&#20998;&#12290; <code class="docutils literal notranslate"><span class="pre">nsmul</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">zsmul</span></code> &#26159;&#19968;&#20010;&#29305;&#27530;&#24773;&#20917;&#65292;&#26242;&#26102;&#21487;&#20197;&#24573;&#30053;&#65292;&#23427;&#20204;&#23558;&#22312;&#19979;&#19968;&#31456;&#20013;&#35299;&#37322;&#12290;&#22312;&#27599;&#31181;&#24773;&#20917;&#19979;&#65292;&#30456;&#20851;&#30340;&#24658;&#31561;&#24335;&#37117;&#26159;&#36890;&#36807;&#23637;&#24320;&#23450;&#20041;&#12289;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">ext</span></code> &#31574;&#30053;&#23558;&#24658;&#31561;&#24335;&#31616;&#21270;&#20026;&#20854;&#23454;&#37096;&#21644;&#34394;&#37096;&#12289;&#36827;&#34892;&#31616;&#21270;&#65292;&#24182;&#22312;&#24517;&#35201;&#26102;&#22312;&#25972;&#25968;&#20013;&#25191;&#34892;&#30456;&#20851;&#30340;&#29615;&#35745;&#31639;&#26469;&#35777;&#26126;&#30340;&#12290;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#25105;&#20204;&#26412;&#21487;&#20197;&#36731;&#26494;&#36991;&#20813;&#37325;&#22797;&#25152;&#26377;&#36825;&#20123;&#20195;&#30721;&#65292;&#20294;&#36825;&#24182;&#19981;&#26159;&#24403;&#21069;&#35752;&#35770;&#30340;&#20027;&#39064;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="n">instCommRing</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">CommRing</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="n">zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="n">one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">  </span><span class="n">neg</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">-</span><span class="n">x</span>
<span class="w">  </span><span class="n">mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">  </span><span class="n">nsmul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">nsmulRec</span>
<span class="w">  </span><span class="n">zsmul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">zsmulRec</span>
<span class="w">  </span><span class="n">add_assoc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="n">zero_add</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">add_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">neg_add_cancel</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">add_comm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="n">mul_assoc</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="n">one_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">mul_one</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intro</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">left_distrib</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="n">right_distrib</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="n">mul_comm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="n">zero_mul</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">mul_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">intros</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
</pre></div>
</div>
<p>Lean &#30340;&#24211;&#23558;&#20855;&#26377;&#33267;&#23569;&#20004;&#20010;&#19981;&#21516;&#20803;&#32032;&#30340;&#31867;&#22411;&#23450;&#20041;&#20026; <strong>&#38750;&#24179;&#20961;</strong> &#31867;&#22411;&#12290;&#22312;&#29615;&#30340;&#19978;&#19979;&#25991;&#20013;&#65292;&#36825;&#31561;&#21516;&#20110;&#35828;&#38646;&#19981;&#31561;&#20110;&#19968;&#12290;&#30001;&#20110;&#19968;&#20123;&#24120;&#35265;&#30340;&#23450;&#29702;&#20381;&#36182;&#20110;&#36825;&#19968;&#20107;&#23454;&#65292;&#25105;&#20204;&#19981;&#22952;&#29616;&#22312;&#23601;&#35777;&#26126;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nontrivial</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">use</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">Ne</span><span class="o">,</span><span class="w"> </span><span class="n">GaussInt.ext_iff</span><span class="o">]</span>
<span class="w">  </span><span class="n">simp</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#29616;&#22312;&#23558;&#35777;&#26126;&#39640;&#26031;&#25972;&#25968;&#20855;&#26377;&#19968;&#20010;&#37325;&#35201;&#30340;&#39069;&#22806;&#24615;&#36136;&#12290;&#19968;&#20010; <strong>&#27431;&#20960;&#37324;&#24471;&#25972;&#29615;&#65288;Euclidean domain&#65289;</strong> &#26159;&#19968;&#20010;&#29615; <span class="math notranslate nohighlight">\(R\)</span>&#65292;&#37197;&#22791;&#20102;&#19968;&#20010;&#33539;&#25968;&#20989;&#25968; <span class="math notranslate nohighlight">\(N : R \to \mathbb{N}\)</span>&#65292;&#28385;&#36275;&#20197;&#19979;&#20004;&#20010;&#24615;&#36136;&#65306;</p>
<p>-&#23545;&#20110; <span class="math notranslate nohighlight">\(R\)</span> &#20013;&#30340;&#20219;&#24847; <span class="math notranslate nohighlight">\(a\)</span> &#21644;&#38750;&#38646; <span class="math notranslate nohighlight">\(b\)</span>&#65292;&#23384;&#22312; <span class="math notranslate nohighlight">\(R\)</span> &#20013;&#30340; <span class="math notranslate nohighlight">\(q\)</span> &#21644; <span class="math notranslate nohighlight">\(r\)</span>&#65292;&#20351;&#24471; <span class="math notranslate nohighlight">\(a = bq + r\)</span>&#65292;&#24182;&#19988;&#35201;&#20040; <span class="math notranslate nohighlight">\(r = 0\)</span>&#65292;&#35201;&#20040; <span class="math notranslate nohighlight">\(N(r) &lt; N(b)\)</span>&#12290;
-&#23545;&#20110;&#20219;&#24847; <span class="math notranslate nohighlight">\(a\)</span> &#21644;&#38750;&#38646; <span class="math notranslate nohighlight">\(b\)</span>&#65292;<span class="math notranslate nohighlight">\(N(a) \le N(ab)\)</span>&#12290;
&#25972;&#25968;&#29615; <span class="math notranslate nohighlight">\(\Bbb{Z}\)</span> &#19982;&#33539;&#25968; <span class="math notranslate nohighlight">\(N(a) = |a|\)</span> &#26159;&#27431;&#20960;&#37324;&#24471;&#25972;&#29615;&#30340;&#19968;&#20010;&#20856;&#22411;&#20363;&#23376;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21487;&#20197;&#23558; <span class="math notranslate nohighlight">\(q\)</span> &#21462;&#20026; <span class="math notranslate nohighlight">\(a\)</span> &#38500;&#20197; <span class="math notranslate nohighlight">\(b\)</span> &#30340;&#25972;&#25968;&#38500;&#27861;&#32467;&#26524;&#65292;&#24182;&#23558; <span class="math notranslate nohighlight">\(r\)</span> &#21462;&#20026;&#20313;&#25968;&#12290;&#36825;&#20123;&#20989;&#25968;&#22312; Lean &#20013;&#23450;&#20041;&#65292;&#24182;&#28385;&#36275;&#20197;&#19979;&#24615;&#36136;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Eq.symm</span><span class="w"> </span><span class="o">(</span><span class="n">Int.ediv_add_emod</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Int.emod_nonneg</span><span class="w"> </span><span class="n">a</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="bp">|</span><span class="n">b</span><span class="bp">|</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Int.emod_lt</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>&#22312;&#20219;&#24847;&#29615;&#20013;&#65292;&#33509;&#19968;&#20010;&#20803;&#32032; <span class="math notranslate nohighlight">\(a\)</span> &#33021;&#25972;&#38500; 1&#65292;&#21017;&#31216;&#20854;&#20026; <strong>&#21333;&#20301;&#20803;</strong> &#12290;&#33509;&#19968;&#20010;&#38750;&#38646;&#20803;&#32032; <span class="math notranslate nohighlight">\(a\)</span> &#19981;&#33021;&#20889;&#25104; <span class="math notranslate nohighlight">\(a = bc\)</span> &#30340;&#24418;&#24335;&#65292;&#20854;&#20013; <span class="math notranslate nohighlight">\(b\)</span> &#21644; <span class="math notranslate nohighlight">\(c\)</span> &#22343;&#19981;&#26159;&#21333;&#20301;&#20803;&#65292;&#21017;&#31216;&#20854;&#20026; <strong>&#19981;&#21487;&#32422;&#20803;</strong> &#12290;&#22312;&#25972;&#25968;&#29615;&#20013;&#65292;&#27599;&#20010;&#19981;&#21487;&#32422;&#20803; <span class="math notranslate nohighlight">\(a\)</span> &#37117;&#26159; <strong>&#32032;&#20803;</strong> &#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#27599;&#24403; <span class="math notranslate nohighlight">\(a\)</span> &#33021;&#25972;&#38500;&#20056;&#31215; <span class="math notranslate nohighlight">\(bc\)</span> &#26102;&#65292;&#23427;&#23601;&#33021;&#25972;&#38500; <span class="math notranslate nohighlight">\(b\)</span> &#25110; <span class="math notranslate nohighlight">\(c\)</span> &#12290;&#20294;&#26159;
&#22312;&#20854;&#20182;&#29615;&#20013;&#65292;&#36825;&#19968;&#24615;&#36136;&#21487;&#33021;&#20250;&#22833;&#25928;&#12290;&#22312;&#29615; <span class="math notranslate nohighlight">\(\Bbb{Z}[\sqrt{-5}]\)</span> &#20013;&#65292;&#25105;&#20204;&#26377;</p>
<div class="math notranslate nohighlight">
\[6 = 2 \cdot 3 = (1 + \sqrt{-5})(1 - \sqrt{-5}),\]</div>
<p>&#24182;&#19988;&#20803;&#32032; <span class="math notranslate nohighlight">\(2\)</span> &#12289; <span class="math notranslate nohighlight">\(3\)</span> &#12289; <span class="math notranslate nohighlight">\(1 + \sqrt{-5}\)</span> &#20197;&#21450; <span class="math notranslate nohighlight">\(1 - \sqrt{-5}\)</span> &#37117;&#26159;&#19981;&#21487;&#32422;&#30340;&#65292;&#20294;&#23427;&#20204;&#19981;&#26159;&#32032;&#20803;&#12290;&#20363;&#22914;&#65292; <span class="math notranslate nohighlight">\(2\)</span> &#33021;&#25972;&#38500;&#20056;&#31215; <span class="math notranslate nohighlight">\((1 + \sqrt{-5})(1 - \sqrt{-5})\)</span> &#65292;&#20294;&#23427;&#19981;&#33021;&#25972;&#38500;&#36825;&#20004;&#20010;&#22240;&#25968;&#20013;&#30340;&#20219;&#20309;&#19968;&#20010;&#12290;&#29305;&#21035;&#22320;&#65292;&#25105;&#20204;&#19981;&#20877;&#20855;&#26377;&#21807;&#19968;&#20998;&#35299;&#24615;&#65306;&#25968;&#23383; <span class="math notranslate nohighlight">\(6\)</span> &#21487;&#20197;&#29992;&#19981;&#27490;&#19968;&#31181;&#26041;&#24335;&#20998;&#35299;&#20026;&#19981;&#21487;&#32422;&#20803;&#32032;&#12290;</p>
<p>&#30456;&#27604;&#20043;&#19979;&#65292;&#27599;&#20010;&#27431;&#20960;&#37324;&#24471;&#22495;&#37117;&#26159;&#21807;&#19968;&#20998;&#35299;&#22495;&#65292;&#36825;&#24847;&#21619;&#30528;&#27599;&#20010;&#19981;&#21487;&#32422;&#20803;&#32032;&#37117;&#26159;&#32032;&#20803;&#12290;
&#27431;&#20960;&#37324;&#24471;&#22495;&#30340;&#20844;&#29702;&#24847;&#21619;&#30528;&#21487;&#20197;&#23558;&#20219;&#20309;&#38750;&#38646;&#20803;&#32032;&#34920;&#31034;&#20026;&#19981;&#21487;&#32422;&#20803;&#32032;&#30340;&#26377;&#38480;&#20056;&#31215;&#12290;&#23427;&#20204;&#36824;&#24847;&#21619;&#30528;&#21487;&#20197;&#20351;&#29992;&#27431;&#20960;&#37324;&#24471;&#31639;&#27861;&#25214;&#21040;&#20219;&#24847;&#20004;&#20010;&#38750;&#38646;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">b</span></code> &#30340;&#26368;&#22823;&#20844;&#32422;&#25968;&#65292;&#21363;&#33021;&#34987;&#20219;&#20309;&#20854;&#20182;&#20844;&#22240;&#25968;&#25972;&#38500;&#30340;&#20803;&#32032;&#12290;&#36825;&#21453;&#36807;&#26469;&#21448;&#24847;&#21619;&#30528;&#65292;&#38500;&#20102;&#20056;&#20197;&#21333;&#20301;&#20803;&#32032;&#22806;&#65292;&#20998;&#35299;&#20026;&#19981;&#21487;&#32422;&#20803;&#32032;&#26159;&#21807;&#19968;&#30340;&#12290;</p>
<p>&#25105;&#20204;&#29616;&#22312;&#35777;&#26126;&#39640;&#26031;&#25972;&#25968;&#26159;&#19968;&#20010;&#27431;&#20960;&#37324;&#24471;&#22495;&#65292;&#20854;&#33539;&#25968;&#23450;&#20041;&#20026; <span class="math notranslate nohighlight">\(N(a + bi) = (a + bi)(a - bi) = a^2 + b^2\)</span> &#12290;&#39640;&#26031;&#25972;&#25968; <span class="math notranslate nohighlight">\(a - bi\)</span> &#34987;&#31216;&#20026; <span class="math notranslate nohighlight">\(a + bi\)</span> &#30340;&#20849;&#36717;&#12290;&#19981;&#38590;&#39564;&#35777;&#65292;&#23545;&#20110;&#20219;&#20309;&#22797;&#25968; <span class="math notranslate nohighlight">\(x\)</span> &#21644; <span class="math notranslate nohighlight">\(y\)</span> &#65292;&#25105;&#20204;&#37117;&#26377; <span class="math notranslate nohighlight">\(N(xy) = N(x)N(y)\)</span> &#12290;</p>
<p>&#35201;&#35777;&#26126;&#36825;&#20010;&#33539;&#25968;&#30340;&#23450;&#20041;&#33021;&#20351;&#39640;&#26031;&#25972;&#25968;&#26500;&#25104;&#27431;&#20960;&#37324;&#24471;&#22495;&#65292;&#21482;&#26377;&#31532;&#19968;&#20010;&#24615;&#36136;&#20855;&#26377;&#25361;&#25112;&#24615;&#12290;&#20551;&#35774;&#25105;&#20204;&#24819;&#20889;&#25104; <span class="math notranslate nohighlight">\(a + bi = (c + di) q + r\)</span> &#30340;&#24418;&#24335;&#65292;&#20854;&#20013; <span class="math notranslate nohighlight">\(q\)</span> &#21644; <span class="math notranslate nohighlight">\(r\)</span> &#26159;&#21512;&#36866;&#30340;&#25968;&#12290;&#23558; <span class="math notranslate nohighlight">\(a + bi\)</span> &#21644; <span class="math notranslate nohighlight">\(c + di\)</span> &#35270;&#20026;&#22797;&#25968;&#65292;&#36827;&#34892;&#38500;&#27861;&#36816;&#31639;&#12290;</p>
<div class="math notranslate nohighlight">
\[\frac{a + bi}{c + di} = \frac{(a + bi)(c - di)}{(c + di)(c-di)} =
  \frac{ac + bd}{c^2 + d^2} + \frac{bc -ad}{c^2+d^2} i.\]</div>
<p>&#23454;&#37096;&#21644;&#34394;&#37096;&#21487;&#33021;&#19981;&#26159;&#25972;&#25968;&#65292;&#20294;&#25105;&#20204;&#21487;&#23558;&#20854;&#22235;&#33293;&#20116;&#20837;&#21040;&#26368;&#25509;&#36817;&#30340;&#25972;&#25968; <span class="math notranslate nohighlight">\(u\)</span> &#21644; <span class="math notranslate nohighlight">\(v\)</span> &#12290;&#28982;&#21518;&#25105;&#20204;&#21487;&#20197;&#23558;&#21491;&#36793;&#34920;&#31034;&#20026; <span class="math notranslate nohighlight">\((u + vi) + (u' + v'i)\)</span> &#65292;&#20854;&#20013; <span class="math notranslate nohighlight">\(u' + v'i\)</span> &#26159;&#21097;&#20313;&#30340;&#37096;&#20998;&#12290;&#35831;&#27880;&#24847;&#65292;&#25105;&#20204;&#26377; <span class="math notranslate nohighlight">\(|u'| \le 1/2\)</span> &#21644; <span class="math notranslate nohighlight">\(|v'| \le 1/2\)</span> &#65292;&#22240;&#27492;</p>
<div class="math notranslate nohighlight">
\[N(u' + v' i) = (u')^2 + (v')^2 \le 1/4 + 1/4 \le 1/2.\]</div>
<p>&#20056;&#20197; <span class="math notranslate nohighlight">\(c + di\)</span>&#65292;&#25105;&#20204;&#26377;</p>
<div class="math notranslate nohighlight">
\[a + bi = (c + di) (u + vi) + (c + di) (u' + v'i).\]</div>
<p>Setting <span class="math notranslate nohighlight">\(q = u + vi\)</span> and <span class="math notranslate nohighlight">\(r = (c + di) (u' + v'i)\)</span>, we have
<span class="math notranslate nohighlight">\(a + bi = (c + di) q + r\)</span>, and we only need to
bound <span class="math notranslate nohighlight">\(N(r)\)</span>:
&#35774; <span class="math notranslate nohighlight">\(q = u + vi\)</span> &#20197;&#21450; <span class="math notranslate nohighlight">\(r = (c + di) (u' + v'i)\)</span> &#65292;&#21017;&#26377;
<span class="math notranslate nohighlight">\(a + bi = (c + di) q + r\)</span> &#65292;&#25105;&#20204;&#21482;&#38656;&#23545; <span class="math notranslate nohighlight">\(N(r)\)</span> &#36827;&#34892;&#38480;&#21046;&#65306;</p>
<div class="math notranslate nohighlight">
\[N(r) = N(c + di)N(u' + v'i) \le N(c + di) \cdot 1/2 &lt; N(c + di).\]</div>
<p>&#25105;&#20204;&#21018;&#21018;&#36827;&#34892;&#30340;&#35770;&#35777;&#38656;&#35201;&#23558;&#39640;&#26031;&#25972;&#25968;&#35270;&#20026;&#22797;&#25968;&#30340;&#19968;&#20010;&#23376;&#38598;&#12290;&#22240;&#27492;&#65292;&#22312; Lean &#20013;&#23545;&#20854;&#36827;&#34892;&#24418;&#24335;&#21270;&#30340;&#19968;&#31181;&#36873;&#25321;&#26159;&#23558;&#39640;&#26031;&#25972;&#25968;&#23884;&#20837;&#21040;&#22797;&#25968;&#20013;&#65292;&#23558;&#25972;&#25968;&#23884;&#20837;&#21040;&#39640;&#26031;&#25972;&#25968;&#20013;&#65292;&#23450;&#20041;&#20174;&#23454;&#25968;&#21040;&#25972;&#25968;&#30340;&#33293;&#20837;&#20989;&#25968;&#65292;&#24182;&#19988;&#35201;&#38750;&#24120;&#23567;&#24515;&#22320;&#22312;&#36825;&#20123;&#25968;&#31995;&#20043;&#38388;&#36827;&#34892;&#36866;&#24403;&#30340;&#36716;&#25442;&#12290;
&#23454;&#38469;&#19978;&#65292;&#36825;&#27491;&#26159; Mathlib &#20013;&#25152;&#37319;&#29992;&#30340;&#26041;&#27861;&#65292;&#20854;&#20013;&#39640;&#26031;&#25972;&#25968;&#26412;&#36523;&#26159;&#20316;&#20026; <strong>&#20108;&#27425;&#25972;&#25968;</strong> &#29615;&#30340;&#19968;&#20010;&#29305;&#20363;&#26469;&#26500;&#36896;&#30340;&#12290;
&#35831;&#21442;&#38405;&#25991;&#20214; <a class="reference external" href="https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/NumberTheory/Zsqrtd/GaussianInt.lean">GaussianInt.lean</a>.</p>
<p>&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#23558;&#36827;&#34892;&#19968;&#20010;&#23436;&#20840;&#22312;&#25972;&#25968;&#33539;&#22260;&#20869;&#36827;&#34892;&#30340;&#35770;&#35777;&#12290;
&#36825;&#35828;&#26126;&#20102;&#22312;&#23558;&#25968;&#23398;&#24418;&#24335;&#21270;&#26102;&#20154;&#20204;&#36890;&#24120;&#38754;&#20020;&#30340;&#19968;&#31181;&#36873;&#25321;&#12290;
&#24403;&#19968;&#20010;&#35770;&#35777;&#38656;&#35201;&#24211;&#20013;&#23578;&#26410;&#21253;&#21547;&#30340;&#27010;&#24565;&#25110;&#24037;&#20855;&#26102;&#65292;&#20154;&#20204;&#26377;&#20004;&#20010;&#36873;&#25321;&#65306;&#35201;&#20040;&#24418;&#24335;&#21270;&#25152;&#38656;&#30340;&#36825;&#20123;&#27010;&#24565;&#25110;&#24037;&#20855;&#65292;&#35201;&#20040;&#35843;&#25972;&#35770;&#35777;&#20197;&#21033;&#29992;&#24050;&#26377;&#30340;&#27010;&#24565;&#21644;&#24037;&#20855;&#12290;
&#20174;&#38271;&#36828;&#26469;&#30475;&#65292;&#24403;&#32467;&#26524;&#21487;&#20197;&#22312;&#20854;&#20182;&#24773;&#22659;&#20013;&#20351;&#29992;&#26102;&#65292;&#31532;&#19968;&#20010;&#36873;&#25321;&#36890;&#24120;&#26159;&#23545;&#26102;&#38388;&#30340;&#33391;&#22909;&#25237;&#36164;&#12290;
&#28982;&#32780;&#65292;&#20174;&#23454;&#38469;&#35282;&#24230;&#26469;&#30475;&#65292;&#26377;&#26102;&#23547;&#25214;&#19968;&#20010;&#26356;&#22522;&#30784;&#30340;&#35777;&#26126;&#20250;&#26356;&#26377;&#25928;&#12290;</p>
<p>&#25972;&#25968;&#30340;&#24120;&#35268;&#21830;&#20313;&#23450;&#29702;&#25351;&#20986;&#65292;&#23545;&#20110;&#20219;&#24847;&#25972;&#25968; <span class="math notranslate nohighlight">\(a\)</span> &#21644;&#38750;&#38646;&#25972;&#25968; <span class="math notranslate nohighlight">\(b\)</span>&#65292;&#37117;&#23384;&#22312;&#25972;&#25968; <span class="math notranslate nohighlight">\(q\)</span> &#21644; <span class="math notranslate nohighlight">\(r\)</span> &#20351;&#24471; <span class="math notranslate nohighlight">\(a = b q + r\)</span> &#19988; <span class="math notranslate nohighlight">\(0 \le r &lt; b\)</span>&#12290;&#36825;&#37324;&#25105;&#20204;&#23558;&#20351;&#29992;&#20197;&#19979;&#21464;&#20307;&#65292;&#21363;&#23384;&#22312;&#25972;&#25968; <span class="math notranslate nohighlight">\(q'\)</span> &#21644; <span class="math notranslate nohighlight">\(r'\)</span> &#20351;&#24471; <span class="math notranslate nohighlight">\(a = b q' + r'\)</span> &#19988; <span class="math notranslate nohighlight">\(|r'| \le b/2\)</span>&#12290;&#24744;&#21487;&#20197;&#39564;&#35777;&#65292;&#22914;&#26524;&#31532;&#19968;&#20010;&#38472;&#36848;&#20013;&#30340; <span class="math notranslate nohighlight">\(r\)</span> &#28385;&#36275; <span class="math notranslate nohighlight">\(r \le b/2\)</span>&#65292;&#21017;&#21487;&#20197;&#21462; <span class="math notranslate nohighlight">\(q' = q\)</span> &#21644; <span class="math notranslate nohighlight">\(r' = r\)</span>&#65292;&#21542;&#21017;&#21487;&#20197;&#21462; <span class="math notranslate nohighlight">\(q' = q + 1\)</span> &#21644; <span class="math notranslate nohighlight">\(r' = r - b\)</span>&#12290;&#25105;&#20204;&#24863;&#35874; Heather Macbeth &#25552;&#20986;&#20197;&#19979;&#26356;&#20248;&#38597;&#30340;&#26041;&#27861;&#65292;&#35813;&#26041;&#27861;&#36991;&#20813;&#20102;&#25353;&#24773;&#20917;&#23450;&#20041;&#12290;&#25105;&#20204;&#21482;&#38656;&#22312;&#38500;&#27861;&#21069;&#23558; <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">/</span> <span class="pre">2</span></code> &#21152;&#21040; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#19978;&#65292;&#28982;&#21518;&#20174;&#20313;&#25968;&#20013;&#20943;&#21435;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">div&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">b</span>

<span class="kd">def</span><span class="w"> </span><span class="n">mod&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">div&#39;_add_mod&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">div&#39;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">mod&#39;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">div&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">mod&#39;</span><span class="o">]</span>
<span class="w">  </span><span class="n">linarith</span><span class="w"> </span><span class="o">[</span><span class="n">Int.ediv_add_emod</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="n">b</span><span class="o">]</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">abs_mod&#39;_le</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">|</span><span class="n">mod&#39;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="bp">|</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">mod&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">abs_le</span><span class="o">]</span>
<span class="w">  </span><span class="n">constructor</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">linarith</span><span class="w"> </span><span class="o">[</span><span class="n">Int.emod_nonneg</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="n">h.ne&#39;</span><span class="o">]</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.emod_lt_of_pos</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="n">h</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.ediv_add_emod</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Int.emod_lt_of_pos</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">zero_lt_two</span>
<span class="w">  </span><span class="n">revert</span><span class="w"> </span><span class="n">this</span><span class="bp">;</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="c1">-- &#24453;&#20462;&#22797;&#65292;&#36825;&#24212;&#35813;&#26159;&#19981;&#24517;&#35201;&#30340;</span>
<span class="w">  </span><span class="n">linarith</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#25105;&#20204;&#32769;&#26379;&#21451; <code class="docutils literal notranslate"><span class="pre">linarith</span></code> &#30340;&#20351;&#29992;&#12290;&#25105;&#20204;&#36824;&#38656;&#35201;&#29992; <code class="docutils literal notranslate"><span class="pre">div'</span></code> &#26469;&#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">mod'</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">mod&#39;_eq</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">mod&#39;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">div&#39;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">linarith</span><span class="w"> </span><span class="o">[</span><span class="n">div&#39;_add_mod&#39;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">]</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#23558;&#20351;&#29992;&#36825;&#26679;&#19968;&#20010;&#20107;&#23454;&#65292;&#21363; <span class="math notranslate nohighlight">\(x^2 + y^2\)</span> &#31561;&#20110;&#38646;&#24403;&#19988;&#20165;&#24403; <span class="math notranslate nohighlight">\(x\)</span> &#21644; <span class="math notranslate nohighlight">\(y\)</span> &#37117;&#20026;&#38646;&#12290;&#20316;&#20026;&#32451;&#20064;&#65292;&#25105;&#20204;&#35201;&#27714;&#24744;&#35777;&#26126;&#22312;&#20219;&#20309;&#26377;&#24207;&#29615;&#20013;&#37117;&#25104;&#31435;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">sq_add_sq_eq_zero</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">LinearOrderedRing</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#23558;&#26412;&#33410;&#20013;&#21097;&#20313;&#30340;&#25152;&#26377;&#23450;&#20041;&#21644;&#23450;&#29702;&#37117;&#25918;&#22312; <code class="docutils literal notranslate"><span class="pre">GaussInt</span></code> &#21629;&#21517;&#31354;&#38388;&#20013;&#12290;
&#39318;&#20808;&#65292;&#25105;&#20204;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">norm</span></code> &#20989;&#25968;&#65292;&#24182;&#35831;&#24744;&#35777;&#26126;&#20854;&#37096;&#20998;&#24615;&#36136;&#12290;
&#36825;&#20123;&#35777;&#26126;&#37117;&#24456;&#31616;&#30701;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">x.re</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">norm_nonneg</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">norm_eq_zero</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">norm_pos</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">norm_mul</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25509;&#19979;&#26469;&#25105;&#20204;&#23450;&#20041;&#20849;&#36717;&#20989;&#25968;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="n">x.re</span><span class="o">,</span><span class="w"> </span><span class="bp">-</span><span class="n">x.im</span><span class="o">&#10217;</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">conj_re</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">conj</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x.re</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">@[</span><span class="n">simp</span><span class="kd">]</span>
<span class="kd">theorem</span><span class="w"> </span><span class="n">conj_im</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">conj</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">-</span><span class="n">x.im</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">norm_conj</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">conj</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">norm</span><span class="o">]</span>
</pre></div>
</div>
<p>&#26368;&#21518;&#65292;&#25105;&#20204;&#20026;&#39640;&#26031;&#25972;&#25968;&#23450;&#20041;&#38500;&#27861;&#36816;&#31639;&#65292;&#35760;&#20316; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code> &#65292;&#23558;&#22797;&#25968;&#21830;&#22235;&#33293;&#20116;&#20837;&#21040;&#26368;&#36817;&#30340;&#39640;&#26031;&#25972;&#25968;&#12290;&#20026;&#27492;&#25105;&#20204;&#20351;&#29992;&#33258;&#23450;&#20041;&#30340; <code class="docutils literal notranslate"><span class="pre">Int.div'</span></code> &#12290;
&#27491;&#22914;&#25105;&#20204;&#19978;&#38754;&#35745;&#31639;&#30340;&#37027;&#26679;&#65292;&#22914;&#26524; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#26159; <span class="math notranslate nohighlight">\(a + bi\)</span>&#65292;&#32780; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#26159; <span class="math notranslate nohighlight">\(c + di\)</span>&#65292;&#37027;&#20040; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code> &#30340;&#23454;&#37096;&#21644;&#34394;&#37096;&#20998;&#21035;&#26159;&#22914;&#19979;&#24335;&#23376;&#26368;&#36817;&#30340;&#25972;&#25968;</p>
<div class="math notranslate nohighlight">
\[\frac{ac + bd}{c^2 + d^2} \quad \text{&#21644;} \quad \frac{bc -ad}{c^2+d^2},\]</div>
<p>&#36825;&#37324;&#20998;&#23376;&#26159; <span class="math notranslate nohighlight">\((a + bi) (c - di)\)</span> &#30340;&#23454;&#37096;&#21644;&#34394;&#37096;&#65292;&#32780;&#20998;&#27597;&#37117;&#31561;&#20110; <span class="math notranslate nohighlight">\(c + di\)</span> &#30340;&#33539;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Div</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">Int.div&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">),</span><span class="w"> </span><span class="n">Int.div&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">)&#10217;&#10217;</span>
</pre></div>
</div>
<p>&#23450;&#20041;&#20102; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code> &#20043;&#21518;&#65292;&#25105;&#20204;&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%</span> <span class="pre">y</span></code> &#20026;&#20313;&#25968;&#65292;&#21363; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">(x</span> <span class="pre">/</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">y</span></code> &#12290;&#21516;&#26679;&#22320;&#65292;&#25105;&#20204;&#23558;&#36825;&#20123;&#23450;&#20041;&#35760;&#24405;&#22312;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">div_def</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">mod_def</span></code> &#20013;&#65292;&#20197;&#20415;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">simp</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">rewrite</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Mod</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">&#10216;</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">y</span><span class="o">)&#10217;</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">div_def</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">Int.div&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">),</span><span class="w"> </span><span class="n">Int.div&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">)&#10217;</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">mod_def</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#36825;&#20123;&#23450;&#20041;&#31435;&#21363;&#24471;&#20986;&#23545;&#20110;&#27599;&#20010; <code class="docutils literal notranslate"><span class="pre">x</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#37117;&#26377; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">(x</span> <span class="pre">/</span> <span class="pre">y)</span> <span class="pre">+</span> <span class="pre">x</span> <span class="pre">%</span> <span class="pre">y</span></code> &#65292;&#25152;&#20197;&#25105;&#20204;&#38656;&#35201;&#20570;&#30340;&#23601;&#26159;&#35777;&#26126;&#24403; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#19981;&#20026;&#38646;&#26102;&#65292; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%</span> <span class="pre">y</span></code> &#30340;&#33539;&#25968;&#23567;&#20110; <code class="docutils literal notranslate"><span class="pre">y</span></code> &#30340;&#33539;&#25968;&#12290;</p>
<p>&#25105;&#20204;&#21018;&#21018;&#23558; <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code> &#30340;&#23454;&#37096;&#21644;&#34394;&#37096;&#20998;&#21035;&#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">div'</span> <span class="pre">(x</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y).re</span> <span class="pre">(norm</span> <span class="pre">y)</span></code> and <code class="docutils literal notranslate"><span class="pre">div'</span> <span class="pre">(x</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y).im</span> <span class="pre">(norm</span> <span class="pre">y)</span></code> &#12290;
&#35745;&#31639;&#24471;&#20986;&#65292;&#25105;&#20204;&#26377;</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">%</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">(x</span> <span class="pre">-</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y</span> <span class="pre">-</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">(y</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y)</span></code></p>
</div></blockquote>
<p>&#21491;&#20391;&#23454;&#37096;&#21644;&#34394;&#37096;&#24688;&#22909;&#20026; <code class="docutils literal notranslate"><span class="pre">mod'</span> <span class="pre">(x</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y).re</span> <span class="pre">(norm</span> <span class="pre">y)</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">mod'</span> <span class="pre">(x</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y).im</span> <span class="pre">(norm</span> <span class="pre">y)</span></code> &#12290;
&#26681;&#25454; <code class="docutils literal notranslate"><span class="pre">div'</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">mod'</span></code> &#30340;&#24615;&#36136;&#65292;&#21487;&#20197;&#20445;&#35777;&#23427;&#20204;&#37117;&#23567;&#20110;&#25110;&#31561;&#20110; <code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">2</span></code> &#12290;
&#22240;&#27492;&#25105;&#20204;&#26377;</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">((x</span> <span class="pre">%</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y)</span> <span class="pre">&#8804;</span> <span class="pre">(norm</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">2)^2</span> <span class="pre">+</span> <span class="pre">(norm</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">2)^2</span> <span class="pre">&#8804;</span> <span class="pre">(norm</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">2)</span> <span class="pre">*</span> <span class="pre">norm</span> <span class="pre">y</span></code> .</p>
</div></blockquote>
<p>&#21478;&#19968;&#26041;&#38754;&#65292;&#25105;&#20204;&#26377;</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">((x</span> <span class="pre">%</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">conj</span> <span class="pre">y)</span> <span class="pre">=</span> <span class="pre">norm</span> <span class="pre">(x</span> <span class="pre">%</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">norm</span> <span class="pre">(conj</span> <span class="pre">y)</span> <span class="pre">=</span> <span class="pre">norm</span> <span class="pre">(x</span> <span class="pre">%</span> <span class="pre">y)</span> <span class="pre">*</span> <span class="pre">norm</span> <span class="pre">y</span></code> .</p>
</div></blockquote>
<p>&#20004;&#36793;&#21516;&#26102;&#38500;&#20197; <code class="docutils literal notranslate"><span class="pre">norm</span> <span class="pre">y</span></code> &#65292;&#25105;&#20204;&#24471;&#21040; <code class="docutils literal notranslate"><span class="pre">norm&#65288;x</span> <span class="pre">%</span> <span class="pre">y&#65289;&#8804;&#65288;norm</span> <span class="pre">y&#65289;/</span> <span class="pre">2</span> <span class="pre">&lt;</span> <span class="pre">norm</span> <span class="pre">y</span></code> &#65292;&#22914;&#25152;&#35201;&#27714;&#30340;&#37027;&#26679;&#12290;</p>
<p>&#36825;&#20010;&#26434;&#20081;&#30340;&#35745;&#31639;&#23558;&#22312;&#25509;&#19979;&#26469;&#30340;&#35777;&#26126;&#20013;&#36827;&#34892;&#12290;&#25105;&#20204;&#40723;&#21169;&#24744;&#20180;&#32454;&#26597;&#30475;&#32454;&#33410;&#65292;&#30475;&#30475;&#33021;&#21542;&#25214;&#21040;&#26356;&#31616;&#27905;&#30340;&#35770;&#35777;&#26041;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">norm_mod_lt</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hy</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">norm</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">y.norm</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">norm_y_pos</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rwa</span><span class="w"> </span><span class="o">[</span><span class="n">norm_pos</span><span class="o">]</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">H1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">Int.mod&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">),</span><span class="w"> </span><span class="n">Int.mod&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">im</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">)&#10217;</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">Int.mod&#39;_eq</span><span class="o">,</span><span class="w"> </span><span class="n">mod_def</span><span class="o">,</span><span class="w"> </span><span class="n">div_def</span><span class="o">,</span><span class="w"> </span><span class="n">norm</span><span class="o">]</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="n">H2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="k">calc</span>
<span class="w">      </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">norm_mul</span><span class="o">,</span><span class="w"> </span><span class="n">norm_conj</span><span class="o">]</span>
<span class="w">      </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">|</span><span class="n">Int.mod&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">|</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span>
<span class="w">          </span><span class="bp">+</span><span class="w"> </span><span class="bp">|</span><span class="n">Int.mod&#39;</span><span class="w"> </span><span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="n">x.re</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.im</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x.im</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y.re</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">|</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">H1</span><span class="o">,</span><span class="w"> </span><span class="n">norm</span><span class="o">,</span><span class="w"> </span><span class="n">sq_abs</span><span class="o">]</span>
<span class="w">      </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="o">(</span><span class="n">y.norm</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="o">(</span><span class="n">y.norm</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">gcongr</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">Int.abs_mod&#39;_le</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">norm_y_pos</span>
<span class="w">      </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">ring</span>
<span class="w">      </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">gcongr</span><span class="bp">;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">Int.ediv_mul_le</span><span class="bp">;</span><span class="w"> </span><span class="n">norm_num</span>
<span class="w">  </span><span class="k">calc</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">le_of_mul_le_mul_right</span><span class="w"> </span><span class="n">H2</span><span class="w"> </span><span class="n">norm_y_pos</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">norm</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">        </span><span class="n">apply</span><span class="w"> </span><span class="n">Int.ediv_lt_of_lt_mul</span>
<span class="w">        </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">norm_num</span>
<span class="w">        </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">linarith</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#21363;&#23558;&#23436;&#25104;&#12290;&#25105;&#20204;&#30340; <code class="docutils literal notranslate"><span class="pre">norm</span></code> &#20989;&#25968;&#23558;&#39640;&#26031;&#25972;&#25968;&#26144;&#23556;&#21040;&#38750;&#36127;&#25972;&#25968;&#12290;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#23558;&#39640;&#26031;&#25972;&#25968;&#26144;&#23556;&#21040;&#33258;&#28982;&#25968;&#30340;&#20989;&#25968;&#65292;&#25105;&#20204;&#36890;&#36807;&#23558; <code class="docutils literal notranslate"><span class="pre">norm</span></code> &#19982;&#23558;&#25972;&#25968;&#26144;&#23556;&#21040;&#33258;&#28982;&#25968;&#30340;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">Int.natAbs</span></code> &#32452;&#21512;&#26469;&#33719;&#24471;&#23427;&#12290;
&#25509;&#19979;&#26469;&#30340;&#20004;&#20010;&#24341;&#29702;&#20013;&#30340;&#31532;&#19968;&#20010;&#30830;&#31435;&#20102;&#23558;&#33539;&#25968;&#26144;&#23556;&#21040;&#33258;&#28982;&#25968;&#28982;&#21518;&#20877;&#26144;&#23556;&#22238;&#25972;&#25968;&#19981;&#20250;&#25913;&#21464;&#20854;&#20540;&#12290;
&#31532;&#20108;&#20010;&#24341;&#29702;&#37325;&#26032;&#34920;&#36848;&#20102;&#33539;&#25968;&#36882;&#20943;&#36825;&#19968;&#20107;&#23454;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">coe_natAbs_norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">x.norm.natAbs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">x.norm</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Int.natAbs_of_nonneg</span><span class="w"> </span><span class="o">(</span><span class="n">norm_nonneg</span><span class="w"> </span><span class="n">_</span><span class="o">)</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">natAbs_norm_mod_lt</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">hy</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">norm.natAbs</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">y.norm.natAbs</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">Int.ofNat_lt</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">Int.natCast_natAbs</span><span class="o">,</span><span class="w"> </span><span class="n">abs_of_nonneg</span><span class="o">,</span><span class="w"> </span><span class="n">norm_nonneg</span><span class="o">]</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">norm_mod_lt</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">hy</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#36824;&#38656;&#35201;&#30830;&#31435;&#33539;&#25968;&#20989;&#25968;&#22312;&#27431;&#20960;&#37324;&#24471;&#22495;&#19978;&#30340;&#31532;&#20108;&#20010;&#20851;&#38190;&#24615;&#36136;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">not_norm_mul_left_lt_norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">hy</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#172;</span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="o">))</span><span class="bp">.</span><span class="n">natAbs</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="o">(</span><span class="n">norm</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">natAbs</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">not_lt_of_ge</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">norm_mul</span><span class="o">,</span><span class="w"> </span><span class="n">Int.natAbs_mul</span><span class="o">]</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">le_mul_of_one_le_right</span><span class="w"> </span><span class="o">(</span><span class="n">Nat.zero_le</span><span class="w"> </span><span class="n">_</span><span class="o">)</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">Int.ofNat_le</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">coe_natAbs_norm</span><span class="o">]</span>
<span class="w">  </span><span class="n">exact</span><span class="w"> </span><span class="n">Int.add_one_le_of_lt</span><span class="w"> </span><span class="o">((</span><span class="n">norm_pos</span><span class="w"> </span><span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">mpr</span><span class="w"> </span><span class="n">hy</span><span class="o">)</span>
</pre></div>
</div>
<p>&#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#23558;&#20854;&#25972;&#21512;&#36215;&#26469;&#65292;&#35777;&#26126;&#39640;&#26031;&#25972;&#25968;&#26159;&#27431;&#20960;&#37324;&#24471;&#22495;&#30340;&#19968;&#20010;&#23454;&#20363;&#12290;&#25105;&#20204;&#20351;&#29992;&#24050;&#23450;&#20041;&#30340;&#21830;&#21644;&#20313;&#25968;&#20989;&#25968;&#12290;
Mathlib &#20013;&#27431;&#20960;&#37324;&#24471;&#22495;&#30340;&#23450;&#20041;&#27604;&#19978;&#38754;&#30340;&#26356;&#36890;&#29992;&#65292;&#22240;&#20026;&#23427;&#20801;&#35768;&#25105;&#20204;&#35777;&#26126;&#20313;&#25968;&#30456;&#23545;&#20110;&#20219;&#20309;&#33391;&#22522;&#24230;&#37327;&#37117;&#26159;&#36882;&#20943;&#30340;&#12290;
&#27604;&#36739;&#36820;&#22238;&#33258;&#28982;&#25968;&#30340;&#33539;&#25968;&#20989;&#25968;&#30340;&#20540;&#26159;&#21482;&#38656;&#36825;&#26679;&#19968;&#20010;&#24230;&#37327;&#30340;&#19968;&#20010;&#23454;&#20363;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#25152;&#38656;&#30340;&#24615;&#36136;&#23601;&#26159;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">natAbs_norm_mod_lt</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">not_norm_mul_left_lt_norm</span></code> &#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">EuclideanDomain</span><span class="w"> </span><span class="n">GaussInt</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="o">{</span><span class="w"> </span><span class="n">GaussInt.instCommRing</span><span class="w"> </span><span class="k">with</span>
<span class="w">    </span><span class="n">quotient</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">    </span><span class="n">remainder</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#183;</span><span class="w"> </span><span class="bp">%</span><span class="w"> </span><span class="bp">&#183;</span><span class="o">)</span>
<span class="w">    </span><span class="n">quotient_mul_add_remainder_eq</span><span class="w"> </span><span class="o">:=</span>
<span class="w">      </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="bp">;</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">mod_def</span><span class="o">,</span><span class="w"> </span><span class="n">add_comm</span><span class="o">]</span><span class="w"> </span><span class="bp">;</span><span class="w"> </span><span class="n">ring</span>
<span class="w">    </span><span class="n">quotient_zero</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">div_def</span><span class="o">,</span><span class="w"> </span><span class="n">norm</span><span class="o">,</span><span class="w"> </span><span class="n">Int.div&#39;</span><span class="o">]</span>
<span class="w">      </span><span class="n">rfl</span>
<span class="w">    </span><span class="n">r</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">measure</span><span class="w"> </span><span class="o">(</span><span class="n">Int.natAbs</span><span class="w"> </span><span class="bp">&#8728;</span><span class="w"> </span><span class="n">norm</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span>
<span class="w">    </span><span class="n">r_wellFounded</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">measure</span><span class="w"> </span><span class="o">(</span><span class="n">Int.natAbs</span><span class="w"> </span><span class="bp">&#8728;</span><span class="w"> </span><span class="n">norm</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span>
<span class="w">    </span><span class="n">remainder_lt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">natAbs_norm_mod_lt</span>
<span class="w">    </span><span class="n">mul_left_not_lt</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">not_norm_mul_left_lt_norm</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>&#19968;&#20010;&#30452;&#25509;&#30340;&#22909;&#22788;&#26159;&#65292;&#25105;&#20204;&#29616;&#22312;&#30693;&#36947;&#65292;&#22312;&#39640;&#26031;&#25972;&#25968;&#20013;&#65292;&#32032;&#25968;&#21644;&#19981;&#21487;&#32422;&#25968;&#30340;&#27010;&#24565;&#26159;&#19968;&#33268;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">GaussInt</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Irreducible</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">Prime</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">irreducible_iff_prime</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C05_Elementary_Number_Theory.html" class="btn btn-neutral float-left" title="5. &#21021;&#31561;&#25968;&#35770;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C07_Hierarchies.html" class="btn btn-neutral float-right" title="7. &#23618;&#27425;&#32467;&#26500;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>