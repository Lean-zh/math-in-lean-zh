

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. &#31163;&#25955;&#25968;&#23398; &mdash; Mathematics in Lean 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=0731ccc3" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;" href="C07_Structures.html" />
    <link rel="prev" title="5. &#21021;&#31561;&#25968;&#35770;" href="C05_Elementary_Number_Theory.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Mathematics in Lean
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="C01_Introduction.html">1. &#24341;&#35328;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C02_Basics.html">2. &#22522;&#30784;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C03_Logic.html">3. &#36923;&#36753;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C04_Sets_and_Functions.html">4. &#38598;&#21512;&#21644;&#20989;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C05_Elementary_Number_Theory.html">5. &#21021;&#31561;&#25968;&#35770;</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. &#31163;&#25955;&#25968;&#23398;</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#finsets-and-fintypes">6.1. &#26377;&#38480;&#38598;&#21512;&#21644;&#26377;&#38480;&#31867;&#22411;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#counting-arguments">6.2. &#35745;&#25968;&#35770;&#35777;</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inductively-defined-types">6.3. &#24402;&#32435;&#23450;&#20041;&#30340;&#31867;&#22411;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="C07_Structures.html">7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C08_Hierarchies.html">8. &#23618;&#27425;&#32467;&#26500;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C09_Groups_and_Rings.html">9. &#32676;&#19982;&#29615;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C10_Linear_Algebra.html">10. &#32447;&#24615;&#20195;&#25968;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C11_Topology.html">11. &#25299;&#25169;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C12_Differential_Calculus.html">12. &#24494;&#20998;&#23398;</a></li>
<li class="toctree-l1"><a class="reference internal" href="C13_Integration_and_Measure_Theory.html">13. &#31215;&#20998;&#21644;&#27979;&#24230;&#35770;</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Mathematics in Lean</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">6. </span>&#31163;&#25955;&#25968;&#23398;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/C06_Discrete_Mathematics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="discrete-mathematics">
<span id="id1"></span><h1><span class="section-number">6. </span>&#31163;&#25955;&#25968;&#23398;<a class="headerlink" href="#discrete-mathematics" title="Link to this heading">&#61633;</a></h1>
<p>&#31163;&#25955;&#25968;&#23398;&#26159;&#30740;&#31350;&#26377;&#38480;&#38598;&#12289;&#31163;&#25955;&#23545;&#35937;&#21644;&#31163;&#25955;&#32467;&#26500;&#30340;&#23398;&#31185;&#12290;
&#25105;&#20204;&#21487;&#20197;&#25968;&#20986;&#26377;&#38480;&#38598;&#20013;&#30340;&#20803;&#32032;&#20010;&#25968;&#65292;&#35745;&#31639;&#20803;&#32032;&#30340;&#26377;&#38480;&#21644;&#25110;&#26377;&#38480;&#31215;&#65292;&#21487;&#20197;&#27714;&#20986;&#36825;&#20123;&#20803;&#32032;&#30340;&#26368;&#22823;&#20540;&#21644;&#26368;&#23567;&#20540;&#65292;&#31561;&#31561;&#12290;
&#25105;&#20204;&#36824;&#21487;&#20197;&#30740;&#31350;&#26576;&#20123;&#29983;&#25104;&#20989;&#25968;&#25152;&#20135;&#29983;&#30340;&#23545;&#35937;&#65292;&#36825;&#20123;&#23545;&#35937;&#26159;&#32463;&#36807;&#22810;&#27425;&#24212;&#29992;&#36825;&#20123;&#20989;&#25968;&#32780;&#26500;&#36896;&#20986;&#26469;&#30340;&#12290;&#21487;&#20197;&#36890;&#36807;&#32467;&#26500;&#36882;&#24402;&#23450;&#20041;&#20989;&#25968;&#65292;&#20351;&#29992;&#32467;&#26500;&#24402;&#32435;&#27861;&#35777;&#26126;&#23450;&#29702;&#12290;
&#26412;&#31456;&#23558;&#35762;&#36848;&#36825;&#20123;&#20869;&#23481;&#20013;Mathlib&#25903;&#25345;&#30340;&#37096;&#20998;&#12290;</p>
<section id="finsets-and-fintypes">
<span id="id2"></span><h2><span class="section-number">6.1. </span>&#26377;&#38480;&#38598;&#21512;&#21644;&#26377;&#38480;&#31867;&#22411;<a class="headerlink" href="#finsets-and-fintypes" title="Link to this heading">&#61633;</a></h2>
<p>&#22312; Mathlib &#20013;&#22788;&#29702;&#26377;&#38480;&#38598;&#21512;&#21644;&#26377;&#38480;&#31867;&#22411;&#21487;&#33021;&#20250;&#20196;&#20154;&#22256;&#24785;&#65292;&#22240;&#20026;&#24211;&#25552;&#20379;&#20102;&#22810;&#31181;&#22788;&#29702;&#26041;&#24335;&#12290;&#22312;&#36825;&#19968;&#33410;&#20013;&#65292;&#25105;&#20204;&#23558;&#35752;&#35770;&#26368;&#24120;&#35265;&#30340;&#26041;&#27861;&#12290;</p>
<p>&#25105;&#20204;&#24050;&#32463;&#22312; <a class="reference internal" href="C05_Elementary_Number_Theory.html#section-induction-and-recursion"><span class="std std-numref">Section 5.2</span></a> &#21644; <a class="reference internal" href="C05_Elementary_Number_Theory.html#section-infinitely-many-primes"><span class="std std-numref">Section 5.3</span></a> &#20013;&#36935;&#21040;&#20102;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Finset</span></code>&#12290;
&#39038;&#21517;&#24605;&#20041;&#65292;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Finset</span> <span class="pre">&#945;</span></code> &#30340;&#20803;&#32032;&#26159;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#20803;&#32032;&#30340;&#26377;&#38480;&#38598;&#21512;&#12290;
&#25105;&#20204;&#23558;&#36825;&#20123;&#31216;&#20026;&#8221;&#26377;&#38480;&#38598;&#21512;&#8221;&#12290;
<code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#25968;&#25454;&#31867;&#22411;&#35774;&#35745;&#20026;&#20855;&#26377;&#35745;&#31639;&#35299;&#37322;&#65292;
<code class="docutils literal notranslate"><span class="pre">Finset</span> <span class="pre">&#945;</span></code> &#30340;&#35768;&#22810;&#22522;&#26412;&#25805;&#20316;&#37117;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#20855;&#26377;&#21487;&#21028;&#23450;&#30340;&#30456;&#31561;&#24615;&#65292;
&#36825;&#20445;&#35777;&#20102;&#26377;&#19968;&#20010;&#31639;&#27861;&#21487;&#20197;&#27979;&#35797; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> &#26159;&#21542;&#26159;&#26377;&#38480;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#20803;&#32032;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span>
<span class="k">#check</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span>

<span class="kd">end</span>
</pre></div>
</div>
<p>&#22914;&#26524;&#20320;&#21024;&#38500;&#22768;&#26126; <code class="docutils literal notranslate"><span class="pre">[DecidableEq</span> <span class="pre">&#945;]</span></code>&#65292;Lean &#20250;&#22312; <code class="docutils literal notranslate"><span class="pre">#check</span> <span class="pre">s</span> <span class="pre">&#8745;</span> <span class="pre">t</span></code> &#36825;&#19968;&#34892;&#25253;&#38169;&#65292;
&#22240;&#20026;&#23427;&#26080;&#27861;&#35745;&#31639;&#20132;&#38598;&#12290;
&#28982;&#32780;&#65292;&#25152;&#26377;&#20320;&#24212;&#35813;&#33021;&#22815;&#35745;&#31639;&#30340;&#25968;&#25454;&#31867;&#22411;&#37117;&#20855;&#26377;&#21487;&#21028;&#23450;&#30340;&#30456;&#31561;&#24615;&#65292;
&#22914;&#26524;&#20320;&#36890;&#36807;&#25171;&#24320; <code class="docutils literal notranslate"><span class="pre">Classical</span></code> &#21629;&#21517;&#31354;&#38388;&#24182;&#22768;&#26126; <code class="docutils literal notranslate"><span class="pre">noncomputable</span> <span class="pre">section</span></code> &#26469;&#36827;&#34892;&#32463;&#20856;&#25512;&#29702;&#65292;
&#20320;&#21487;&#20197;&#23545;&#20219;&#20309;&#31867;&#22411;&#30340;&#20803;&#32032;&#30340;&#26377;&#38480;&#38598;&#21512;&#36827;&#34892;&#25512;&#29702;&#12290;</p>
<p>&#26377;&#38480;&#38598;&#21512;&#25903;&#25345;&#38598;&#21512;&#35770;&#30340;&#22823;&#37096;&#20998;&#36816;&#31639;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Finset</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">b</span>
<span class="k">#check</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">b</span>
<span class="k">#check</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">\</span><span class="w"> </span><span class="n">b</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8709;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">x</span><span class="bp">;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">mem_inter</span><span class="o">,</span><span class="w"> </span><span class="n">mem_union</span><span class="o">]</span><span class="bp">;</span><span class="w"> </span><span class="n">tauto</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">inter_union_distrib_left</span><span class="o">]</span>
</pre></div>
</div>
<p>&#35831;&#27880;&#24847;&#65292;&#25105;&#20204;&#24050;&#32463;&#25171;&#24320;&#20102; <code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#21629;&#21517;&#31354;&#38388;&#65292;
&#22312;&#36825;&#37324;&#21487;&#20197;&#25214;&#21040;&#29305;&#23450;&#20110;&#26377;&#38480;&#38598;&#21512;&#30340;&#23450;&#29702;&#12290;
&#22914;&#26524;&#20320;&#36880;&#27493;&#25191;&#34892;&#19979;&#38754;&#30340;&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;&#65292;&#20320;&#20250;&#30475;&#21040;&#24212;&#29992; <code class="docutils literal notranslate"><span class="pre">ext</span></code> &#21518;&#36319; <code class="docutils literal notranslate"><span class="pre">simp</span></code>
&#23558;&#24658;&#31561;&#24335;&#31616;&#21270;&#20026;&#21629;&#39064;&#36923;&#36753;&#30340;&#38382;&#39064;&#12290;
&#20316;&#20026;&#32451;&#20064;&#65292;&#20320;&#21487;&#20197;&#23581;&#35797;&#35777;&#26126; <a class="reference internal" href="C04_Sets_and_Functions.html#sets-and-functions"><span class="std std-numref">&#31532; 4 &#31456;</span></a> &#20013;&#30340;&#19968;&#20123;&#38598;&#21512;&#24658;&#31561;&#24335;&#65292;
&#24182;&#23558;&#23427;&#20204;&#36716;&#25442;&#20026;&#26377;&#38480;&#38598;&#21512;&#12290;</p>
<p>&#20320;&#24050;&#32463;&#35265;&#36807;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">Finset.range</span> <span class="pre">n</span></code> &#34920;&#31034;&#33258;&#28982;&#25968;&#30340;&#26377;&#38480;&#38598;&#21512; <span class="math notranslate nohighlight">\(\{ 0, 1, \ldots, n-1 \}\)</span>&#12290;
<code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#36824;&#20801;&#35768;&#20320;&#36890;&#36807;&#26522;&#20030;&#20803;&#32032;&#26469;&#23450;&#20041;&#26377;&#38480;&#38598;&#21512;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="o">({</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">example1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">{</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">}</span>
</pre></div>
</div>
<p>&#26377;&#22810;&#31181;&#26041;&#24335;&#21487;&#20197;&#35753; Lean &#35782;&#21035;&#20986;&#20197;&#36825;&#31181;&#26041;&#24335;&#21576;&#29616;&#30340;&#38598;&#21512;&#20013;&#20803;&#32032;&#30340;&#39034;&#24207;&#21644;&#37325;&#22797;
&#39033;&#37117;&#26080;&#20851;&#32039;&#35201;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">({</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">decide</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">({</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">decide</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">({</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">Finset.pair_comm</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">({</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">({</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">i</span><span class="bp">;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">or_comm</span><span class="o">,</span><span class="w"> </span><span class="n">or_assoc</span><span class="o">,</span><span class="w"> </span><span class="n">or_left_comm</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">({</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">ext</span><span class="w"> </span><span class="n">i</span><span class="bp">;</span><span class="w"> </span><span class="n">simp</span><span class="bp">;</span><span class="w"> </span><span class="n">tauto</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">insert</span></code> &#21521; Finset &#20013;&#28155;&#21152;&#21333;&#20010;&#20803;&#32032;&#65292;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Finset.erase</span></code>
&#21024;&#38500;&#21333;&#20010;&#20803;&#32032;&#12290;
&#35831;&#27880;&#24847;&#65292;<code class="docutils literal notranslate"><span class="pre">erase</span></code> &#22312; <code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#21629;&#21517;&#31354;&#38388;&#20013;&#65292;&#20294; <code class="docutils literal notranslate"><span class="pre">insert</span></code> &#22312;&#26681;&#21629;&#21517;&#31354;&#38388;&#20013;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">insert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">|&gt;.</span><span class="n">erase</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Finset.erase_insert</span><span class="w"> </span><span class="n">h</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">insert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">s.erase</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span>
<span class="w">  </span><span class="n">Finset.insert_erase</span><span class="w"> </span><span class="n">h</span>
</pre></div>
</div>
<p>&#23454;&#38469;&#19978;&#65292;<code class="docutils literal notranslate"><span class="pre">{0,</span> <span class="pre">1,</span> <span class="pre">2}</span></code> &#21482;&#26159; <code class="docutils literal notranslate"><span class="pre">insert</span> <span class="pre">0</span> <span class="pre">(insert</span> <span class="pre">1</span> <span class="pre">(singleton</span> <span class="pre">2))</span></code> &#30340;&#35760;&#27861;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">set_option</span><span class="w"> </span><span class="n">pp.notation</span><span class="w"> </span><span class="n">false</span><span class="w"> </span><span class="k">in</span>
<span class="k">#check</span><span class="w"> </span><span class="o">({</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>
</pre></div>
</div>
<p>&#32473;&#23450;&#19968;&#20010;&#26377;&#38480;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#21644;&#19968;&#20010;&#35859;&#35789; <code class="docutils literal notranslate"><span class="pre">P</span></code>&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#38598;&#21512;&#26500;&#36896;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">{x</span> <span class="pre">&#8712;</span> <span class="pre">s</span> <span class="pre">|</span> <span class="pre">P</span> <span class="pre">x}</span></code> &#26469;
&#23450;&#20041; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20013;&#28385;&#36275; <code class="docutils literal notranslate"><span class="pre">P</span></code> &#30340;&#20803;&#32032;&#30340;&#38598;&#21512;&#12290;
&#36825;&#26159; <code class="docutils literal notranslate"><span class="pre">Finset.filter</span> <span class="pre">P</span> <span class="pre">s</span></code> &#30340;&#35760;&#27861;&#65292;&#20063;&#21487;&#20197;&#20889;&#20316; <code class="docutils literal notranslate"><span class="pre">s.filter</span> <span class="pre">P</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">{</span><span class="n">m</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">m</span><span class="o">}</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">filter</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">{</span><span class="n">m</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">3</span><span class="o">}</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">filter</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8743;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">{</span><span class="n">m</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">m</span><span class="o">}</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="mi">8</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">decide</span>
</pre></div>
</div>
<p>Mathlib &#30693;&#36947;&#26377;&#38480;&#38598;&#21512;&#22312;&#20989;&#25968;&#19979;&#30340;&#20687;&#26159;&#26377;&#38480;&#38598;&#21512;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="bp">.</span><span class="n">image</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="bp">.</span><span class="n">image</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">Even</span><span class="w"> </span><span class="n">x</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">decide</span>
</pre></div>
</div>
<p>Lean &#20063;&#30693;&#36947;&#20004;&#20010;&#26377;&#38480;&#38598;&#21512;&#30340;&#31515;&#21345;&#23572;&#31215; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#215;&#738;</span> <span class="pre">t</span></code> &#26159;&#26377;&#38480;&#38598;&#21512;&#65292;
&#20197;&#21450;&#26377;&#38480;&#38598;&#21512;&#30340;&#24130;&#38598;&#26159;&#26377;&#38480;&#38598;&#21512;&#12290;&#65288;&#35831;&#27880;&#24847;&#65292;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">&#215;&#738;</span> <span class="pre">t</span></code> &#20063;&#36866;&#29992;&#20110;&#38598;&#21512;&#12290;&#65289;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">&#215;&#738;</span><span class="w"> </span><span class="n">t</span>
<span class="k">#check</span><span class="w"> </span><span class="n">s.powerset</span>
</pre></div>
</div>
<p>&#26681;&#25454;&#26377;&#38480;&#38598;&#21512;&#30340;&#20803;&#32032;&#26469;&#23450;&#20041;&#36816;&#31639;&#26159;&#24456;&#26840;&#25163;&#30340;&#65292;&#22240;&#20026;&#20219;&#20309;&#36825;&#26679;&#30340;&#23450;&#20041;&#37117;&#24517;&#39035;
&#19982;&#20803;&#32032;&#21576;&#29616;&#30340;&#39034;&#24207;&#26080;&#20851;&#12290;
&#24403;&#28982;&#65292;&#20320;&#24635;&#26159;&#21487;&#20197;&#36890;&#36807;&#32452;&#21512;&#29616;&#26377;&#30340;&#36816;&#31639;&#26469;&#23450;&#20041;&#20989;&#25968;&#12290;
&#20320;&#36824;&#21487;&#20197;&#20570;&#30340;&#21478;&#19968;&#20214;&#20107;&#26159;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Finset.fold</span></code> &#23545;&#20803;&#32032;&#36827;&#34892;&#20108;&#20803;&#36816;&#31639;&#30340;&#25240;&#21472;&#65292;
&#21069;&#25552;&#26159;&#36816;&#31639;&#20855;&#26377;&#32467;&#21512;&#24459;&#21644;&#20132;&#25442;&#24459;&#65292;
&#22240;&#20026;&#36825;&#20123;&#24615;&#36136;&#20445;&#35777;&#20102;&#32467;&#26524;&#19982;&#36816;&#31639;&#24212;&#29992;&#30340;&#39034;&#24207;&#26080;&#20851;&#12290;&#26377;&#38480;&#21644;&#12289;&#26377;&#38480;&#31215;&#21644;&#26377;&#38480;&#24182;&#37117;&#26159;&#36825;&#26679;&#23450;&#20041;&#30340;&#12290;
&#22312;&#19979;&#38754;&#30340;&#26368;&#21518;&#19968;&#20010;&#20363;&#23376;&#20013;&#65292;<code class="docutils literal notranslate"><span class="pre">biUnion</span></code> &#34920;&#31034;&#8221;&#26377;&#30028;&#32034;&#24341;&#24182;&#8221;&#12290;
&#29992;&#20256;&#32479;&#30340;&#25968;&#23398;&#35760;&#27861;&#65292;&#36825;&#20010;&#34920;&#36798;&#24335;&#20250;&#20889;&#20316; <span class="math notranslate nohighlight">\(\bigcup_{i &#8712; s} g(i)\)</span>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Finset.fold</span>

<span class="kd">def</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8593;</span><span class="n">n</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="bp">.</span><span class="n">fold</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">f</span>
<span class="k">#eval</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="bp">.</span><span class="n">fold</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Int</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="o">)</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">f</span>

<span class="k">#check</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="n">i</span><span class="bp">^</span><span class="mi">2</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#8719;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">Int</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="bp">.</span><span class="n">biUnion</span><span class="w"> </span><span class="n">g</span>
</pre></div>
</div>
<p>&#26377;&#38480;&#38598;&#21512;&#26377;&#19968;&#20010;&#33258;&#28982;&#30340;&#24402;&#32435;&#21407;&#29702;&#65306;&#35201;&#35777;&#26126;&#27599;&#20010;&#26377;&#38480;&#38598;&#21512;&#37117;&#26377;&#26576;&#20010;&#24615;&#36136;&#65292;
&#38656;&#35201;&#35777;&#26126;&#31354;&#38598;&#26377;&#36825;&#20010;&#24615;&#36136;&#65292;&#24182;&#19988;&#24403;&#25105;&#20204;&#21521;&#26377;&#38480;&#38598;&#21512;&#20013;&#28155;&#21152;&#19968;&#20010;&#26032;&#20803;&#32032;&#26102;&#65292;
&#36825;&#20010;&#24615;&#36136;&#24471;&#21040;&#20445;&#25345;&#12290;&#65288;&#22312;&#19979;&#19968;&#20010;&#20363;&#23376;&#30340;&#24402;&#32435;&#27493;&#39588;&#20013;&#65292;<code class="docutils literal notranslate"><span class="pre">&#64;insert</span></code> &#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> &#31526;&#21495;&#26159;&#24517;&#38656;&#30340;&#65292;
&#29992;&#20110;&#32473;&#21442;&#25968; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#21629;&#21517;&#65292;&#22240;&#20026;&#23427;&#20204;&#34987;&#26631;&#35760;&#20026;&#38544;&#24335;&#21442;&#25968;&#12290;&#65289;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Finset.induction</span>

<span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w">  </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8719;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">induction</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">Finset.induction_on</span><span class="w"> </span><span class="k">with</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="bp">@</span><span class="n">insert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">anins</span><span class="w"> </span><span class="n">ih</span><span class="w"> </span><span class="bp">=&gt;</span>
<span class="w">    </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">prod_insert</span><span class="w"> </span><span class="n">anins</span><span class="o">]</span>
<span class="w">    </span><span class="n">apply</span><span class="w"> </span><span class="n">mul_ne_zero</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">h</span><span class="bp">;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">mem_insert_self</span>
<span class="w">    </span><span class="n">apply</span><span class="w"> </span><span class="n">ih</span>
<span class="w">    </span><span class="n">intros</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">xs</span>
<span class="w">    </span><span class="n">exact</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">(</span><span class="n">mem_insert_of_mem</span><span class="w"> </span><span class="n">xs</span><span class="o">)</span>
</pre></div>
</div>
<p>&#22914;&#26524; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#26159;&#26377;&#38480;&#38598;&#21512;&#65292;<code class="docutils literal notranslate"><span class="pre">Finset.Nonempty</span> <span class="pre">s</span></code> &#23450;&#20041;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8707;</span> <span class="pre">x,</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">s</span></code>&#12290;
&#20320;&#21487;&#20197;&#20351;&#29992;&#32463;&#20856;&#36873;&#25321;&#26469;&#20174;&#38750;&#31354;&#26377;&#38480;&#38598;&#21512;&#20013;&#36873;&#25321;&#19968;&#20010;&#20803;&#32032;&#12290;&#31867;&#20284;&#22320;&#65292;
&#24211;&#23450;&#20041;&#20102; <code class="docutils literal notranslate"><span class="pre">Finset.toList</span> <span class="pre">s</span></code>&#65292;&#23427;&#20351;&#29992;&#36873;&#25321;&#25353;&#26576;&#31181;&#39034;&#24207;&#36873;&#25321; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#20803;&#32032;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s.Nonempty</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Classical.choose</span><span class="w"> </span><span class="n">h</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s.Nonempty</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Classical.choose</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">Classical.choose_spec</span><span class="w"> </span><span class="n">h</span>

<span class="kd">noncomputable</span><span class="w"> </span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">s.toList</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s.toList</span><span class="w"> </span><span class="bp">&#8596;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">mem_toList</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Finset.min</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.max</span></code> &#26469;&#36873;&#25321;&#32447;&#24615;&#24207;&#30340;&#26377;&#38480;&#38598;&#21512;&#20013;&#30340;&#26368;&#23567;&#25110;&#26368;&#22823;&#20803;&#32032;&#65292;
&#31867;&#20284;&#22320;&#65292;&#20320;&#21487;&#20197;&#23545;&#26684;&#30340;&#26377;&#38480;&#38598;&#21512;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Finset.inf</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.sup</span></code>&#65292;&#20294;&#26377;&#19968;&#20010;&#38382;&#39064;&#12290;
&#31354;&#26377;&#38480;&#38598;&#21512;&#30340;&#26368;&#23567;&#20803;&#32032;&#24212;&#35813;&#26159;&#20160;&#20040;&#65311;
&#20320;&#21487;&#20197;&#26816;&#26597;&#19979;&#38754;&#20989;&#25968;&#30340;&#24102;&#25735;&#29256;&#26412;&#28155;&#21152;&#20102;&#26377;&#38480;&#38598;&#21512;&#38750;&#31354;&#30340;&#21069;&#25552;&#26465;&#20214;&#12290;
&#19981;&#24102;&#25735;&#30340;&#29256;&#26412; <code class="docutils literal notranslate"><span class="pre">Finset.min</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.max</span></code> &#20998;&#21035;&#21521;&#36755;&#20986;&#31867;&#22411;&#28155;&#21152;&#19968;&#20010;&#39030;&#20803;&#32032;&#25110;&#24213;&#20803;&#32032;&#65292;
&#20197;&#22788;&#29702;&#26377;&#38480;&#38598;&#21512;&#20026;&#31354;&#30340;&#24773;&#20917;&#12290;
&#19981;&#24102;&#25735;&#30340;&#29256;&#26412; <code class="docutils literal notranslate"><span class="pre">Finset.inf</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">Finset.sup</span></code> &#20551;&#35774;&#26684;&#20998;&#21035;&#37197;&#22791;&#20102;&#39030;&#20803;&#32032;&#25110;&#24213;&#20803;&#32032;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Finset.min</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.min&#39;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.max</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.max&#39;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.inf</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.inf&#39;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.sup</span>
<span class="k">#check</span><span class="w"> </span><span class="n">Finset.sup&#39;</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset.Nonempty</span><span class="w"> </span><span class="o">{</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">trivial</span><span class="o">&#10217;</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset.min&#39;</span><span class="w"> </span><span class="o">{</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">}</span><span class="w"> </span><span class="o">&#10216;</span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">trivial</span><span class="o">&#10217;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">trivial</span>
</pre></div>
</div>
<p>&#27599;&#20010;&#26377;&#38480;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#37117;&#26377;&#19968;&#20010;&#26377;&#38480;&#30340;&#22522;&#25968; <code class="docutils literal notranslate"><span class="pre">Finset.card</span> <span class="pre">s</span></code>&#65292;&#24403; <code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#21629;&#21517;&#31354;&#38388;&#25171;&#24320;&#26102;&#65292;
&#21487;&#20197;&#20889;&#20316; <code class="docutils literal notranslate"><span class="pre">#s</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Finset.card</span>

<span class="k">#eval</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="bp">.</span><span class="n">card</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s.card</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s.card</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_eq_sum_ones</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s.card</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
</pre></div>
</div>
<p>&#19979;&#19968;&#33410;&#23436;&#20840;&#26159;&#20851;&#20110;&#23545;&#22522;&#25968;&#30340;&#25512;&#29702;&#12290;</p>
<p>&#22312;&#24418;&#24335;&#21270;&#25968;&#23398;&#26102;&#65292;&#20154;&#20204;&#32463;&#24120;&#38656;&#35201;&#20915;&#23450;&#26159;&#29992;&#38598;&#21512;&#36824;&#26159;&#29992;&#31867;&#22411;&#26469;&#34920;&#36798;
&#23450;&#20041;&#21644;&#23450;&#29702;&#12290;
&#20351;&#29992;&#31867;&#22411;&#36890;&#24120;&#31616;&#21270;&#35760;&#27861;&#21644;&#35777;&#26126;&#65292;&#20294;&#20351;&#29992;&#31867;&#22411;&#30340;&#23376;&#38598;&#21487;&#33021;&#26356;&#28789;&#27963;&#12290;
&#26377;&#38480;&#38598;&#21512;&#30340;&#22522;&#20110;&#31867;&#22411;&#30340;&#23545;&#24212;&#29289;&#26159; <em>&#26377;&#38480;&#31867;&#22411;</em>&#65292;&#21363;&#26576;&#20010; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Fintype</span> <span class="pre">&#945;</span></code>&#12290;
&#26681;&#25454;&#23450;&#20041;&#65292;&#26377;&#38480;&#31867;&#22411;&#21482;&#26159;&#19968;&#20010;&#25968;&#25454;&#31867;&#22411;&#65292;&#23427;&#37197;&#22791;&#20102;&#19968;&#20010;&#21253;&#21547;&#25152;&#26377;&#20854;&#20803;&#32032;&#30340;&#26377;&#38480;&#38598;&#21512; <code class="docutils literal notranslate"><span class="pre">univ</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">Finset.univ</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="bp">;</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">mem_univ</span><span class="w"> </span><span class="n">x</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Fintype.card</span> <span class="pre">&#945;</span></code> &#31561;&#20110;&#30456;&#24212;&#26377;&#38480;&#38598;&#21512;&#30340;&#22522;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fintype.card</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">Finset.univ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="bp">.</span><span class="n">card</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#24050;&#32463;&#35265;&#36807;&#26377;&#38480;&#31867;&#22411;&#30340;&#19968;&#20010;&#21407;&#22411;&#20363;&#23376;&#65292;&#21363;&#23545;&#27599;&#20010; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#30340;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">Fin</span> <span class="pre">n</span></code>&#12290;
Lean &#35782;&#21035;&#20986;&#26377;&#38480;&#31867;&#22411;&#22312;&#20687;&#31215;&#36816;&#31639;&#36825;&#26679;&#30340;&#36816;&#31639;&#19979;&#26159;&#23553;&#38381;&#30340;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fintype.card</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fintype.card</span><span class="w"> </span><span class="o">((</span><span class="n">Fin</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="mi">3</span><span class="o">))</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Finset</span> <span class="pre">&#945;</span></code> &#30340;&#20219;&#20309;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#37117;&#21487;&#20197;&#24378;&#21046;&#36716;&#25442;&#20026;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">(&#8593;s</span> <span class="pre">:</span> <span class="pre">Finset</span> <span class="pre">&#945;)</span></code>&#65292;
&#21363;&#21253;&#21547;&#22312; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#20803;&#32032;&#30340;&#23376;&#31867;&#22411;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8593;</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">{</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">//</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">}</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fintype.card</span><span class="w"> </span><span class="bp">&#8593;</span><span class="n">s</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">s.card</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
</pre></div>
</div>
<p>Lean &#21644; Mathlib &#20351;&#29992; <em>&#31867;&#22411;&#31867;&#25512;&#26029;</em> &#26469;&#36861;&#36394;&#26377;&#38480;&#31867;&#22411;&#19978;&#30340;&#38468;&#21152;&#32467;&#26500;&#65292;
&#21363;&#21253;&#21547;&#25152;&#26377;&#20803;&#32032;&#30340;&#36890;&#29992;&#26377;&#38480;&#38598;&#21512;&#12290;
&#25442;&#21477;&#35805;&#35828;&#65292;&#20320;&#21487;&#20197;&#23558;&#26377;&#38480;&#31867;&#22411;&#30475;&#20316;&#26159;&#37197;&#22791;&#20102;&#39069;&#22806;&#25968;&#25454;&#30340;&#20195;&#25968;&#32467;&#26500;&#12290;
<a class="reference internal" href="C07_Structures.html#structures"><span class="std std-numref">&#31532; 7 &#31456;</span></a> &#35299;&#37322;&#20102;&#36825;&#26159;&#22914;&#20309;&#24037;&#20316;&#30340;&#12290;</p>
</section>
<section id="counting-arguments">
<span id="id3"></span><h2><span class="section-number">6.2. </span>&#35745;&#25968;&#35770;&#35777;<a class="headerlink" href="#counting-arguments" title="Link to this heading">&#61633;</a></h2>
<p>&#35745;&#25968;&#30340;&#33402;&#26415;&#26159;&#32452;&#21512;&#23398;&#30340;&#26680;&#24515;&#37096;&#20998;&#12290;
Mathlib &#21253;&#21547;&#20102;&#20960;&#20010;&#29992;&#20110;&#35745;&#25968;&#26377;&#38480;&#38598;&#21512;&#20803;&#32032;&#30340;&#22522;&#26412;&#24658;&#31561;&#24335;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Finset</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">DecidableEq</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#215;&#738;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">#</span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_product</span><span class="o">]</span>
<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#215;&#738;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">#</span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">#</span><span class="n">t</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8745;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_union</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Disjoint</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">#</span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_union_of_disjoint</span><span class="w"> </span><span class="n">h</span><span class="o">]</span>
<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Disjoint</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">#</span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">h</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Function.Injective</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s.image</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_image_of_injective</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">h</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Set.InjOn</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s.image</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="n">s</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_image_of_injOn</span><span class="w"> </span><span class="n">h</span><span class="o">]</span>
</pre></div>
</div>
<p>&#25171;&#24320; <code class="docutils literal notranslate"><span class="pre">Finset</span></code> &#21629;&#21517;&#31354;&#38388;&#20801;&#35768;&#25105;&#20204;&#20351;&#29992;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">#s</span></code> &#34920;&#31034; <code class="docutils literal notranslate"><span class="pre">s.card</span></code>&#65292;
&#20197;&#21450;&#20351;&#29992;&#31616;&#21270;&#30340;&#21517;&#31216;&#22914; <cite>card_union</cite> &#31561;&#12290;</p>
<p>Mathlib &#20063;&#21487;&#20197;&#35745;&#25968;&#26377;&#38480;&#31867;&#22411;&#30340;&#20803;&#32032;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Fintype</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#945;</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype</span><span class="w"> </span><span class="n">&#946;</span><span class="o">]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8853;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">card</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="bp">^</span><span class="n">n</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">}</span><span class="w"> </span><span class="o">{</span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">Fintype</span><span class="w"> </span><span class="o">(</span><span class="n">&#947;</span><span class="w"> </span><span class="n">i</span><span class="o">)]</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">((</span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8719;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="n">&#947;</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>

<span class="kd">example</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="bp">&#931;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="n">&#947;</span><span class="w"> </span><span class="n">i</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
</pre></div>
</div>
<p>&#24403; <code class="docutils literal notranslate"><span class="pre">Fintype</span></code> &#21629;&#21517;&#31354;&#38388;&#26410;&#25171;&#24320;&#26102;&#65292;&#25105;&#20204;&#24517;&#39035;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">Fintype.card</span></code> &#32780;&#19981;&#26159; <cite>card</cite>&#12290;</p>
<p>&#20197;&#19979;&#26159;&#35745;&#31639;&#26377;&#38480;&#38598;&#21512;&#22522;&#25968;&#30340;&#20363;&#23376;&#65292;&#21363; <cite>range n</cite> &#19982; <cite>range n</cite> &#30340;&#19968;&#20010;&#21103;&#26412;&#65288;&#24050;&#21521;&#21491;&#20559;&#31227;&#36229;&#36807; <cite>n</cite>&#65289;&#30340;&#24182;&#38598;&#12290;
&#36825;&#20010;&#35745;&#31639;&#38656;&#35201;&#35777;&#26126;&#24182;&#38598;&#20013;&#30340;&#20004;&#20010;&#38598;&#21512;&#26159;&#19981;&#30456;&#20132;&#30340;&#65307;
&#35777;&#26126;&#30340;&#31532;&#19968;&#34892;&#20135;&#29983;&#20102;&#21103;&#26465;&#20214; <code class="docutils literal notranslate"><span class="pre">Disjoint</span> <span class="pre">(range</span> <span class="pre">n)</span> <span class="pre">(image</span> <span class="pre">(fun</span> <span class="pre">i</span> <span class="pre">&#8614;</span> <span class="pre">m</span> <span class="pre">+</span> <span class="pre">i)</span> <span class="pre">(range</span> <span class="pre">n))</span></code>&#65292;
&#36825;&#22312;&#35777;&#26126;&#30340;&#26411;&#23614;&#24471;&#21040;&#20102;&#24314;&#31435;&#12290;
<code class="docutils literal notranslate"><span class="pre">Disjoint</span></code> &#35859;&#35789;&#36807;&#20110;&#19968;&#33324;&#65292;&#26080;&#27861;&#30452;&#25509;&#23545;&#25105;&#20204;&#26377;&#29992;&#65292;&#20294;&#23450;&#29702; <code class="docutils literal notranslate"><span class="pre">disjoint_iff_ne</span></code>
&#23558;&#23427;&#36716;&#25442;&#20026;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#30340;&#24418;&#24335;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">Disjoint</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8805;</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">card</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">image</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">i</span><span class="o">))</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_union_of_disjoint</span><span class="o">,</span><span class="w"> </span><span class="n">card_range</span><span class="o">,</span><span class="w"> </span><span class="n">card_image_of_injective</span><span class="o">,</span><span class="w"> </span><span class="n">card_range</span><span class="o">]</span><span class="bp">;</span><span class="w"> </span><span class="n">omega</span>
<span class="w">  </span><span class="bp">.</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">add_right_injective</span>
<span class="w">  </span><span class="bp">.</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">disjoint_iff_ne</span><span class="o">]</span><span class="bp">;</span><span class="w"> </span><span class="n">omega</span>
</pre></div>
</div>
<p>&#22312;&#36825;&#19968;&#33410;&#20013;&#65292;<code class="docutils literal notranslate"><span class="pre">omega</span></code> &#23558;&#26159;&#25105;&#20204;&#22788;&#29702;&#31639;&#26415;&#35745;&#31639;&#21644;&#19981;&#31561;&#24335;&#30340;&#20027;&#21147;&#24037;&#20855;&#12290;</p>
<p>&#36825;&#37324;&#26377;&#19968;&#20010;&#26356;&#26377;&#36259;&#30340;&#20363;&#23376;&#12290;&#32771;&#34385; <span class="math notranslate nohighlight">\(\{0, \ldots, n\} \times \{0, \ldots, n\}\)</span> &#30340;&#23376;&#38598;&#65292;
&#23427;&#30001;&#28385;&#36275; <span class="math notranslate nohighlight">\(i &lt; j\)</span> &#30340;&#23545; <span class="math notranslate nohighlight">\((i, j)\)</span> &#32452;&#25104;&#12290;&#22914;&#26524;&#20320;&#23558;&#36825;&#20123;&#30475;&#20316;&#22352;&#26631;&#24179;&#38754;&#20013;&#30340;&#26684;&#28857;&#65292;
&#23427;&#20204;&#26500;&#25104;&#20102;&#39030;&#28857;&#20026; <span class="math notranslate nohighlight">\((0, 0)\)</span> &#21644; <span class="math notranslate nohighlight">\((n, n)\)</span> &#30340;&#27491;&#26041;&#24418;&#30340;&#19978;&#19977;&#35282;&#24418;&#65292;
&#19981;&#21253;&#25324;&#23545;&#35282;&#32447;&#12290;&#23436;&#25972;&#27491;&#26041;&#24418;&#30340;&#22522;&#25968;&#26159; <span class="math notranslate nohighlight">\((n + 1)^2\)</span>&#65292;&#21435;&#25481;&#23545;&#35282;&#32447;&#30340;&#22823;&#23567;&#24182;&#23558;&#32467;&#26524;&#20943;&#21322;&#65292;
&#26174;&#31034;&#19977;&#35282;&#24418;&#30340;&#22522;&#25968;&#26159; <span class="math notranslate nohighlight">\(n (n + 1) / 2\)</span>&#12290;</p>
<p>&#25110;&#32773;&#65292;&#25105;&#20204;&#27880;&#24847;&#21040;&#19977;&#35282;&#24418;&#30340;&#34892;&#30340;&#22823;&#23567;&#26159; <span class="math notranslate nohighlight">\(0, 1, \ldots, n\)</span>&#65292;
&#25152;&#20197;&#22522;&#25968;&#26159;&#21069; <span class="math notranslate nohighlight">\(n\)</span> &#20010;&#33258;&#28982;&#25968;&#30340;&#21644;&#12290;&#19979;&#38754;&#35777;&#26126;&#30340;&#31532;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">have</span></code>
&#23558;&#19977;&#35282;&#24418;&#25551;&#36848;&#20026;&#34892;&#30340;&#24182;&#38598;&#65292;&#20854;&#20013;&#31532; <span class="math notranslate nohighlight">\(j\)</span> &#34892;&#30001;&#19982; <span class="math notranslate nohighlight">\(j\)</span> &#37197;&#23545;&#30340;&#25968;&#23383; <span class="math notranslate nohighlight">\(0, 1, ..., j - 1\)</span> &#32452;&#25104;&#12290;
&#22312;&#19979;&#38754;&#30340;&#35777;&#26126;&#20013;&#65292;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">(.,</span> <span class="pre">j)</span></code> &#32553;&#20889;&#20102;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">i</span> <span class="pre">&#8614;</span> <span class="pre">(i,</span> <span class="pre">j)</span></code>&#12290;
&#35777;&#26126;&#30340;&#20854;&#20313;&#37096;&#20998;&#21482;&#26159;&#26377;&#38480;&#38598;&#21512;&#22522;&#25968;&#30340;&#35745;&#31639;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">triangle</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="o">(</span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">{</span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">&#215;&#738;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">}</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">biUnion</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="bp">&#8614;</span><span class="w"> </span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="n">j</span><span class="o">)</span><span class="bp">.</span><span class="n">image</span><span class="w"> </span><span class="o">(</span><span class="bp">.</span><span class="o">,</span><span class="w"> </span><span class="n">j</span><span class="o">))</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">ext</span><span class="w"> </span><span class="n">p</span>
<span class="w">    </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">triangle</span><span class="o">,</span><span class="w"> </span><span class="n">mem_filter</span><span class="o">,</span><span class="w"> </span><span class="n">mem_product</span><span class="o">,</span><span class="w"> </span><span class="n">mem_range</span><span class="o">,</span><span class="w"> </span><span class="n">mem_biUnion</span><span class="o">,</span><span class="w"> </span><span class="n">mem_image</span><span class="o">]</span>
<span class="w">    </span><span class="n">constructor</span>
<span class="w">    </span><span class="bp">.</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;&#10216;</span><span class="n">hp1</span><span class="o">,</span><span class="w"> </span><span class="n">hp2</span><span class="o">&#10217;,</span><span class="w"> </span><span class="n">hp3</span><span class="o">&#10217;</span>
<span class="w">      </span><span class="n">use</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="n">hp2</span><span class="o">,</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">hp3</span>
<span class="w">    </span><span class="bp">.</span><span class="w"> </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">p1</span><span class="o">,</span><span class="w"> </span><span class="n">hp1</span><span class="o">,</span><span class="w"> </span><span class="n">p2</span><span class="o">,</span><span class="w"> </span><span class="n">hp2</span><span class="o">,</span><span class="w"> </span><span class="n">rfl</span><span class="o">&#10217;</span>
<span class="w">      </span><span class="n">omega</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">this</span><span class="o">,</span><span class="w"> </span><span class="n">card_biUnion</span><span class="o">]</span><span class="bp">;</span><span class="w"> </span><span class="n">swap</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="c1">-- take care of disjointness first</span>
<span class="w">    </span><span class="n">intro</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">xney</span>
<span class="w">    </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">disjoint_iff_ne</span><span class="o">,</span><span class="w"> </span><span class="n">xney</span><span class="o">]</span>
<span class="w">  </span><span class="c1">-- continue the calculation</span>
<span class="w">  </span><span class="n">transitivity</span><span class="w"> </span><span class="o">(</span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">),</span><span class="w"> </span><span class="n">i</span><span class="o">)</span>
<span class="w">  </span><span class="bp">&#183;</span><span class="w"> </span><span class="n">congr</span><span class="bp">;</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="n">i</span>
<span class="w">    </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">card_image_of_injective</span><span class="o">,</span><span class="w"> </span><span class="n">card_range</span><span class="o">]</span>
<span class="w">    </span><span class="n">intros</span><span class="w"> </span><span class="n">i1</span><span class="w"> </span><span class="n">i2</span><span class="bp">;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">sum_range_id</span><span class="o">]</span><span class="bp">;</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#19979;&#38754;&#30340;&#35777;&#26126;&#21464;&#20307;&#20351;&#29992;&#26377;&#38480;&#31867;&#22411;&#32780;&#19981;&#26159;&#26377;&#38480;&#38598;&#21512;&#36827;&#34892;&#35745;&#31639;&#12290;
&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8771;</span> <span class="pre">&#946;</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> &#20043;&#38388;&#30340;&#31561;&#20215;&#31867;&#22411;&#65292;
&#30001;&#27491;&#21521;&#26144;&#23556;&#12289;&#21453;&#21521;&#26144;&#23556;&#20197;&#21450;&#35777;&#26126;&#36825;&#20004;&#20010;&#26144;&#23556;&#20114;&#20026;&#36870;&#26144;&#23556;&#30340;&#35777;&#26126;&#32452;&#25104;&#12290;
&#35777;&#26126;&#20013;&#30340;&#31532;&#19968;&#20010; <code class="docutils literal notranslate"><span class="pre">have</span></code> &#26174;&#31034; <code class="docutils literal notranslate"><span class="pre">triangle</span> <span class="pre">n</span></code> &#31561;&#20215;&#20110; <code class="docutils literal notranslate"><span class="pre">Fin</span> <span class="pre">i</span></code> &#30340;&#19981;&#30456;&#20132;&#24182;&#38598;&#65292;
&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">i</span></code> &#22312; <code class="docutils literal notranslate"><span class="pre">Fin</span> <span class="pre">(n</span> <span class="pre">+</span> <span class="pre">1)</span></code> &#19978;&#21464;&#21270;&#12290;&#26377;&#36259;&#30340;&#26159;&#65292;&#27491;&#21521;&#20989;&#25968;&#21644;&#21453;&#21521;&#20989;&#25968;&#26159;&#29992;&#31574;&#30053;&#26500;&#36896;&#30340;&#65292;
&#32780;&#19981;&#26159;&#26174;&#24335;&#20889;&#20986;&#30340;&#12290;&#30001;&#20110;&#23427;&#20204;&#21482;&#26159;&#31227;&#21160;&#25968;&#25454;&#21644;&#20449;&#24687;&#65292;<code class="docutils literal notranslate"><span class="pre">rfl</span></code> &#24314;&#31435;&#20102;&#23427;&#20204;&#26159;&#20114;&#36870;&#30340;&#12290;</p>
<p>&#20043;&#21518;&#65292;<code class="docutils literal notranslate"><span class="pre">rw</span> <span class="pre">[&#8592;Fintype.card_coe]</span></code> &#23558; <code class="docutils literal notranslate"><span class="pre">#(triangle</span> <span class="pre">n)</span></code> &#37325;&#20889;&#20026;&#23376;&#31867;&#22411;
<code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">x</span> <span class="pre">//</span> <span class="pre">x</span> <span class="pre">&#8712;</span> <span class="pre">triangle</span> <span class="pre">n</span> <span class="pre">}</span></code> &#30340;&#22522;&#25968;&#65292;&#35777;&#26126;&#30340;&#20854;&#20313;&#37096;&#20998;&#26159;&#35745;&#31639;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8771;</span><span class="w"> </span><span class="bp">&#931;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">),</span><span class="w"> </span><span class="n">Fin</span><span class="w"> </span><span class="n">i.val</span><span class="w"> </span><span class="o">:=</span>
<span class="w">    </span><span class="o">{</span><span class="w"> </span><span class="n">toFun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">        </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">j</span><span class="o">&#10217;,</span><span class="w"> </span><span class="n">hp</span><span class="o">&#10217;</span>
<span class="w">        </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">triangle</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">hp</span>
<span class="w">        </span><span class="n">exact</span><span class="w"> </span><span class="o">&#10216;&#10216;</span><span class="n">j</span><span class="o">,</span><span class="w"> </span><span class="n">hp</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">2</span><span class="o">&#10217;,</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">hp</span><span class="bp">.</span><span class="mi">2</span><span class="o">&#10217;&#10217;</span>
<span class="w">      </span><span class="n">invFun</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">        </span><span class="n">rintro</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">i</span><span class="o">,</span><span class="w"> </span><span class="n">j</span><span class="o">&#10217;</span>
<span class="w">        </span><span class="n">use</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">j</span><span class="o">,</span><span class="w"> </span><span class="n">i</span><span class="o">&#10217;</span>
<span class="w">        </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">triangle</span><span class="o">]</span>
<span class="w">        </span><span class="n">exact</span><span class="w"> </span><span class="n">j.isLt.trans</span><span class="w"> </span><span class="n">i.isLt</span>
<span class="w">      </span><span class="n">left_inv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">i</span><span class="bp">;</span><span class="w"> </span><span class="n">rfl</span>
<span class="w">      </span><span class="n">right_inv</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">i</span><span class="bp">;</span><span class="w"> </span><span class="n">rfl</span><span class="w"> </span><span class="o">}</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="bp">&#8592;</span><span class="n">Fintype.card_coe</span><span class="o">]</span>
<span class="w">  </span><span class="n">trans</span><span class="bp">;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="o">(</span><span class="n">Fintype.card_congr</span><span class="w"> </span><span class="n">this</span><span class="o">)</span>
<span class="w">  </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">Fintype.card_sigma</span><span class="o">,</span><span class="w"> </span><span class="n">sum_fin_eq_sum_range</span><span class="o">]</span>
<span class="w">  </span><span class="n">convert</span><span class="w"> </span><span class="n">Finset.sum_range_id</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">  </span><span class="n">simp_all</span>
</pre></div>
</div>
<p>&#36825;&#37324;&#26159;&#21478;&#19968;&#31181;&#26041;&#27861;&#12290;&#19979;&#38754;&#35777;&#26126;&#30340;&#31532;&#19968;&#34892;&#23558;&#38382;&#39064;&#31616;&#21270;&#20026;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">#(triangle</span> <span class="pre">n)</span> <span class="pre">=</span> <span class="pre">(n</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">n</span></code>&#12290;
&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#35777;&#26126;&#19977;&#35282;&#24418;&#30340;&#20004;&#20010;&#21103;&#26412;&#24688;&#22909;&#22635;&#20805;&#30697;&#24418; <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">n</span> <span class="pre">&#215;&#738;</span> <span class="pre">range</span> <span class="pre">(n</span> <span class="pre">+</span> <span class="pre">1)</span></code> &#26469;&#20570;&#21040;&#36825;&#19968;&#28857;&#12290;
&#20316;&#20026;&#32451;&#20064;&#65292;&#30475;&#30475;&#20320;&#33021;&#21542;&#22635;&#20889;&#35745;&#31639;&#30340;&#27493;&#39588;&#12290;
&#22312;&#35299;&#31572;&#20013;&#65292;&#25105;&#20204;&#22312;&#20498;&#25968;&#31532;&#20108;&#27493;&#20013;&#24191;&#27867;&#20381;&#36182; <code class="docutils literal notranslate"><span class="pre">omega</span></code>&#65292;
&#20294;&#19981;&#24184;&#30340;&#26159;&#65292;&#25105;&#20204;&#24517;&#39035;&#25163;&#21160;&#23436;&#25104;&#30456;&#24403;&#22810;&#30340;&#24037;&#20316;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">apply</span><span class="w"> </span><span class="n">Nat.eq_div_of_mul_eq_right</span><span class="w"> </span><span class="o">(</span><span class="kd">by</span><span class="w"> </span><span class="n">norm_num</span><span class="o">)</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">(</span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span>
<span class="w">  </span><span class="k">calc</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span>
<span class="w">      </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="gr">sorry</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|&gt;.</span><span class="n">image</span><span class="w"> </span><span class="n">turn</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="gr">sorry</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#215;&#738;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">))</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="gr">sorry</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#20320;&#21487;&#20197;&#35828;&#26381;&#33258;&#24049;&#65292;&#22914;&#26524;&#25105;&#20204;&#23558; <code class="docutils literal notranslate"><span class="pre">triangle</span></code> &#23450;&#20041;&#20013;&#30340; <code class="docutils literal notranslate"><span class="pre">n</span></code> &#26367;&#25442;&#20026; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code>&#65292;
&#23558; <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> &#26367;&#25442;&#20026; <code class="docutils literal notranslate"><span class="pre">&#8804;</span></code>&#65292;&#25105;&#20204;&#20250;&#24471;&#21040;&#21516;&#26679;&#30340;&#19977;&#35282;&#24418;&#65292;&#21482;&#26159;&#21521;&#19979;&#24179;&#31227;&#20102;&#12290;
&#19979;&#38754;&#30340;&#32451;&#20064;&#35201;&#27714;&#20320;&#20351;&#29992;&#36825;&#20010;&#20107;&#23454;&#26469;&#35777;&#26126;&#20004;&#20010;&#19977;&#35282;&#24418;&#26377;&#30456;&#21516;&#30340;&#22823;&#23567;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">triangle&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="o">(</span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">{</span><span class="n">p</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#215;&#738;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="o">}</span>

<span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle&#39;</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">triangle</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#35753;&#25105;&#20204;&#29992;&#19968;&#20010;&#26469;&#33258; Bhavik Mehta &#22312; 2023 &#24180; <em>Lean for the Curious Mathematician</em> &#19978;
<a class="reference external" href="https://www.youtube.com/watch?v=_cJctOIXWE4&amp;list=PLlF-CfQhukNn7xEbfL38eLgkveyk9_myQ&amp;index=8&amp;t=2737s&amp;ab_channel=leanprovercommunity">&#20851;&#20110;&#32452;&#21512;&#23398;&#30340;&#25945;&#31243;</a> &#20013;&#30340;&#19968;&#20010;&#20363;&#23376;&#21644;&#19968;&#20010;&#32451;&#20064;&#26469;&#32467;&#26463;&#36825;&#19968;&#33410;&#12290;
&#20551;&#35774;&#25105;&#20204;&#26377;&#19968;&#20010;&#20108;&#37096;&#22270;&#65292;&#39030;&#28857;&#38598;&#20026; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">t</span></code>&#65292;&#20351;&#24471;&#23545;&#20110; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#20013;&#30340;&#27599;&#20010; <code class="docutils literal notranslate"><span class="pre">a</span></code>&#65292;
&#33267;&#23569;&#26377;&#19977;&#26465;&#36793;&#31163;&#24320; <code class="docutils literal notranslate"><span class="pre">a</span></code>&#65292;&#23545;&#20110; <code class="docutils literal notranslate"><span class="pre">t</span></code> &#20013;&#30340;&#27599;&#20010; <code class="docutils literal notranslate"><span class="pre">b</span></code>&#65292;&#26368;&#22810;&#26377;&#19968;&#26465;&#36793;&#36827;&#20837; <code class="docutils literal notranslate"><span class="pre">b</span></code>&#12290;
&#37027;&#20040;&#22270;&#20013;&#30340;&#36793;&#30340;&#24635;&#25968;&#33267;&#23569;&#26159; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#22522;&#25968;&#30340;&#19977;&#20493;&#65292;&#26368;&#22810;&#26159; <code class="docutils literal notranslate"><span class="pre">t</span></code> &#30340;&#22522;&#25968;&#65292;
&#30001;&#27492;&#21487;&#24471; <code class="docutils literal notranslate"><span class="pre">s</span></code> &#30340;&#22522;&#25968;&#30340;&#19977;&#20493;&#26368;&#22810;&#26159; <code class="docutils literal notranslate"><span class="pre">t</span></code> &#30340;&#22522;&#25968;&#12290;
&#19979;&#38754;&#30340;&#23450;&#29702;&#23454;&#29616;&#20102;&#36825;&#20010;&#35770;&#35777;&#65292;&#20854;&#20013;&#25105;&#20204;&#20351;&#29992;&#20851;&#31995; <code class="docutils literal notranslate"><span class="pre">r</span></code> &#26469;&#34920;&#31034;&#22270;&#30340;&#36793;&#12290;
&#35777;&#26126;&#26159;&#19968;&#20010;&#20248;&#38597;&#30340;&#35745;&#31639;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">Classical</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Nat</span><span class="o">)</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">doubleCounting</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">s</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">r</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Prop</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">h_left</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">#</span><span class="o">{</span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">})</span>
<span class="w">    </span><span class="o">(</span><span class="n">h_right</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="bp">#</span><span class="o">{</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">}</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">calc</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">s</span><span class="o">)</span>
<span class="w">      </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w">                               </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="o">[</span><span class="n">sum_const_nat</span><span class="o">,</span><span class="w"> </span><span class="n">mul_comm</span><span class="o">]</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">#</span><span class="o">({</span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">})</span><span class="w">              </span><span class="o">:=</span><span class="w"> </span><span class="n">sum_le_sum</span><span class="w"> </span><span class="n">h_left</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="o">,</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">sum_comm</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="bp">#</span><span class="o">({</span><span class="n">a</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">})</span><span class="w">              </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">&#8721;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w">                               </span><span class="o">:=</span><span class="w"> </span><span class="n">sum_le_sum</span><span class="w"> </span><span class="n">h_right</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">t</span><span class="o">)</span><span class="w">                                     </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
</pre></div>
</div>
<p>&#19979;&#38754;&#30340;&#32451;&#20064;&#20063;&#21462;&#33258; Mehta &#30340;&#25945;&#31243;&#12290;&#20551;&#35774; <code class="docutils literal notranslate"><span class="pre">A</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">range</span> <span class="pre">(2</span> <span class="pre">*</span> <span class="pre">n)</span></code> &#30340;&#19968;&#20010;&#26377; <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code> &#20010;&#20803;&#32032;&#30340;&#23376;&#38598;&#12290;
&#24456;&#23481;&#26131;&#30475;&#20986; <code class="docutils literal notranslate"><span class="pre">A</span></code> &#24517;&#39035;&#21253;&#21547;&#20004;&#20010;&#36830;&#32493;&#30340;&#25972;&#25968;&#65292;&#22240;&#27492;&#21253;&#21547;&#20004;&#20010;&#20114;&#36136;&#30340;&#20803;&#32032;&#12290;
&#22914;&#26524;&#20320;&#35266;&#30475;&#25945;&#31243;&#65292;&#20320;&#20250;&#30475;&#21040;&#33457;&#36153;&#20102;&#30456;&#24403;&#22823;&#30340;&#21162;&#21147;&#26469;&#24314;&#31435;&#20197;&#19979;&#20107;&#23454;&#65292;
&#29616;&#22312; <code class="docutils literal notranslate"><span class="pre">omega</span></code> &#21487;&#20197;&#33258;&#21160;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8800;</span><span class="w"> </span><span class="n">k</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">&#8744;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">omega</span>
</pre></div>
</div>
<p>Mehta &#32451;&#20064;&#30340;&#35299;&#31572;&#20351;&#29992;&#20102;&#40509;&#31548;&#21407;&#29702;&#65292;&#20197; <code class="docutils literal notranslate"><span class="pre">exists_lt_card_fiber_of_mul_lt_card_of_maps_to</span></code> &#30340;&#24418;&#24335;&#65292;
&#26469;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">A</span></code> &#20013;&#23384;&#22312;&#20004;&#20010;&#19981;&#21516;&#30340;&#20803;&#32032; <code class="docutils literal notranslate"><span class="pre">m</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">k</span></code> &#20351;&#24471; <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">/</span> <span class="pre">2</span> <span class="pre">=</span> <span class="pre">k</span> <span class="pre">/</span> <span class="pre">2</span></code>&#12290;
&#30475;&#30475;&#20320;&#33021;&#21542;&#23436;&#25104;&#36825;&#20010;&#20107;&#23454;&#30340;&#35777;&#26126;&#65292;&#28982;&#21518;&#29992;&#23427;&#26469;&#23436;&#25104;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="w"> </span><span class="o">{</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">hA</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">#</span><span class="o">(</span><span class="n">A</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">(</span><span class="n">hA&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="bp">&#8838;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">n</span><span class="o">))</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="o">,</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="o">,</span><span class="w"> </span><span class="n">Nat.Coprime</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8707;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">range</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="bp">#</span><span class="o">({</span><span class="n">u</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="bp">|</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">t</span><span class="o">})</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">apply</span><span class="w"> </span><span class="n">exists_lt_card_fiber_of_mul_lt_card_of_maps_to</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">    </span><span class="bp">&#183;</span><span class="w"> </span><span class="gr">sorry</span>
<span class="w">  </span><span class="n">rcases</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="o">&#10216;</span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">ht</span><span class="o">,</span><span class="w"> </span><span class="n">ht&#39;</span><span class="o">&#10217;</span>
<span class="w">  </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">one_lt_card</span><span class="o">,</span><span class="w"> </span><span class="n">mem_filter</span><span class="o">]</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">ht&#39;</span>
<span class="w">  </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
<section id="inductively-defined-types">
<span id="id5"></span><h2><span class="section-number">6.3. </span>&#24402;&#32435;&#23450;&#20041;&#30340;&#31867;&#22411;<a class="headerlink" href="#inductively-defined-types" title="Link to this heading">&#61633;</a></h2>
<p>Lean &#30340;&#22522;&#30784;&#20801;&#35768;&#25105;&#20204;&#23450;&#20041;&#24402;&#32435;&#31867;&#22411;&#65292;&#21363;&#20174;&#24213;&#21521;&#19978;&#29983;&#25104;&#23454;&#20363;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;
&#20363;&#22914;&#65292;&#20803;&#32032;&#31867;&#22411;&#20026; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#21015;&#34920;&#30340;&#25968;&#25454;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">&#945;</span></code> &#26159;&#36890;&#36807;&#20174;&#31354;&#21015;&#34920; <code class="docutils literal notranslate"><span class="pre">nil</span></code> &#24320;&#22987;&#29983;&#25104;&#30340;&#65292;
&#24182;&#19988;&#36890;&#36807;&#20381;&#27425;&#23558;&#20803;&#32032;&#28155;&#21152;&#21040;&#21015;&#34920;&#30340;&#21069;&#38754;&#12290;
&#19979;&#38754;&#25105;&#20204;&#23558;&#23450;&#20041;&#19968;&#20010;&#20108;&#21449;&#26641;&#30340;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">BinTree</span></code>&#65292;&#20854;&#20803;&#32032;&#26159;&#36890;&#36807;&#20174;&#31354;&#26641;&#24320;&#22987;&#29983;&#25104;&#30340;&#65292;
&#28982;&#21518;&#36890;&#36807;&#23558;&#26032;&#33410;&#28857;&#38468;&#21152;&#21040;&#20004;&#20010;&#29616;&#26377;&#26641;&#26469;&#26500;&#24314;&#26032;&#26641;&#12290;</p>
<p>&#22312; Lean &#20013;&#65292;&#21487;&#20197;&#23450;&#20041;&#23545;&#35937;&#20026;&#26080;&#38480;&#30340;&#24402;&#32435;&#31867;&#22411;&#65292;&#22914;&#21487;&#25968;&#20998;&#25903;&#30340;&#33391;&#22522;&#26641;&#12290;
&#20294;&#26159;&#65292;&#26377;&#38480;&#30340;&#24402;&#32435;&#23450;&#20041;&#36890;&#24120;&#29992;&#20110;&#31163;&#25955;&#25968;&#23398;&#65292;
&#29305;&#21035;&#26159;&#22312;&#19982;&#35745;&#31639;&#26426;&#31185;&#23398;&#30456;&#20851;&#30340;&#31163;&#25955;&#25968;&#23398;&#20998;&#25903;&#20013;&#12290;
Lean &#19981;&#20165;&#25552;&#20379;&#20102;&#23450;&#20041;&#36825;&#31181;&#31867;&#22411;&#30340;&#26041;&#27861;&#65292;&#36824;&#25552;&#20379;&#20102;&#24402;&#32435;&#21644;&#36882;&#24402;&#23450;&#20041;&#30340;&#21407;&#29702;&#12290;
&#20363;&#22914;&#65292;&#25968;&#25454;&#31867;&#22411; <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">&#945;</span></code> &#26159;&#24402;&#32435;&#23450;&#20041;&#30340;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">MyListSpace</span>

<span class="kd">inductive</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">nil</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">end</span><span class="w"> </span><span class="n">MyListSpace</span>
</pre></div>
</div>
<p>&#24402;&#32435;&#23450;&#20041;&#35828; <code class="docutils literal notranslate"><span class="pre">List</span> <span class="pre">&#945;</span></code> &#30340;&#27599;&#20010;&#20803;&#32032;&#35201;&#20040;&#26159; <code class="docutils literal notranslate"><span class="pre">nil``&#65288;&#31354;&#21015;&#34920;&#65289;&#65292;</span>
<span class="pre">&#35201;&#20040;&#26159;</span> <span class="pre">``cons</span> <span class="pre">a</span> <span class="pre">as</span></code>&#65292;&#20854;&#20013; <code class="docutils literal notranslate"><span class="pre">a</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#20803;&#32032;&#65292;<code class="docutils literal notranslate"><span class="pre">as</span></code> &#26159; <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> &#30340;&#20803;&#32032;&#30340;&#21015;&#34920;&#12290;
&#26500;&#36896;&#23376;&#27491;&#30830;&#22320;&#21629;&#21517;&#20026; <code class="docutils literal notranslate"><span class="pre">List.nil</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">List.cons</span></code>&#65292;
&#20294;&#24403; <code class="docutils literal notranslate"><span class="pre">List</span></code> &#21629;&#21517;&#31354;&#38388;&#25171;&#24320;&#26102;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#26356;&#30701;&#30340;&#35760;&#27861;&#12290;
&#24403; <code class="docutils literal notranslate"><span class="pre">List</span></code> &#21629;&#21517;&#31354;&#38388; <em>&#26410;</em> &#25171;&#24320;&#26102;&#65292;&#20320;&#21487;&#20197;&#22312; <code class="docutils literal notranslate"><span class="pre">Lean</span></code> &#26399;&#26395;&#21015;&#34920;&#30340;&#20219;&#20309;&#22320;&#26041;&#20889; <code class="docutils literal notranslate"><span class="pre">.nil</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">.cons</span> <span class="pre">a</span> <span class="pre">as</span></code>&#65292;
Lean &#20250;&#33258;&#21160;&#25554;&#20837; <code class="docutils literal notranslate"><span class="pre">List</span></code> &#38480;&#23450;&#31526;&#12290;
&#22312;&#36825;&#19968;&#33410;&#20013;&#65292;&#25105;&#20204;&#23558;&#25226;&#20020;&#26102;&#23450;&#20041;&#25918;&#22312;&#20687; <code class="docutils literal notranslate"><span class="pre">MyListSpace</span></code> &#36825;&#26679;&#30340;&#29420;&#31435;&#21629;&#21517;&#31354;&#38388;&#20013;&#65292;
&#20197;&#36991;&#20813;&#19982;&#26631;&#20934;&#24211;&#30340;&#20914;&#31361;&#12290;&#22312;&#20020;&#26102;&#21629;&#21517;&#31354;&#38388;&#22806;&#65292;&#25105;&#20204;&#22238;&#21040;&#20351;&#29992;&#26631;&#20934;&#24211;&#23450;&#20041;&#12290;</p>
<p>Lean &#20026; <code class="docutils literal notranslate"><span class="pre">nil</span></code> &#23450;&#20041;&#20102;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">[]</span></code>&#65292;&#20026; <code class="docutils literal notranslate"><span class="pre">cons</span></code> &#23450;&#20041;&#20102;&#35760;&#27861; <code class="docutils literal notranslate"><span class="pre">::</span></code>&#65292;
&#20320;&#21487;&#20197;&#20026; <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">::</span> <span class="pre">b</span> <span class="pre">::</span> <span class="pre">c</span> <span class="pre">::</span> <span class="pre">[]</span></code> &#20889; <code class="docutils literal notranslate"><span class="pre">[a,</span> <span class="pre">b,</span> <span class="pre">c]</span></code>&#12290;
append &#21644; map &#20989;&#25968;&#22914;&#19979;&#36882;&#24402;&#23450;&#20041;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="o">[],</span><span class="w">      </span><span class="n">bs</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">bs</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">as</span><span class="o">,</span><span class="w"> </span><span class="n">bs</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="o">(</span><span class="n">append</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">bs</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#946;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="o">[]</span><span class="w">      </span><span class="bp">=&gt;</span><span class="w"> </span><span class="o">[]</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">as</span>

<span class="k">#eval</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">]</span>
<span class="k">#eval</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">n</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">]</span>
</pre></div>
</div>
<p>&#27880;&#24847;&#26377;&#19968;&#20010;&#22522;&#26412;&#24773;&#20917;&#21644;&#19968;&#20010;&#36882;&#24402;&#24773;&#20917;&#12290;
&#22312;&#27599;&#31181;&#24773;&#20917;&#19979;&#65292;&#20004;&#20010;&#23450;&#20041;&#23376;&#21477;&#37117;&#25104;&#31435;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">nil_append</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">cons_append</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">bs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">append</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">as</span><span class="o">)</span><span class="w"> </span><span class="n">bs</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="o">(</span><span class="n">append</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">bs</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">map_nil</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">map_cons</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">map</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">as</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">append</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">map</span></code> &#22312;&#26631;&#20934;&#24211;&#20013;&#23450;&#20041;&#65292;<code class="docutils literal notranslate"><span class="pre">append</span> <span class="pre">as</span> <span class="pre">bs</span></code> &#21487;&#20197;&#20889;&#20316; <code class="docutils literal notranslate"><span class="pre">as</span> <span class="pre">++</span> <span class="pre">bs</span></code>&#12290;</p>
<p>Lean &#20801;&#35768;&#20320;&#25353;&#29031;&#23450;&#20041;&#30340;&#32467;&#26500;&#20889;&#20986;&#24402;&#32435;&#35777;&#26126;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="n">bs</span><span class="w"> </span><span class="n">cs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>

<span class="kn">open</span><span class="w"> </span><span class="n">List</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">append_nil</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="bp">++</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">as</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">rfl</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">cons_append</span><span class="o">,</span><span class="w"> </span><span class="n">append_nil</span><span class="w"> </span><span class="n">as</span><span class="o">]</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">map_map</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">map</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">as</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="bp">&#8728;</span><span class="w"> </span><span class="n">f</span><span class="o">)</span><span class="w"> </span><span class="n">as</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">rfl</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="o">[</span><span class="n">map_cons</span><span class="o">,</span><span class="w"> </span><span class="n">map_cons</span><span class="o">,</span><span class="w"> </span><span class="n">map_cons</span><span class="o">,</span><span class="w"> </span><span class="n">map_map</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">as</span><span class="o">]</span><span class="bp">;</span><span class="w"> </span><span class="n">rfl</span>
</pre></div>
</div>
<p>&#20320;&#20063;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">induction'</span></code> &#31574;&#30053;&#12290;</p>
<p>&#24403;&#28982;&#65292;&#36825;&#20123;&#23450;&#29702;&#24050;&#32463;&#22312;&#26631;&#20934;&#24211;&#20013;&#20102;&#12290;&#20316;&#20026;&#32451;&#20064;&#65292;
&#23581;&#35797;&#22312; <code class="docutils literal notranslate"><span class="pre">MyListSpace3</span></code> &#21629;&#21517;&#31354;&#38388;&#20013;&#23450;&#20041;&#19968;&#20010;&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">reverse``&#65288;&#20197;&#36991;&#20813;&#19982;&#26631;&#20934;&#30340;</span> <span class="pre">``List.reverse</span></code> &#20914;&#31361;&#65289;&#65292;
&#35813;&#20989;&#25968;&#21453;&#36716;&#21015;&#34920;&#12290;
&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">#eval</span> <span class="pre">reverse</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4,</span> <span class="pre">5]</span></code> &#26469;&#27979;&#35797;&#23427;&#12290;
<code class="docutils literal notranslate"><span class="pre">reverse</span></code> &#30340;&#26368;&#30452;&#25509;&#23450;&#20041;&#38656;&#35201;&#20108;&#27425;&#26102;&#38388;&#65292;&#20294;&#19981;&#35201;&#25285;&#24515;&#36825;&#20010;&#12290;
&#20320;&#21487;&#20197;&#36339;&#36716;&#21040;&#26631;&#20934;&#24211;&#20013; <code class="docutils literal notranslate"><span class="pre">List.reverse</span></code> &#30340;&#23450;&#20041;&#65292;&#30475;&#30475;&#32447;&#24615;&#26102;&#38388;&#30340;&#23454;&#29616;&#12290;
&#23581;&#35797;&#35777;&#26126; <code class="docutils literal notranslate"><span class="pre">reverse</span> <span class="pre">(as</span> <span class="pre">++</span> <span class="pre">bs)</span> <span class="pre">=</span> <span class="pre">reverse</span> <span class="pre">bs</span> <span class="pre">++</span> <span class="pre">reverse</span> <span class="pre">as</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">reverse</span> <span class="pre">(reverse</span> <span class="pre">as)</span> <span class="pre">=</span> <span class="pre">as</span></code>&#12290;
&#20320;&#21487;&#20197;&#20351;&#29992; <code class="docutils literal notranslate"><span class="pre">cons_append</span></code> &#21644; <code class="docutils literal notranslate"><span class="pre">append_assoc</span></code>&#65292;&#20294;&#20320;&#21487;&#33021;&#38656;&#35201;&#24819;&#20986;&#36741;&#21161;&#24341;&#29702;&#24182;&#35777;&#26126;&#23427;&#20204;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">reverse_append</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="n">bs</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="bp">++</span><span class="w"> </span><span class="n">bs</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="n">bs</span><span class="w"> </span><span class="bp">++</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="gr">sorry</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">reverse_reverse</span><span class="w"> </span><span class="o">(</span><span class="n">as</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">List</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">reverse</span><span class="w"> </span><span class="o">(</span><span class="n">reverse</span><span class="w"> </span><span class="n">as</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#21478;&#19968;&#20010;&#20363;&#23376;&#65292;&#32771;&#34385;&#20197;&#19979;&#20108;&#21449;&#26641;&#30340;&#24402;&#32435;&#23450;&#20041;&#65292;&#20197;&#21450;&#35745;&#31639;&#20108;&#21449;&#26641;&#22823;&#23567;&#21644;&#28145;&#24230;&#30340;&#20989;&#25968;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">inductive</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">node</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">BinTree</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">BinTree</span>

<span class="kd">def</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">empty</span><span class="w">    </span><span class="bp">=&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span>

<span class="kd">def</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">empty</span><span class="w">    </span><span class="bp">=&gt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">(</span><span class="n">depth</span><span class="w"> </span><span class="n">l</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">depth</span><span class="w"> </span><span class="n">r</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
<p>&#23558;&#31354;&#20108;&#21449;&#26641;&#35745;&#31639;&#20026;&#22823;&#23567;&#20026; 0 &#21644;&#28145;&#24230;&#20026; 0 &#30340;&#20108;&#21449;&#26641;&#26159;&#26041;&#20415;&#30340;&#12290;
&#22312;&#25991;&#29486;&#20013;&#65292;&#36825;&#31181;&#25968;&#25454;&#31867;&#22411;&#26377;&#26102;&#34987;&#31216;&#20026; <em>&#25193;&#23637;&#20108;&#21449;&#26641;</em>&#12290;
&#21253;&#21547;&#31354;&#26641;&#24847;&#21619;&#30528;&#65292;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#26641; <code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">empty</span> <span class="pre">(node</span> <span class="pre">empty</span> <span class="pre">empty)</span></code>&#65292;
&#23427;&#30001;&#19968;&#20010;&#26681;&#33410;&#28857;&#12289;&#19968;&#20010;&#31354;&#30340;&#24038;&#23376;&#26641;&#21644;&#19968;&#20010;&#30001;&#21333;&#20010;&#33410;&#28857;&#32452;&#25104;&#30340;&#21491;&#23376;&#26641;&#32452;&#25104;&#12290;</p>
<p>&#36825;&#37324;&#26159;&#19968;&#20010;&#20851;&#20110;&#22823;&#23567;&#21644;&#28145;&#24230;&#30340;&#37325;&#35201;&#19981;&#31561;&#24335;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">size_le</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span><span class="o">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="mi">2</span><span class="bp">^</span><span class="n">depth</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">empty</span><span class="w">    </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">Nat.zero_le</span><span class="w"> </span><span class="n">_</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span>
<span class="w">    </span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="o">[</span><span class="n">depth</span><span class="o">,</span><span class="w"> </span><span class="n">size</span><span class="o">]</span>
<span class="w">    </span><span class="k">calc</span><span class="w"> </span><span class="n">l.size</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">r.size</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="bp">&#8804;</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">l.depth</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">r.depth</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="n">gcongr</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="n">size_le</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="n">l.depth</span><span class="w"> </span><span class="n">r.depth</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="n">l.depth</span><span class="w"> </span><span class="n">r.depth</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="n">gcongr</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp</span>
<span class="w">    </span><span class="n">_</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="o">(</span><span class="n">max</span><span class="w"> </span><span class="n">l.depth</span><span class="w"> </span><span class="n">r.depth</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="bp">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">          </span><span class="k">have</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="bp">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">^</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="n">l.depth</span><span class="w"> </span><span class="n">r.depth</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">          </span><span class="n">omega</span>
</pre></div>
</div>
<p>&#23581;&#35797;&#35777;&#26126;&#19979;&#38754;&#30340;&#19981;&#31561;&#24335;&#65292;&#36825;&#30456;&#23545;&#23481;&#26131;&#20123;&#12290;
&#35760;&#20303;&#65292;&#22914;&#26524;&#20320;&#20687;&#21069;&#38754;&#30340;&#23450;&#29702;&#19968;&#26679;&#20570;&#24402;&#32435;&#35777;&#26126;&#65292;&#20320;&#24517;&#39035;&#21024;&#38500; <code class="docutils literal notranslate"><span class="pre">:=</span> <span class="pre">by</span></code>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">depth_le_size</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span><span class="o">,</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="bp">&#8804;</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#36824;&#35201;&#23450;&#20041;&#20108;&#21449;&#26641;&#19978;&#30340; <code class="docutils literal notranslate"><span class="pre">flip</span></code> &#36816;&#31639;&#65292;&#23427;&#36882;&#24402;&#22320;&#20132;&#25442;&#24038;&#21491;&#23376;&#26641;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">flip</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">BinTree</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#22914;&#26524;&#20320;&#20570;&#23545;&#20102;&#65292;&#19979;&#38754;&#30340;&#35777;&#26126;&#24212;&#35813;&#26159; <cite>rfl</cite>&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">example</span><span class="o">:</span><span class="w"> </span><span class="n">flip</span><span class="w">  </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">empty</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">empty</span><span class="o">))</span><span class="w"> </span><span class="bp">=</span>
<span class="w">    </span><span class="n">node</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">empty</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="o">(</span><span class="n">node</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">empty</span><span class="o">)</span><span class="w"> </span><span class="n">empty</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#35777;&#26126;&#19979;&#38754;&#30340;&#20869;&#23481;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">size_flip</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">t</span><span class="o">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">(</span><span class="n">flip</span><span class="w"> </span><span class="n">t</span><span class="o">)</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#25105;&#20204;&#20197;&#19968;&#20123;&#24418;&#24335;&#36923;&#36753;&#26469;&#32467;&#26463;&#36825;&#19968;&#33410;&#12290;
&#19979;&#38754;&#26159;&#21629;&#39064;&#20844;&#24335;&#30340;&#24402;&#32435;&#23450;&#20041;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">inductive</span><span class="w"> </span><span class="n">PropForm</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">where</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w">           </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">fls</span><span class="w">                   </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span>
</pre></div>
</div>
<p>&#27599;&#20010;&#21629;&#39064;&#20844;&#24335;&#35201;&#20040;&#26159;&#21464;&#37327; <code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">n</span></code>&#65292;&#35201;&#20040;&#26159;&#24120;&#25968;&#20551; <code class="docutils literal notranslate"><span class="pre">fls</span></code>&#65292;
&#35201;&#20040;&#26159;&#24418;&#24335;&#20026; <code class="docutils literal notranslate"><span class="pre">conj</span> <span class="pre">A</span> <span class="pre">B</span></code>&#12289;<code class="docutils literal notranslate"><span class="pre">disj</span> <span class="pre">A</span> <span class="pre">B</span></code> &#25110; <code class="docutils literal notranslate"><span class="pre">impl</span> <span class="pre">A</span> <span class="pre">B</span></code> &#30340;&#22797;&#21512;&#20844;&#24335;&#12290;
&#29992;&#26222;&#36890;&#30340;&#25968;&#23398;&#35760;&#27861;&#65292;&#36825;&#20123;&#36890;&#24120;&#20889;&#20316; <span class="math notranslate nohighlight">\(p_n\)</span>&#12289;<span class="math notranslate nohighlight">\(\bot\)</span>&#12289;<span class="math notranslate nohighlight">\(A \wedge B\)</span>&#12289;
<span class="math notranslate nohighlight">\(A \vee B\)</span> &#21644; <span class="math notranslate nohighlight">\(A \to B\)</span>&#12290;
&#20854;&#20182;&#21629;&#39064;&#36830;&#25509;&#35789;&#21487;&#20197;&#29992;&#36825;&#20123;&#26469;&#23450;&#20041;&#65307;&#20363;&#22914;&#65292;&#25105;&#20204;&#21487;&#20197;
&#23558; <span class="math notranslate nohighlight">\(\neg A\)</span> &#23450;&#20041;&#20026; <span class="math notranslate nohighlight">\(A \to \bot\)</span>&#65292;&#23558; <span class="math notranslate nohighlight">\(A \leftrightarrow B\)</span> &#23450;&#20041;&#20026;
<span class="math notranslate nohighlight">\((A \to B) \wedge (B \to A)\)</span>&#12290;</p>
<p>&#23450;&#20041;&#20102;&#21629;&#39064;&#20844;&#24335;&#30340;&#25968;&#25454;&#31867;&#22411;&#21518;&#65292;&#25105;&#20204;&#23450;&#20041;&#20102;&#30456;&#23545;&#20110;
&#21464;&#37327;&#30340;&#24067;&#23572;&#30495;&#20540;&#36171;&#20540; <code class="docutils literal notranslate"><span class="pre">v</span></code> &#26469;&#27714;&#20540;&#21629;&#39064;&#20844;&#24335;&#30340;&#21547;&#20041;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">eval</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="o">(</span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Bool</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Bool</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w">    </span><span class="n">v</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">n</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">fls</span><span class="o">,</span><span class="w">      </span><span class="n">_</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">false</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">&amp;&amp;</span><span class="w"> </span><span class="n">B.eval</span><span class="w"> </span><span class="n">v</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">||</span><span class="w"> </span><span class="n">B.eval</span><span class="w"> </span><span class="n">v</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="bp">!</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">||</span><span class="w"> </span><span class="n">B.eval</span><span class="w"> </span><span class="n">v</span>
</pre></div>
</div>
<p>&#19979;&#19968;&#20010;&#23450;&#20041;&#25351;&#23450;&#20102;&#20844;&#24335;&#20013;&#20986;&#29616;&#30340;&#21464;&#37327;&#30340;&#38598;&#21512;&#65292;
&#38543;&#21518;&#30340;&#23450;&#29702;&#26174;&#31034;&#20102;&#22312;&#20004;&#20010;&#22312;&#20844;&#24335;&#21464;&#37327;&#19978;&#19968;&#33268;&#30340;&#30495;&#20540;&#36171;&#20540;&#19979;&#27714;&#20540;&#20844;&#24335;&#20250;&#24471;&#21040;&#30456;&#21516;&#30340;&#20540;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">vars</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Finset</span><span class="w"> </span><span class="n">&#8469;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">n</span><span class="w">    </span><span class="bp">=&gt;</span><span class="w"> </span><span class="o">{</span><span class="n">n</span><span class="o">}</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">fls</span><span class="w">      </span><span class="bp">=&gt;</span><span class="w"> </span><span class="bp">&#8709;</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">A.vars</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">B.vars</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">A.vars</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">B.vars</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">A.vars</span><span class="w"> </span><span class="bp">&#8746;</span><span class="w"> </span><span class="n">B.vars</span>

<span class="kd">theorem</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Bool</span><span class="o">),</span>
<span class="w">    </span><span class="o">(</span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A.vars</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v2</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="o">,</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w">    </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp_all</span><span class="w"> </span><span class="o">[</span><span class="n">vars</span><span class="o">,</span><span class="w"> </span><span class="n">eval</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="o">]</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">fls</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="o">,</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w">      </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span><span class="w"> </span><span class="n">simp_all</span><span class="w"> </span><span class="o">[</span><span class="n">eval</span><span class="o">]</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="o">,</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="n">simp_all</span><span class="w"> </span><span class="o">[</span><span class="n">vars</span><span class="o">,</span><span class="w"> </span><span class="n">eval</span><span class="o">,</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">]</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="o">,</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="n">simp_all</span><span class="w"> </span><span class="o">[</span><span class="n">vars</span><span class="o">,</span><span class="w"> </span><span class="n">eval</span><span class="o">,</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">]</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="o">,</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="kd">by</span>
<span class="w">      </span><span class="n">simp_all</span><span class="w"> </span><span class="o">[</span><span class="n">vars</span><span class="o">,</span><span class="w"> </span><span class="n">eval</span><span class="o">,</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">,</span><span class="w"> </span><span class="n">eval_eq_eval</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">]</span>
</pre></div>
</div>
<p>&#27880;&#24847;&#21040;&#37325;&#22797;&#65292;&#25105;&#20204;&#21487;&#20197;&#32874;&#26126;&#22320;&#20351;&#29992;&#33258;&#21160;&#21270;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">eval_eq_eval&#39;</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Bool</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8712;</span><span class="w"> </span><span class="n">A.vars</span><span class="o">,</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="kd">by</span>
<span class="w">  </span><span class="n">cases</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="bp">&lt;;&gt;</span><span class="w"> </span><span class="n">simp_all</span><span class="w"> </span><span class="o">[</span><span class="n">eval</span><span class="o">,</span><span class="w"> </span><span class="n">vars</span><span class="o">,</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">eval_eq_eval&#39;</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">v2</span><span class="o">]</span>
</pre></div>
</div>
<p>&#20989;&#25968; <code class="docutils literal notranslate"><span class="pre">subst</span> <span class="pre">A</span> <span class="pre">m</span> <span class="pre">C</span></code> &#25551;&#36848;&#20102;&#22312;&#20844;&#24335; <code class="docutils literal notranslate"><span class="pre">A</span></code> &#20013;&#29992;&#20844;&#24335; <code class="docutils literal notranslate"><span class="pre">C</span></code> &#26367;&#25442;&#21464;&#37327; <code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">m</span></code> &#30340;&#27599;&#27425;&#20986;&#29616;&#30340;&#32467;&#26524;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">subst</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">PropForm</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">PropForm</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w">    </span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">n</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">fls</span><span class="o">,</span><span class="w">      </span><span class="n">_</span><span class="o">,</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">fls</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">conj</span><span class="w"> </span><span class="o">(</span><span class="n">A.subst</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">B.subst</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">C</span><span class="o">)</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">disj</span><span class="w"> </span><span class="o">(</span><span class="n">A.subst</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">B.subst</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">C</span><span class="o">)</span>
<span class="w">  </span><span class="bp">|</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="o">,</span><span class="w"> </span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="n">impl</span><span class="w"> </span><span class="o">(</span><span class="n">A.subst</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">B.subst</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">C</span><span class="o">)</span>
</pre></div>
</div>
<p>&#20316;&#20026;&#20363;&#23376;&#65292;&#35777;&#26126;&#20026;&#19968;&#20010;&#19981;&#22312;&#20844;&#24335;&#20013;&#20986;&#29616;&#30340;&#21464;&#37327;&#36827;&#34892;&#26367;&#25442;&#19981;&#20250;&#26377;&#20219;&#20309;&#25928;&#26524;&#65306;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">subst_eq_of_not_mem_vars</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">C</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">),</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8713;</span><span class="w"> </span><span class="n">A.vars</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">A.subst</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
<p>&#19979;&#38754;&#30340;&#23450;&#29702;&#35828;&#20102;&#19968;&#20123;&#26356;&#24494;&#22937;&#21644;&#26377;&#36259;&#30340;&#20107;&#24773;&#65306;&#22312;&#30495;&#20540;&#36171;&#20540; <code class="docutils literal notranslate"><span class="pre">v</span></code> &#19979;&#27714;&#20540; <code class="docutils literal notranslate"><span class="pre">A.subst</span> <span class="pre">n</span> <span class="pre">C</span></code>
&#19982;&#22312;&#23558; <code class="docutils literal notranslate"><span class="pre">C</span></code> &#30340;&#20540;&#36171;&#32473; <code class="docutils literal notranslate"><span class="pre">var</span> <span class="pre">n</span></code> &#30340;&#30495;&#20540;&#36171;&#20540;&#19979;&#27714;&#20540; <code class="docutils literal notranslate"><span class="pre">A</span></code> &#26159;&#19968;&#26679;&#30340;&#12290;
&#30475;&#30475;&#20320;&#33021;&#21542;&#35777;&#26126;&#23427;&#12290;</p>
<div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">theorem</span><span class="w"> </span><span class="n">subst_eval_eq</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#8704;</span><span class="w"> </span><span class="o">(</span><span class="n">A</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">C</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">PropForm</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">Bool</span><span class="o">),</span>
<span class="w">  </span><span class="o">(</span><span class="n">A.subst</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">eval</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">A.eval</span><span class="w"> </span><span class="o">(</span><span class="k">fun</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=&gt;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="n">C.eval</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="n">m</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="C05_Elementary_Number_Theory.html" class="btn btn-neutral float-left" title="5. &#21021;&#31561;&#25968;&#35770;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="C07_Structures.html" class="btn btn-neutral float-right" title="7. &#32467;&#26500;&#20307;&#65288;Structures&#65289;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Jeremy Avigad, Patrick Massot.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>